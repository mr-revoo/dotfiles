<<<<<<< HEAD
"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4389],{75592:(e,t,r)=>{r.d(t,{d:()=>p});var n,l=r(59950),i=(r(9555),r(63051),r(83603),r(15525),r(62980),r(75231),r(21977),r(76133),r(30758)),a=r(8539),s=r(4414),o=r(66569),u=r(30051),c=r(94541),d={"custom-order":u.RB,"title-and-artist-title":{column:c.$.TITLE_AND_ARTIST,order:c.H.ASC},"title-and-artist-artist":{column:c.$.TITLE_AND_ARTIST,order:c.H.SECONDARY_ASC},title:{column:c.$.TITLE,order:c.H.ASC},artist:{column:c.$.ARTIST,order:c.H.ASC},"added-by":{column:c.$.ADDED_BY,order:c.H.ASC},"added-at":{column:c.$.ADDED_AT,order:c.H.ASC},duration:{column:c.$.DURATION,order:c.H.ASC},album:{column:c.$.ALBUM,order:c.H.ASC},"album-or-podcast":{column:c.$.ALBUM_OR_PODCAST,order:c.H.ASC},"album-or-show":{column:c.$.ALBUM_OR_SHOW,order:c.H.ASC}},m={"title-and-artist-title":c.$.TITLE_AND_ARTIST,"title-and-artist-artist":c.$.TITLE_AND_ARTIST,title:c.$.TITLE,artist:c.$.ARTIST,"added-by":c.$.ADDED_BY,"added-at":c.$.ADDED_AT,duration:c.$.DURATION,album:c.$.ALBUM,"album-or-podcast":c.$.ALBUM_OR_PODCAST,"album-or-show":c.$.ALBUM_OR_SHOW},g=(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)({},c.H.NONE,c.H.NONE),c.H.ASC,c.H.DESC),c.H.DESC,c.H.ASC),c.H.SECONDARY_ASC,c.H.SECONDARY_DESC),c.H.SECONDARY_DESC,c.H.SECONDARY_ASC),A=((0,o.A)({},c.$.INDEX,{key:"custom-order",get value(){return a.Ru.get("sort.custom-order")}}),n={},(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)(n,c.$.INDEX,{key:"custom-order",get value(){return a.Ru.get("sort.custom-order")}}),c.$.TITLE_AND_ARTIST,{key:"title",get value(){return a.Ru.get("sort.title")}}),c.$.TITLE,{key:"title",get value(){return a.Ru.get("sort.title")}}),c.$.ARTIST,{key:"artist",get value(){return a.Ru.get("sort.artist")}}),c.$.ADDED_BY,{key:"added-by",get value(){return a.Ru.get("sort.added-by")}}),c.$.ADDED_AT,{key:"added-at",get value(){return a.Ru.get("sort.date-added")}}),c.$.DURATION,{key:"duration",get value(){return a.Ru.get("sort.duration")}}),c.$.EVENT_DATE,null),c.$.EVENT_INFO,null),c.$.ALBUM,{key:"album",get value(){return a.Ru.get("sort.album")}}),(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)(n,c.$.ALBUM_OR_PODCAST,{key:"album-or-podcast",get value(){return a.Ru.get("sort.album-or-podcast")}}),c.$.ALBUM_OR_SHOW,{key:"album-or-show",get value(){return a.Ru.get("sort.album-or-show")}}),c.$.PLAYS,null),c.$.RELEASE_DATE,null),c.$.ADD,null),c.$.ACTIONS,null),c.$.CONCERT_VENUE,null),c.$.CONCERT_DATE,null),c.$.TITLE_AND_AUTHOR,{key:"title",get value(){return a.Ru.get("sort.title")}}),c.$.AUTHOR,null)),x=r(43219),f=r(86070);function T(e){return!!e}var p=function(e){var t=e.columns,r=e.disabled,n=e.onSort,o=(0,l.A)(t),p=o.indexOf(c.$.TITLE_AND_ARTIST),y=o.indexOf(c.$.TITLE_AND_AUTHOR);-1!==p&&o.splice(p,1,c.$.TITLE,c.$.ARTIST),-1!==y&&o.splice(y,1);var b=(0,i.useContext)(u.cL),j=b.sortState,C=b.setSortState,h=function(e){return null===e.column?A[c.$.INDEX]:(0,x.kj)(e.column,e)?A[c.$.ARTIST]:A[e.column]}(j),R=(0,i.useCallback)((function(e){null==n||n(),C(function(e,t,r){return e?t!==m[e]?d[e]:{column:m[e],order:g[r]}:u.RB}(e,j.column,j.order))}),[n,C,j.column,j.order]),S=(0,i.useCallback)((function(){return null!==j.column}),[j.column]),I=o.map((function(e){return A[e]})).filter(T);return(0,f.jsx)(s.g,{options:I,onSelect:R,selected:h,isSelectionChanged:S,sortOrder:j.order,heading:a.Ru.get("drop_down.sort_by"),disabled:r,enableViewModeMenu:!0})}},48847:(e,t,r)=>{r.r(t),r.d(t,{default:()=>De});var n=r(66569),l=(r(59208),r(60989),r(9555),r(80710),r(63051),r(83603),r(15525),r(80766),r(10866),r(43864),r(18535),r(41681),r(62980),r(75231),r(21977),r(26980),r(76133),r(46825),r(30758)),i=r(58634),a=r(24089),s=r(79621),o=r(42236),u=r(19268),c=r(8539),d=r(24942),m=r(64741),g=r(79851),A=r(57528),x=r(83834),f=r(43219),T=r(35242),p=r(30051),y=r(83875),b=r(94541),j=r(85848),C=r(96331),h=r(83291),R=r(21280),S=r(73791),I=r(60093),D=r(10644),E=r(79464),v=r(58400),$=r(21792),_=r(18520),k=r(66932),O=r(74460),P=r(10139),N=r(93655),L=r(44671),M=r(23572),H=r(79278),w=r(44690),U=(r(82368),r(58470),r(67161)),B=r(93302),F=r(89457),Y=r(75592);const V="ijkY1leciNts_lZ000bI",X="nyi5paBf0kJsz7Py0DaI";var z=r(86070),W=l.memo((function(e){var t=e.tracklistDomRef,r=(0,v.r)(U.E,{}),n=r.spec,i=r.logger,a=(0,l.useCallback)((function(){i.logInteraction(n.filterFieldFactory().keyStrokeFilter())}),[i,n]),s=(0,l.useCallback)((function(){i.logInteraction(n.filterFieldFactory().hitClearFilter())}),[i,n]),o=(0,B.w)().filter((function(e){var t=e.columnType;return p.ws.includes(t)})).map((function(e){return e.columnType}));return(0,z.jsxs)("div",{className:X,children:[(0,z.jsx)(l.Suspense,{fallback:null,children:(0,z.jsx)(F.S,{placeholder:c.Ru.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:t,onFilter:a,onClear:s})}),(0,z.jsx)(Y.d,{columns:o})]})})),Z=l.memo((function(e){var t=e.tracklistDomRef,r=e.togglePlay,n=e.isPlaying,i=e.isActive,a=e.backgroundColor,s=e.spec,o=e.logger,u=(0,w.X)(),d=(0,l.useMemo)((function(){return s.shuffleButtonContainerFactory()}),[s]),m=(0,L.j)(),g=(0,l.useCallback)((function(){var e=(0,M.$I)({isPlaying:n,isActive:i,spec:s.playButtonFactory(),logger:o,uri:h.bV});r({loggingParams:e})}),[i,n,o,s,r]);return(0,z.jsx)(P.E,{backgroundColor:a,children:(0,z.jsxs)(N.S,{children:[(0,z.jsx)(x.D,{size:m,onClick:g,isPlaying:n,uri:h.bV}),u&&(0,z.jsx)(D.r,{spec:d,children:(0,z.jsx)(H.Y,{entityName:c.Ru.get("local-files"),contextUri:h.bV,activationPlacement:"bottomEnd",size:m})}),(0,z.jsx)(D.r,{spec:s,children:(0,z.jsx)(W,{tracklistDomRef:t})})]})})})),q=(r(45191),r(45803),r(54858),r(36389),r(85194),r(27092),r(68925),r(31796),r(21467),r(22064),r(92114),r(77020),r(23833),r(89220)),K=r(87349),J=r(12071),G=r(96915),Q=r(52756),ee=r(93697),te=r(54229),re=r(15609),ne=r(72368),le=r(22239),ie=r(6748),ae=r(64436),se=r(14936),oe=r(1479),ue=r(72786),ce=r(57412),de=r(38680),me=r(13148),ge=r(59960),Ae=r(93412),xe=r(13012),fe=r(29794),Te=r(54847),pe=l.memo((function(e){var t=e.uri,r=e.uid,n=e.name,i=e.duration_ms,a=e.artists,s=e.album,o=e.is19PlusOnly,u=e.isExplicit,d=e.isPlayable,m=e.index,g=e.contextUri,A=e.imgUrl,x=e.usePlayContextItem,f=e.isCompactMode,p=void 0!==f&&f,y=(0,v.r)(q.i,{data:{position:m,reason:"",uri:t}}).spec,j=(0,l.useContext)(T.g).filter,C=x({uid:r,uri:t,index:m}),h=C.isActive,R=C.isPlaying,S=C.triggerPlay,I=C.togglePlay,D=(0,te.b)({isExplicit:u}),E=D.badges,$=D.hasBadges,_=(null==a?void 0:a.map((function(e){return e.name})).join(c.Ru.getSeparator()))||"",k=(0,B.w)();return(0,z.jsx)(ee.pZ,{value:"row",index:m,children:(0,z.jsx)(K.h,{menu:(0,z.jsx)(re.A,{uri:t,uid:r,contextUri:g}),children:(0,z.jsx)(Te.w,{uri:t,contextUri:g,isActive:h,index:m,onTriggerPlay:function(e,t){S({loggingParams:t})},ariaRowIndex:m+1,isPlayable:d,ageRestricted:o,dragMetadata:{name:n,createdBy:_},spec:y,isCompactMode:p,children:k.map((function(e,l){var o=e.columnType,u=e.options,d=(0,J.y)(l,o,k);switch(o){case b.$.INDEX:return(0,z.jsx)(d,{ariaColIndex:l,children:(0,z.jsx)(de.$,{uri:t,playAriaLabel:c.Ru.get("tracklist.a11y.play",n,_),isPlaying:R,isActive:h,onClick:function(e,t){I({loggingParams:t})},spec:y,children:(0,z.jsx)(ge.a,{children:m+1})})},l);case b.$.TITLE_AND_ARTIST:return(0,z.jsxs)(d,{ariaColIndex:l,children:[(0,z.jsx)(oe.e,{src:A}),(0,z.jsxs)(ue.l,{children:[(0,z.jsx)(fe.p,{titleText:n,children:(0,z.jsx)(ne.M,{searchWords:[j],textToHighlight:n})}),$&&(0,z.jsx)(ae.P,{children:E.explicit?(0,z.jsx)(Q.g,{}):null}),(0,z.jsx)(Ae.p,{children:a&&(0,z.jsx)(le.E,{nonInteractive:!0,artists:a,filter:j})})]})]},l);case b.$.TITLE:return(0,z.jsx)(d,{ariaColIndex:l,children:(0,z.jsxs)(ce.q,{children:[(0,z.jsx)(fe.p,{titleText:n,children:(0,z.jsx)(ne.M,{searchWords:[j],textToHighlight:n})}),$&&(0,z.jsx)(ae.P,{children:E.explicit?(0,z.jsx)(Q.g,{}):null})]})},l);case b.$.ARTIST:return(0,z.jsx)(d,{ariaColIndex:l,children:(0,z.jsx)(xe.Y,{children:a&&(0,z.jsx)(le.E,{nonInteractive:!0,artists:a,filter:j})})},l);case b.$.ALBUM:return(0,z.jsx)(d,{ariaColIndex:l,children:(null==s?void 0:s.name)&&(0,z.jsx)(ie.g,{nonInteractive:!0,uri:null==s?void 0:s.uri,name:null==s?void 0:s.name,children:(0,z.jsx)(ne.M,{searchWords:[j],textToHighlight:null==s?void 0:s.name})})},l);case b.$.DURATION:return(0,z.jsxs)(d,{ariaColIndex:l,children:[(0,z.jsx)(G.d,{uri:t}),!(null!=u&&u.hideDuration)&&(0,z.jsx)(se.P,{duration:i}),(0,z.jsx)(me.Y,{menu:(0,z.jsx)(re.A,{uri:t,uid:r,contextUri:g}),label:c.Ru.get("more.label.track",n,_),spec:y})]},l);default:return null}}))})})})}),(function(e,t){return e.uri===t.uri&&e.index===t.index&&e.isCompactMode===t.isCompactMode})),ye=r(59943),be=r(49294),je=new Set(p.ws),Ce=l.memo((function(e){var t=e.uri,r=e.tracks,n=e.sortState,i=e.handleSort,a=e.usePlayContextItem,s=e.tracklistDomRef,o=e.isCompactMode,u=void 0!==o&&o,d=(0,B.w)(),m=(0,l.useRef)(null),g=(0,l.useCallback)((function(e,r){var n,l=(0,ye.g)(null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40,desiredLabel:"small"});return(0,z.jsx)(pe,{index:r,contextUri:t,uri:e.uri,uid:e.uid,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album||void 0,isExplicit:e.isExplicit,is19PlusOnly:e.is19PlusOnly,type:e.type,imgUrl:(null==l?void 0:l.url)||"",usePlayContextItem:a,isCompactMode:u},e.uid)}),[t,a,u]),A=(0,l.useCallback)((function(e){return{uri:e.uri,uid:e.uid}}),[]);return(0,z.jsx)(z.Fragment,{children:(0,z.jsx)(ee.pZ,{value:"playlist-tracklist",children:(0,z.jsx)(be.S4,{ariaLabel:c.Ru.get("local-files"),hasHeaderRow:!0,columns:d,sortableColumns:je,sortState:n,onSort:i,renderRow:g,resolveItem:A,tracks:r,nrTracks:r.length,limit:100,outerRef:m,outerDomRef:s,isCompactMode:u,columnPersistenceKey:"playlist-tracklist"},t)})})}));function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Se=[b.$.INDEX,b.$.TITLE_AND_ARTIST,b.$.ALBUM,b.$.DURATION],Ie=function(){var e=(0,l.useContext)(T.g).filter,t=(0,l.useContext)(p.cL),r=t.sortState,n=t.setSortState,P=(0,l.useContext)(R._),N=(0,S.P)(),L=(0,C.z)(s.kleinBlue),M=(0,l.useRef)(null),H=(0,v.r)(u.Z,{data:{uri:h.bV}}).spec,w=(0,l.useMemo)((function(){return H.actionBarFactory()}),[H]),U=(0,l.useMemo)((function(){return H.tracklistFactory()}),[H]),B=(0,E.s)(),F=(0,j.a)().isCompactMode,Y=function(e){var t=e.isCompactMode,r=void 0!==t&&t,n=[].concat(Se);return r&&n.splice(n.indexOf(b.$.TITLE_AND_ARTIST),1,b.$.TITLE,b.$.ARTIST),n}({isCompactMode:F}),X=(0,l.useCallback)((function(e,t){n((0,f.So)(e,r)),B.logInteraction(H.tracklistFactory().columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[n,r,B,H]),W=(0,i.I)({queryKey:["local-files",r,e],queryFn:function(){return P.getTracks((0,f.Xt)(r),e)},staleTime:0,gcTime:3e5,placeholderData:a.rX,enabled:N}).data,q=(0,I.P)({uri:h.bV,pages:[{items:(null!=W?W:[]).map((function(e){return Re(Re({},e),{},{provider:null})}))}]},{featureIdentifier:"local_files"}),K=q.isActive,J=q.isPlaying,G=q.togglePlay,Q=q.usePlayContextItem;return W?e||W.length&&N?(0,z.jsx)(y.a,{columns:Y,children:(0,z.jsxs)("div",{role:"presentation",className:V,children:[(0,z.jsxs)(_.z,{backgroundColor:L,children:[(0,z.jsxs)(m.h,{children:[(0,z.jsx)(x.D,{size:"medium",onClick:function(){return G()},isPlaying:J,uri:h.bV}),(0,z.jsx)(g.X,{text:c.Ru.get("local-files")})]}),(0,z.jsxs)(k.Y,{children:[(0,z.jsx)(O.mm,{children:c.Ru.get("local-files")}),(0,z.jsx)($.Z,{children:c.Ru.get("local-files.description")})]})]}),(0,z.jsx)(Z,{togglePlay:G,isPlaying:J,isActive:K,backgroundColor:L,tracklistDomRef:M,spec:w,logger:B}),(0,z.jsx)("div",{className:"contentSpacing",children:(0,z.jsx)(D.r,{spec:U,children:(0,z.jsx)(Ce,{tracks:W,uri:h.bV,handleSort:X,sortState:r,usePlayContextItem:Q,tracklistDomRef:M,isCompactMode:F})})})]})}):(0,z.jsx)(d.p,{linkTo:"/preferences",linkTitle:c.Ru.get("local-files.empty-button"),message:c.Ru.get("local-files.empty-description"),title:c.Ru.get("local-files.empty-header"),children:(0,z.jsx)(o.s,{size:"xxlarge","aria-hidden":"true"})}):(0,z.jsx)(A.A,{hasError:!1,errorMessage:c.Ru.get("error.request-artist-failure"),loadOffline:!0})};const De=function(){return(0,z.jsx)(p.sn,{uri:"spotify:internal:local-files",children:(0,z.jsx)(T.s,{uri:"spotify:internal:local-files",children:(0,z.jsx)(Ie,{})})})}},73791:(e,t,r)=>{r.d(t,{P:()=>l});var n=r(5298);function l(){return(0,n.y)()[0]}},5298:(e,t,r)=>{r.d(t,{y:()=>a});var n=r(98866),l=r(30758),i=r(21280);function a(){var e=(0,l.useContext)(i._),t=(0,l.useState)(e.getIsEnabled()),r=(0,n.A)(t,2),a=r[0],s=r[1];return(0,l.useEffect)((function(){var t=e.subscribeIsEnabled(s);return function(){return t()}}),[e]),[a,(0,l.useCallback)((function(t){return e.setIsEnabled(t)}),[e])]}}}]);
=======
"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7379],{55538:(e,t,l)=>{l.d(t,{l:()=>A});l(46758),l(53321),l(86277);var r=l(50959),a=l(85648),i=l(67408),s=l(50216),n=l(98328);const o={"custom-order":s.HI,"title-and-artist-title":{column:n.Q.TITLE_AND_ARTIST,order:n.k.ASC},"title-and-artist-artist":{column:n.Q.TITLE_AND_ARTIST,order:n.k.SECONDARY_ASC},title:{column:n.Q.TITLE,order:n.k.ASC},artist:{column:n.Q.ARTIST,order:n.k.ASC},"added-by":{column:n.Q.ADDED_BY,order:n.k.ASC},"added-at":{column:n.Q.ADDED_AT,order:n.k.ASC},duration:{column:n.Q.DURATION,order:n.k.ASC},album:{column:n.Q.ALBUM,order:n.k.ASC},"album-or-podcast":{column:n.Q.ALBUM_OR_PODCAST,order:n.k.ASC},"album-or-show":{column:n.Q.ALBUM_OR_SHOW,order:n.k.ASC}},c={"title-and-artist-title":n.Q.TITLE_AND_ARTIST,"title-and-artist-artist":n.Q.TITLE_AND_ARTIST,title:n.Q.TITLE,artist:n.Q.ARTIST,"added-by":n.Q.ADDED_BY,"added-at":n.Q.ADDED_AT,duration:n.Q.DURATION,album:n.Q.ALBUM,"album-or-podcast":n.Q.ALBUM_OR_PODCAST,"album-or-show":n.Q.ALBUM_OR_SHOW},u={[n.k.NONE]:n.k.NONE,[n.k.ASC]:n.k.DESC,[n.k.DESC]:n.k.ASC,[n.k.SECONDARY_ASC]:n.k.SECONDARY_DESC,[n.k.SECONDARY_DESC]:n.k.SECONDARY_ASC},d=(n.Q.INDEX,{[n.Q.INDEX]:{key:"custom-order",get value(){return a.ag.get("sort.custom-order")}},[n.Q.TITLE_AND_ARTIST]:{key:"title",get value(){return a.ag.get("sort.title")}},[n.Q.TITLE]:{key:"title",get value(){return a.ag.get("sort.title")}},[n.Q.ARTIST]:{key:"artist",get value(){return a.ag.get("sort.artist")}},[n.Q.ADDED_BY]:{key:"added-by",get value(){return a.ag.get("sort.added-by")}},[n.Q.ADDED_AT]:{key:"added-at",get value(){return a.ag.get("sort.date-added")}},[n.Q.DURATION]:{key:"duration",get value(){return a.ag.get("sort.duration")}},[n.Q.EVENT_DATE]:null,[n.Q.EVENT_INFO]:null,[n.Q.ALBUM]:{key:"album",get value(){return a.ag.get("sort.album")}},[n.Q.ALBUM_OR_PODCAST]:{key:"album-or-podcast",get value(){return a.ag.get("sort.album-or-podcast")}},[n.Q.ALBUM_OR_SHOW]:{key:"album-or-show",get value(){return a.ag.get("sort.album-or-show")}},[n.Q.PLAYS]:null,[n.Q.RELEASE_DATE]:null,[n.Q.ADD]:null,[n.Q.ACTIONS]:null,[n.Q.CONCERT_VENUE]:null,[n.Q.CONCERT_DATE]:null,[n.Q.TITLE_AND_AUTHOR]:{key:"title",get value(){return a.ag.get("sort.title")}},[n.Q.AUTHOR]:null});var g=l(36199),m=l(21536),x=l(11527);function T(e){return!!e}const A=({columns:e,disabled:t,onSort:l})=>{const A=[...e],C=A.indexOf(g.QD.TITLE_AND_ARTIST),D=A.indexOf(g.QD.TITLE_AND_AUTHOR);-1!==C&&A.splice(C,1,g.QD.TITLE,g.QD.ARTIST),-1!==D&&A.splice(D,1);const{sortState:h,setSortState:k}=(0,r.useContext)(s.Gb),p=function(e){return null===e.column?d[g.QD.INDEX]:(0,m.cB)(e.column,e)?d[g.QD.ARTIST]:d[e.column]}(h),S=(0,r.useCallback)((e=>{l?.(),k(((e,t,l)=>e?t!==c[e]||"artist"===e&&[n.k.ASC,n.k.DESC].includes(l)||"title"===e&&[n.k.SECONDARY_ASC,n.k.SECONDARY_DESC].includes(l)?o[e]:{column:c[e],order:u[l]}:s.HI)(e,h.column,h.order))}),[l,k,h.column,h.order]),y=(0,r.useCallback)((()=>null!==h.column),[h.column]),I=A.map((e=>d[e])).filter(T);return(0,x.jsx)(i.A,{options:I,onSelect:S,selected:p,isSelectionChanged:y,sortOrder:h.order,heading:a.ag.get("drop_down.sort_by"),disabled:t,enableViewModeMenu:!0})}},12437:(e,t,l)=>{l.r(t),l.d(t,{default:()=>oe});l(46758),l(53321),l(86277);var r=l(50959),a=l(41194),i=l(43007),s=l(39505),n=l(32469),o=l(12970),c=l(85648),u=l(38024),d=l(97922),g=l(81639),m=l(16118),x=l(91643),T=l(57986),A=l(21536),C=l(65432),D=l(36199),h=l(50216),k=l(61046),p=l(19848),S=l(98716),y=l(58959),I=l(53335),j=l(27284),f=l(22527),b=l(80626),E=l(51837),_=l(87236),Q=l(8824),R=l(55538);const N="uCHqQ74vvHOnctGg0X0B",v="feuNq1FTxMbdeOTuFgpA";var O=l(11527);const P=r.memo((({tracklistDomRef:e})=>{const{spec:t,logger:l}=(0,b.fU)(E.createDesktopSearchBarEventFactory,{}),a=(0,r.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[l,t]),i=(0,r.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().hitClearFilter())}),[l,t]),s=(0,_.v)().filter((e=>h.MI.includes(e)));return(0,O.jsxs)("div",{className:v,children:[(0,O.jsx)(r.Suspense,{fallback:null,children:(0,O.jsx)(Q.K,{placeholder:c.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:a,onClear:i})}),(0,O.jsx)(R.l,{columns:s})]})}));var L=l(15842),M=l(66205),U=l(66819),B=l(64222),F=l(25230),w=l(72417);const H=r.memo((function({tracklistDomRef:e,togglePlay:t,isPlaying:l,isActive:a,backgroundColor:i,spec:s,logger:n}){const o=(0,w.Q)(),u=(0,r.useMemo)((()=>s.shuffleButtonContainerFactory()),[s]),d=(0,U.j)(),g=(0,r.useCallback)((()=>{const e=(0,B.aK)({isPlaying:l,isActive:a,spec:s.playButtonFactory(),logger:n,uri:y.b});t({loggingParams:e})}),[a,l,n,s,t]);return(0,O.jsx)(L.o,{backgroundColor:i,children:(0,O.jsxs)(M.F,{children:[(0,O.jsx)(T.$,{size:d,onClick:g,isPlaying:l,uri:y.b}),o&&(0,O.jsx)(b.Nh,{spec:u,children:(0,O.jsx)(F.K,{entityName:c.ag.get("local-files"),contextUri:y.b,activationPlacement:"bottomEnd",size:d})}),(0,O.jsx)(b.Nh,{spec:s,children:(0,O.jsx)(P,{tracklistDomRef:e})})]})})}));l(92372),l(70069),l(44227),l(91499),l(68856),l(18004),l(16527);var Y=l(34514),W=l(82579),z=l(98328),K=l(19125),X=l(19968),q=l(44724),V=l(45438),G=l(74234),$=l(35014),J=l(4901),Z=l(31360),ee=l(67282),te=l(85357);const le=r.memo((function({uri:e,uid:t,name:l,duration_ms:a,artists:i,album:s,is19PlusOnly:n,isExplicit:o,isPlayable:u,index:d,contextUri:g,imgUrl:m,usePlayContextItem:x,isCompactMode:T=!1}){const{spec:A}=(0,b.fU)(Y.r,{data:{position:d,reason:"",uri:e}}),{filter:D}=(0,r.useContext)(C.fo),{isActive:h,isPlaying:k,triggerPlay:p,togglePlay:S}=x({uid:t,uri:e,index:d}),{badges:y,hasBadges:I}=(0,G.r)({isExplicit:o}),j=i?.map((e=>e.name)).join(c.ag.getSeparator())||"",f=(0,_.v)();return(0,O.jsx)(V.JL,{value:"row",index:d,children:(0,O.jsx)(W._,{menu:(0,O.jsx)($.N,{uri:e,uid:t,contextUri:g}),children:(0,O.jsx)(te.c,{uri:e,contextUri:g,isActive:h,index:d,onTriggerPlay:(e,t)=>{p({loggingParams:t})},ariaRowIndex:d+1,isPlayable:u,ageRestricted:n,dragMetadata:{name:l,createdBy:j},spec:A,isCompactMode:T,children:f.map(((r,n)=>{const o=(0,K.Y)(n,r,f);switch(r){case z.Q.INDEX:return(0,O.jsx)(o,{ariaColIndex:n,children:(0,O.jsx)(Z.Du,{uri:e,playAriaLabel:c.ag.get("tracklist.a11y.play",l,j),isPlaying:k,isActive:h,onClick:(e,t)=>{S({loggingParams:t})},spec:A,children:(0,O.jsx)(Z.km,{children:d+1})})},n);case z.Q.TITLE_AND_ARTIST:return(0,O.jsxs)(o,{ariaColIndex:n,children:[(0,O.jsx)(Z.lD,{src:m}),(0,O.jsxs)(Z.vm,{children:[(0,O.jsx)(Z.Wh,{titleText:l,children:(0,O.jsx)(J.o,{searchWords:[D],textToHighlight:l})}),I&&(0,O.jsx)(Z.g3,{children:y.explicit?(0,O.jsx)(q.N,{}):null}),(0,O.jsx)(Z.K9,{children:i&&(0,O.jsx)(ee.o,{nonInteractive:!0,artists:i,filter:D})})]})]},n);case z.Q.TITLE:return(0,O.jsx)(o,{ariaColIndex:n,children:(0,O.jsxs)(Z.nh,{children:[(0,O.jsx)(Z.Wh,{titleText:l,children:(0,O.jsx)(J.o,{searchWords:[D],textToHighlight:l})}),I&&(0,O.jsx)(Z.g3,{children:y.explicit?(0,O.jsx)(q.N,{}):null})]})},n);case z.Q.ARTIST:return(0,O.jsx)(o,{ariaColIndex:n,children:(0,O.jsx)(Z.I4,{children:i&&(0,O.jsx)(ee.o,{nonInteractive:!0,artists:i,filter:D})})},n);case z.Q.ALBUM:return(0,O.jsx)(o,{ariaColIndex:n,children:s?.name&&(0,O.jsx)(Z.BM,{nonInteractive:!0,uri:s?.uri,name:s?.name,children:(0,O.jsx)(J.o,{searchWords:[D],textToHighlight:s?.name})})},n);case z.Q.DURATION:return(0,O.jsxs)(o,{ariaColIndex:n,children:[(0,O.jsx)(X.f,{uri:e}),(0,O.jsx)(Z.A$,{duration:a}),(0,O.jsx)(Z.Zv,{menu:(0,O.jsx)($.N,{uri:e,uid:t,contextUri:g}),label:c.ag.get("more.label.track",l,j),spec:A})]},n);default:return null}}))})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index&&e.isCompactMode===t.isCompactMode));var re=l(58912);const ae=new Set(h.MI),ie=r.memo((function({uri:e,tracks:t,sortState:l,handleSort:a,usePlayContextItem:i,tracklistDomRef:s,isCompactMode:n=!1}){const o=(0,_.v)(),u=(0,r.useRef)(null),d=(0,r.useCallback)(((t,l)=>{const r=(0,re.X)(t.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,O.jsx)(le,{index:l,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album||void 0,isExplicit:t.isExplicit,is19PlusOnly:t.is19PlusOnly,type:t.type,imgUrl:r?.url||"",usePlayContextItem:i,isCompactMode:n},t.uid)}),[e,i,n]),g=(0,r.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(V.JL,{value:"playlist-tracklist",children:(0,O.jsx)(D.Pv,{ariaLabel:c.ag.get("local-files"),hasHeaderRow:!0,columns:o,sortableColumns:ae,sortState:l,onSort:a,renderRow:d,resolveItem:g,tracks:t,nrTracks:t.length,limit:100,outerRef:u,outerDomRef:s,isCompactMode:n,columnPersistenceKey:"playlist-tracklist"},e)})})})),se=[D.QD.INDEX,D.QD.TITLE_AND_ARTIST,D.QD.ALBUM,D.QD.DURATION],ne=()=>{const{filter:e}=(0,r.useContext)(C.fo),{sortState:t,setSortState:l}=(0,r.useContext)(h.Gb),E=(0,r.useContext)(I.t),_=(0,j.I)(),Q=(0,S.Y)(s.Fzl),R=(0,r.useRef)(null),{spec:v}=(0,b.fU)(o.G,{data:{uri:y.b}}),P=(0,r.useMemo)((()=>v.actionBarFactory()),[v]),L=(0,r.useMemo)((()=>v.tracklistFactory()),[v]),M=(0,b.$P)(),{isCompactMode:U}=(0,p.mJ)(),B=(({isCompactMode:e=!1})=>{const t=[...se];return e&&t.splice(t.indexOf(D.QD.TITLE_AND_ARTIST),1,D.QD.TITLE,D.QD.ARTIST),t})({isCompactMode:U}),F=(0,r.useCallback)(((e,r)=>{l((0,A.VK)(e,t)),M.logInteraction(v.tracklistFactory().columnHeaderFactory({identifier:e,position:r||0}).hitSort())}),[l,t,M,v]),{data:w}=(0,a.a)({queryKey:["local-files",t,e],queryFn:()=>E.getTracks((0,A._j)(t),e),staleTime:0,gcTime:3e5,placeholderData:i.Wk,enabled:_}),{isActive:Y,isPlaying:W,togglePlay:z,usePlayContextItem:K}=(0,f.n)({uri:y.b,pages:[{items:(w??[]).map((e=>({...e,provider:null})))}]},{featureIdentifier:"local_files"});return w?e||w.length&&_?(0,O.jsx)(k.a,{columns:B,children:(0,O.jsxs)("div",{role:"presentation",className:N,children:[(0,O.jsxs)(d.gF,{backgroundColor:Q,children:[(0,O.jsxs)(g.W,{children:[(0,O.jsx)(T.$,{size:"medium",onClick:()=>z(),isPlaying:W,uri:y.b}),(0,O.jsx)(m.i,{text:c.ag.get("local-files")})]}),(0,O.jsxs)(d.sP,{children:[(0,O.jsx)(d.xd,{children:c.ag.get("local-files")}),(0,O.jsx)(d.T0,{children:c.ag.get("local-files.description")})]})]}),(0,O.jsx)(H,{togglePlay:z,isPlaying:W,isActive:Y,backgroundColor:Q,tracklistDomRef:R,spec:P,logger:M}),(0,O.jsx)("div",{className:"contentSpacing",children:(0,O.jsx)(b.Nh,{spec:L,children:(0,O.jsx)(ie,{tracks:w,uri:y.b,handleSort:F,sortState:t,usePlayContextItem:K,tracklistDomRef:R,isCompactMode:U})})})]})}):(0,O.jsx)(u.u,{linkTo:"/preferences",linkTitle:c.ag.get("local-files.empty-button"),message:c.ag.get("local-files.empty-description"),title:c.ag.get("local-files.empty-header"),children:(0,O.jsx)(n.Y,{size:"xxlarge","aria-hidden":"true"})}):(0,O.jsx)(x.h,{hasError:!1,errorMessage:c.ag.get("error.request-artist-failure"),loadOffline:!0})},oe=()=>(0,O.jsx)(h.kz,{uri:"spotify:internal:local-files",children:(0,O.jsx)(C.hz,{uri:"spotify:internal:local-files",children:(0,O.jsx)(ne,{})})})}}]);
>>>>>>> origin/master
//# sourceMappingURL=xpui-routes-collection-local-files.js.map