<<<<<<< HEAD
"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3417],{78745:(e,t,i)=>{i.r(t),i.d(t,{FeatureActivationSection:()=>Le});var a=i(59950),n=i(49046),r=(i(59208),i(2944),i(42078),i(40313),i(60989),i(9555),i(24847),i(59433),i(52165),i(45191),i(20767),i(20427),i(45803),i(47246),i(77020),i(62980),i(11034),i(65083),i(36389),i(75231),i(21977),i(99146));function o(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return l(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=Array(t);i<t;i++)a[i]=e[i];return a}var s={collaborativePlaylists:r.X.CollaborativePlaylists,liveEvents:r.X.LiveEvents,groupSessions:r.X.GroupSessions,veryHighQualityAudio:r.X.VeryHighQualityAudio,blend:r.X.Blend,smartShuffle:r.X.SmartShuffle,dj:r.X.Dj};function c(e){var t,i,a,r,l=[],c=o(e);try{for(c.s();!(t=c.n()).done;){var u=t.value;if(r=u,"object"===(0,n.A)(r)&&null!==r&&"data"in r&&"object"===(0,n.A)(r.data)&&null!==r.data&&"name"in r.data){var d=(i=u.data.name,a=void 0,null===i?null:null!==(a=s[i])&&void 0!==a?a:null);if(null===d)continue;l.push({feature:d,activated:u.data.activated,image:u.data.image,title:u.data.title,uri:u.data.uri,name:u.data.name,destination:u.data.destination})}}}catch(e){c.e(e)}finally{c.f()}return l}i(83603),i(76133);var u=i(30758),d=i(75125),f=i(8539),v=i(66569),p=i(97500),h=i.n(p),y=i(11207),g=i(22073),m=i(39889);const C="NTywvDEuW1PlcoR__9XV",b="BkQ1MPUWBY0WvjENXmC7",j="hwhquP1FOxRcCnf84P2M",S="MIBwSRJ5XZaCw1WWXXBn",A="dEuzpK3s_BmlRiVNFude",x="IeJGaG6QXRvfMka0gCSG",F="Wh0HGq_CXEX_JqbSYvx7",w="MVRnUhNC4ZMglLR56YMn",R="jjQUaCx5rvU20rWBzyLA",E="ES02HhKmADP_AdcKPs1e",N="IYwEYGRUJ5RTtr0EyBV1",k="YYlv5PB5fGQthi9XzTQg";var O=i(86070),V=u.memo((function(e){var t=e.isLoading,i=(0,m.h)("shimmer");return(0,O.jsx)("div",{ref:i,className:h()(C,(0,v.A)({},k,t))})})),X=u.memo((function(e){var t=e.cardImage,i=e.isLoading;return(0,O.jsx)(y.v,{className:j,media:t||(0,O.jsx)(V,{isLoading:i}),id:"feature-skeleton-card-id",title:(0,O.jsx)(g.Y,{as:"div",variant:"bodyMediumBold",className:E,charCount:10,isLoading:i}),body:(0,O.jsx)(g.Y,{as:"div",variant:"bodySmall",className:N,charCount:15,isLoading:i}),layout:"wide",size:"xl",variant:"elevated"})})),H=i(98866),P=i(29969),I=i(52618),L=i.n(I),M=(i(22711),i(42374),i(76875)),Q=i(73997),B=i(68966);var U={offset:0,limit:50,flatten:!0,sort:{field:B.nw.RELEVANCE,order:B.xB.DESC}};function Z(e){var t=(0,Q.g)(),i=(0,u.useContext)(M.w),a=(0,u.useMemo)((function(){return function(e){return function(){var t=(0,P.A)(L().mark((function t(i){var a;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==i){t.next=2;break}return t.abrupt("return",null);case 2:return t.prev=2,t.next=5,e.getPlaylist(i.uri);case 5:return a=t.sent,t.abrupt("return",null!=a&&a.metadata.hasSpotifyTracks?a:null);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}(i)}),[i]),n=(0,u.useState)([]),r=(0,H.A)(n,2),o=r[0],l=r[1],s=(0,u.useState)(!1),c=(0,H.A)(s,2),d=c[0],f=c[1],v=(0,u.useState)(null),p=(0,H.A)(v,2),h=p[0],y=p[1];return(0,u.useEffect)((function(){f(!0),t.getContents(U).then((function(t){return function(e,t){return e.items.filter(B.Af).filter((function(e){return e.isOwnedBySelf&&e.totalLength>0})).slice(0,t)}(t,e)})).then((function(e){return Promise.all(e.map(a))})).then((function(e){return e.filter((function(e){return null!==e}))})).then((function(e){return l(e)})).catch(y).finally((function(){return f(!1)}))}),[t,a,e]),{loading:d,playlists:o,error:h}}var _=i(1669),D=i(28018),G=i(56663),z=function(){var e=(0,D.t)(),t=(0,G.K)(e.quality.streamingQuality),i=(0,H.A)(t,2),a=i[0].data,n=i[1].mutate,r=(0,G.K)(e.quality.maxSupportedQuality),o=(0,H.A)(r,1)[0].data;if(void 0===a||void 0===o)return{isAvailable:!1,isEnabled:!1,enableVeryHighQualityAudio:function(){}};return{isAvailable:o>=_.Qi.VERY_HIGH,isEnabled:a===_.a1.VERY_HIGH,enableVeryHighQualityAudio:function(){n(_.a1.VERY_HIGH)}}},T=i(58400),q=i(83086),Y=i(44690),W=i(28339),J=(i(80710),i(91911),i(80766),i(10866),i(43864),i(18535),i(41681),i(32599),i(26980),i(3869),i(46825),i(98350));function K(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function $(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?K(Object(i),!0).forEach((function(t){(0,v.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ee=function(e){return e.desktopSessionsSinceFullActivation>=2||e.desktopSessions>=20};var te=i(33165),ie=i(58184),ae=i(71309),ne=i(48873),re=function(e){var t=e.children,i=e.isActivated,a=e.inShelf;return(0,O.jsx)(ie.E,{as:"p",variant:"bodyMediumBold",className:h()(A,(0,v.A)({},x,!a)),style:{paddingInlineEnd:i?"18px":"initial"},children:t})},oe=i(91581),le=i(63617),se=u.memo((function(e){var t=e.image,i=e.onClick,a=e.id,n=e.title,r=e.body,o=e.footer,l=e.activated,s=e.premiumOnlyFeature;return(0,O.jsx)(y.v,{className:j,media:t,id:a||"",title:n,body:r,layout:"wide",size:"xl",pretitle:(0,O.jsxs)(O.Fragment,{children:[s&&(0,O.jsx)(le.T,{color: getComputedStyle(document.body).getPropertyValue("--spice-text").trim(),height:"18",className:S}),l&&(0,O.jsx)(oe.i,{size:"small",className:b})]}),variant:"elevated",footer:o,onClick:i})})),ce=i(59712);var ue=u.memo((function(e){var t=e.activated,i=e.position,a=e.inShelf,n=e.onFeatureActivate,r=(0,te.Zp)(),o="/blend/invitation",l=function(e,t,i,a){var n=(0,T.r)(d.i,{}),r=n.spec,o=n.logger,l=(0,T.r)(ce.d,{}),s=l.spec,c=l.logger;return e?{eventFactory:t?r.shelfContainerFactory().activatedBlendCardFactory({position:i,uri:a}):r.shelfContainerFactory().blendCardFactory({position:i,uri:a}),logger:o}:{eventFactory:t?s.activatedBlendCardFactory({position:i,uri:a}):s.blendCardFactory({position:i,uri:a}),logger:c}}(a,t,i,o),s=l.eventFactory,c=l.logger;(0,u.useEffect)((function(){c.logImpression(s.impression())}),[]);var v=function(){n(),c.logInteraction(s.hitUiNavigate({destination:o})),r(o)};return(0,O.jsx)(se,{activated:t,premiumOnlyFeature:!1,image:(0,ne.b)("images/feature-activation-shelf-blend.png"),onClick:v,title:(0,O.jsx)(re,{isActivated:t,inShelf:a,children:f.Ru.get("web-player.feature-activation-shelf.blend.title")}),body:(0,O.jsxs)("div",{className:F,children:[(0,O.jsx)(ie.E,{as:"p",variant:"bodySmall",className:w,children:f.Ru.get("web-player.feature-activation-shelf.blend.description")}),(0,O.jsx)("div",{className:R,children:(0,O.jsx)(ae.n,{size:"small",onClick:v,children:f.Ru.get("web-player.feature-activation-shelf.invite.cta")})})]})})})),de=i(96839);var fe=u.memo((function(e){var t,i,a=e.playlist,n=e.activated,o=e.position,l=e.inShelf,s=e.onFeatureActivate,c=(0,te.Zp)(),v=function(e,t,i,a){var n=(0,T.r)(d.i,{}),r=n.spec,o=n.logger,l=(0,T.r)(ce.d,{}),s=l.spec,c=l.logger;return e?{eventFactory:t?r.shelfContainerFactory().activatedCollaborativePlaylistCardFactory({position:i,uri:a}):r.shelfContainerFactory().collaborativePlaylistCardFactory({position:i,uri:a}),logger:o}:{eventFactory:t?s.activatedCollaborativePlaylistCardFactory({position:i,uri:a}):s.collaborativePlaylistCardFactory({position:i,uri:a}),logger:c}}(l,n,o,null!==(t=null==a||null===(i=a.metadata)||void 0===i?void 0:i.uri)&&void 0!==t?t:""),p=v.eventFactory,h=v.logger;(0,u.useEffect)((function(){a&&h.logImpression(p.impression())}),[a]);var y=function(){if(a){s();var e=(0,de.o_)(a.metadata.uri).toURLPath(!0),t="".concat(e,"?feature-activation=").concat(r.X.CollaborativePlaylists);h.logInteraction(p.hitUiNavigate({destination:t})),c(t)}};return a?(0,O.jsx)(se,{premiumOnlyFeature:!1,activated:n,image:a.metadata.images[0].url,id:"collaborative-playlists-card",onClick:y,title:(0,O.jsx)(re,{isActivated:n,inShelf:l,children:f.Ru.get("web-player.feature-activation-shelf.collaborative-playlists.title",{playlist:a.metadata.name})}),body:(0,O.jsxs)("div",{className:F,children:[(0,O.jsx)(ie.E,{as:"p",variant:"bodySmall",className:w,children:f.Ru.get("web-player.feature-activation-shelf.collaborative-playlists.description")}),(0,O.jsx)("div",{className:R,children:(0,O.jsx)(ae.n,{onClick:y,size:"small",children:f.Ru.get("web-player.feature-activation-shelf.invite.cta")})})]})}):null})),ve=i(1489);var pe=u.memo((function(e){var t=e.activated,i=e.position,a=e.inShelf,n=e.onFeatureActivate,r=(0,W._E)(),o=r.context,l=r.metadata,s=o.triggerPlay,c=o.isPlaying,v=(0,W.FJ)().maybeAddDJToLibrary,p=(0,W._x)()&&l,h=function(e,t,i){var a=(0,T.r)(d.i,{}),n=a.spec,r=a.logger,o=(0,T.r)(ce.d,{}),l=o.spec,s=o.logger;return e?{eventFactory:t?n.shelfContainerFactory().activatedDjCardFactory({position:i}):n.shelfContainerFactory().djCardFactory({position:i}),logger:r}:{eventFactory:t?l.activatedDjCardFactory({position:i}):l.djCardFactory({position:i}),logger:s}}(a,t,i),y=h.eventFactory,g=h.logger;(0,u.useEffect)((function(){p&&g.logImpression(y.impression())}),[p]);var m=function(){n(),g.logInteraction(y.hitPlay({itemToBePlayed:ve.N6})),c||(v(),s())};return p?(0,O.jsx)(se,{activated:t,premiumOnlyFeature:!1,image:l.images[0].url,onClick:m,title:(0,O.jsx)(re,{isActivated:t,inShelf:a,children:f.Ru.get("web-player.feature-activation-shelf.ai-dj.title")}),body:(0,O.jsxs)("div",{className:F,children:[(0,O.jsx)(ie.E,{as:"p",variant:"bodySmall",className:w,children:f.Ru.get("web-player.feature-activation-shelf.ai-dj.description")}),(0,O.jsx)("div",{className:R,children:(0,O.jsx)(ae.n,{size:"small",onClick:m,disabled:c,children:f.Ru.get("web-player.feature-activation-shelf.ai-dj.cta")})})]})}):null})),he=i(27233);var ye=u.memo((function(e){var t=e.inShelf,i=e.activated,a=e.position,n=e.destination,r=e.onFeatureActivate,o=function(e,t,i){var a=(0,T.r)(d.i,{}),n=a.spec,r=a.logger,o=(0,T.r)(ce.d,{}),l=o.spec,s=o.logger;return e?{eventFactory:t?n.shelfContainerFactory().activatedGroupSessionsCardFactory({position:i}):n.shelfContainerFactory().groupSessionsCardFactory({position:i}),logger:r}:{eventFactory:t?l.activatedGroupSessionsCardFactory({position:i}):l.groupSessionsCardFactory({position:i}),logger:s}}(t,i,a),l=o.eventFactory,s=o.logger;(0,u.useEffect)((function(){s.logImpression(l.impression())}),[]);var c=function(){r(),s.logInteraction(l.hitNavigateToExternalUri({destination:n})),window.open(n,"_blank","noopener")};return(0,O.jsx)(se,{activated:i,premiumOnlyFeature:!1,image:(0,ne.b)("images/feature-activation-shelf-group-sessions.png"),onClick:c,title:(0,O.jsx)(re,{isActivated:i,inShelf:t,children:f.Ru.get("web-player.feature-activation-shelf.group-sessions.title")}),body:(0,O.jsxs)("div",{className:F,children:[(0,O.jsx)(ie.E,{as:"p",variant:"bodySmall",className:w,children:f.Ru.get("web-player.feature-activation-shelf.group-sessions.description-general")}),(0,O.jsx)("div",{className:R,children:(0,O.jsx)(ae.n,{size:"small",onClick:c,iconTrailing:he.p,children:f.Ru.get("web-player.feature-activation-shelf.group-sessions.cta")})})]})})}));var ge=u.memo((function(e){var t=e.position,i=e.inShelf,a=e.onFeatureActivate,n=(0,te.Zp)(),o=z(),l=o.isAvailable,s=o.isEnabled,c=o.enableVeryHighQualityAudio,v=function(e,t,i){var a=(0,T.r)(d.i,{}),n=a.spec,r=a.logger,o=(0,T.r)(ce.d,{}),l=o.spec,s=o.logger;return e?{eventFactory:t?n.shelfContainerFactory().activatedAudioQualityCardFactory({position:i}):n.shelfContainerFactory().audioQualityCardFactory({position:i}),logger:r}:{eventFactory:t?l.activatedAudioQualityCardFactory({position:i}):l.audioQualityCardFactory({position:i}),logger:s}}(i,s,t),p=v.eventFactory,h=v.logger;(0,u.useEffect)((function(){l&&h.logImpression(p.impression())}),[]);var y=function(e){a();var t="".concat("/preferences").concat(e?"?".concat(e):"");h.logInteraction(p.hitUiNavigate({destination:t})),n(t)},g=function(){h.logInteraction(p.hitSetSettingField()),c(),y("feature-activation=".concat(r.X.VeryHighQualityAudio))};return l?(0,O.jsx)(se,{activated:s,premiumOnlyFeature:!1,image:(0,ne.b)("images/feature-activation-shelf-audio-quality.png"),id:"audio-quality-card",onClick:s?function(){return y()}:g,title:(0,O.jsx)(re,{isActivated:s,inShelf:i,children:f.Ru.get("web-player.feature-activation-shelf.audio-quality.title")}),body:(0,O.jsxs)("div",{className:F,children:[(0,O.jsx)(ie.E,{as:"p",variant:"bodySmall",className:w,children:f.Ru.get("web-player.feature-activation-shelf.audio-quality.description")}),(0,O.jsx)("div",{className:R,children:(0,O.jsx)(ae.n,{onClick:s?function(){return y()}:g,size:"small",iconLeading:s?oe.i:void 0,children:s?f.Ru.get("web-player.feature-activation-shelf.audio-quality.cta_alt"):f.Ru.get("web-player.feature-activation-shelf.audio-quality.cta")})})]})}):null}));var me="/concerts",Ce=u.memo((function(e){var t=e.activated,i=e.position,a=e.inShelf,n=e.onFeatureActivate,r=(0,te.Zp)(),o=function(e,t,i,a){var n=(0,T.r)(d.i,{}),r=n.spec,o=n.logger,l=(0,T.r)(ce.d,{}),s=l.spec,c=l.logger;return e?{eventFactory:t?r.shelfContainerFactory().activatedLiveEventsCardFactory({position:i,uri:a}):r.shelfContainerFactory().liveEventsCardFactory({position:i,uri:a}),logger:o}:{eventFactory:t?s.activatedLiveEventsCardFactory({position:i,uri:a}):s.liveEventsCardFactory({position:i,uri:a}),logger:c}}(a,t,i,me),l=o.eventFactory,s=o.logger;(0,u.useEffect)((function(){s.logImpression(l.impression())}),[]);var c=function(){n(),s.logInteraction(l.hitUiNavigate({destination:me})),r(me)};return(0,O.jsx)(se,{activated:t,premiumOnlyFeature:!1,image:(0,ne.b)("images/feature-activation-shelf-live-events.png"),id:"live-events-card",onClick:c,title:(0,O.jsx)(re,{isActivated:t,inShelf:a,children:f.Ru.get("web-player.feature-activation-shelf.live-events.title")}),body:(0,O.jsxs)("div",{className:F,children:[(0,O.jsx)(ie.E,{as:"p",variant:"bodySmall",className:w,children:f.Ru.get("web-player.feature-activation-shelf.live-events.description")}),(0,O.jsx)("div",{className:R,children:(0,O.jsx)(ae.n,{onClick:c,size:"small",children:f.Ru.get("web-player.feature-activation-shelf.live-events.cta")})})]})})})),be=i(78591);var je=u.memo((function(e){var t=e.activated,i=e.playlist,a=e.position,n=e.inShelf,o=e.onFeatureActivate,l=(0,be.i)().setSeen,s=(0,te.Zp)(),c=function(e,t,i){var a=(0,T.r)(d.i,{}),n=a.spec,r=a.logger,o=(0,T.r)(ce.d,{}),l=o.spec,s=o.logger;return e?{eventFactory:t?n.shelfContainerFactory().activatedSmartShuffleCardFactory({position:i}):n.shelfContainerFactory().smartShuffleCardFactory({position:i}),logger:r}:{eventFactory:t?l.activatedSmartShuffleCardFactory({position:i}):l.smartShuffleCardFactory({position:i}),logger:s}}(n,t,a),v=c.eventFactory,p=c.logger;(0,u.useEffect)((function(){i&&p.logImpression(v.impression())}),[i]);var h=(0,u.useCallback)((function(){if(i){o(),p.logInteraction(v.hitUiNavigate({destination:i.metadata.uri})),l(!1);var e=(0,de.o_)(i.metadata.uri).toURLPath(!0);s("".concat(e,"?feature-activation=").concat(r.X.SmartShuffle))}}),[s,i,l,p,v,o]);return i?(0,O.jsx)(se,{activated:t,premiumOnlyFeature:!1,image:i.metadata.images[0].url,onClick:h,title:(0,O.jsx)(re,{isActivated:t,inShelf:n,children:f.Ru.get("web-player.feature-activation-shelf.smart-shuffle.title",{playlist:i.metadata.name})}),body:(0,O.jsxs)("div",{className:F,children:[(0,O.jsx)(ie.E,{as:"p",variant:"bodySmall",className:w,children:f.Ru.get("web-player.feature-activation-shelf.smart-shuffle.description")}),(0,O.jsx)("div",{className:R,children:(0,O.jsx)(ae.n,{size:"small",onClick:h,children:f.Ru.get("web-player.feature-activation-shelf.smart-shuffle.cta")})})]})}):null})),Se=i(60429),Ae=i(45100),xe=i(3818),Fe=i(11498);const we="RvSsw_CWBCtHhojt6bY_";var Re=u.memo(u.forwardRef((function(e,t){var i=e.className,a=e.render,n=(0,u.useRef)(null),r=(0,u.useState)({columnCount:-1,columnWidth:-1,gridGap:24}),o=(0,H.A)(r,2),l=o[0],s=o[1];(0,u.useImperativeHandle)(t,(function(){return n.current}));var c=(0,u.useCallback)((function(){var e=n.current;if(e&&e.parentElement){var t=e.parentElement.offsetWidth,i=function(e){return e<700?1:e<1e3?2:3}(t),a=function(e){return 2===e?12:3===e?18:24}(i),r=Math.floor((t-(i-1)*a)/i);s({columnCount:i,columnWidth:r,gridGap:a})}}),[]);(0,Fe.w)({refOrElement:n,observeOnly:"width",onResize:function(){c()}}),(0,u.useLayoutEffect)((function(){c()}),[c]);var d={"--column-count":"".concat(l.columnCount),"--grid-gap":"".concat(l.gridGap,"px")};return(0,O.jsx)("div",{ref:n,className:h()(we,i),style:d,children:a(l)})})));Re.displayName="GridContainer";const Ee="QD8u8vCxcfIpJC14IBqg",Ne="H4yLgZB7CQJlPH3u5Qbi",ke="jNsZ_X7AAz13oxU5Sx0G",Oe="b49pU5FuAfdm6Ub0x7N3";function Ve(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Xe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(i),!0).forEach((function(t){(0,v.A)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ve(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var He=u.memo((function(e){var t=e.title,i=e.children,a=e.seeAllUri,n=e.className,r=void 0===n?"":n,o=e.testId,l=void 0===o?"component":o,s=e.seeAllLabel,c=e.onClickShelfTitle,d=e.onClickShelfSeeAll,f=e.showAll,p=e.elementRef,y=(0,u.useCallback)((function(e){var t=e.columnCount;return(0,O.jsx)(O.Fragment,{children:f?i:Array.isArray(i)&&i.filter((function(e,i){return i<t}))})}),[i,f]);return Array.isArray(i)&&0===i.length?null:(0,O.jsxs)("section",{ref:p,className:h()(r,Ee),"data-testid":"".concat(l,"-shelf"),"aria-label":t,children:[(0,O.jsx)("div",{className:Ne,children:(0,O.jsx)(Ae.U,{title:t,seeAllUri:a,seeAllLabel:s,hasMoreElements:!f,onClickTitle:c,onClickSeeAll:d})}),(0,O.jsx)(Re,{className:h()(ke,(0,v.A)({},Oe,f)),render:y})]})}));He.displayName="BaseShelf";var Pe=function(e){return(0,O.jsx)(Se.s,{onError:function(e){(0,xe.Jy)(e,"Shelf")},children:(0,O.jsx)(He,Xe(Xe({},e),{},{showAll:e.showAll}))})};const Ie=u.memo((function(e){var t=e.features,i=e.localStorageKey,n=(0,T.r)(d.i,{}),o=n.spec,l=n.logger,s=z(),c=s.isAvailable,p=s.isEnabled,h=c&&p,y=(0,W._x)(),g=(0,W.NO)().metadata,m=(0,Y.X)(),C=z().isAvailable,b=(0,u.useMemo)((function(){return function(e,t){var i=e.filter((function(e){return e.feature===r.X.VeryHighQualityAudio})),n=e.filter((function(e){return e.feature!==r.X.VeryHighQualityAudio}));return t?[].concat((0,a.A)(n.filter((function(e){return!e.activated}))),(0,a.A)(n.filter((function(e){return e.activated}))),(0,a.A)(i)):[].concat((0,a.A)(e.filter((function(e){return!e.activated}))),(0,a.A)(e.filter((function(e){return e.activated}))))}(t,h)}),[h,t]),j=Z(2),S=j.playlists,A=j.loading,x=(0,u.useMemo)((function(){return b.filter((function(e){var t=e.feature;return!!(t!==r.X.Dj||y&&g)&&(!!(t!==r.X.SmartShuffle||m&&0!==S.length)&&(t!==r.X.VeryHighQualityAudio||C?t!==r.X.CollaborativePlaylists||0!==S.length:null))}))}),[b,m,C,y,g,S]),F=function(e,t){var i=t||"feature-activation-shelf-v3-interaction-state",a=(0,J.x)(i,{featureInteractionMapping:(0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)({},r.X.VeryHighQualityAudio,!1),r.X.Dj,!1),r.X.SmartShuffle,!1),r.X.Blend,!1),r.X.GroupSessions,!1),r.X.LiveEvents,!1),r.X.CollaborativePlaylists,!1),desktopSessions:0,desktopSessionsSinceFullActivation:0}),n=(0,H.A)(a,2),o=n[0],l=n[1];return(0,u.useEffect)((function(){if(!e){var t=Object.values(o.featureInteractionMapping).reduce((function(e,t){return e&&t}),!0);l($($({},o),{},{desktopSessionsSinceFullActivation:t?o.desktopSessionsSinceFullActivation+1:o.desktopSessionsSinceFullActivation,desktopSessions:o.desktopSessions+1}))}}),[]),{hideShelf:!e&&ee(o),interactionState:o,setFeatureActivation:function(e,t){l($($({},o),{},{featureInteractionMapping:$($({},o.featureInteractionMapping),{},(0,v.A)({},e,t))}))}}}(e.showAll,i),w=F.hideShelf,R=F.setFeatureActivation;(0,u.useEffect)((function(){0!==x.length&&(w?l.logImpression(o.hideShelfImpressionElementFactory().impression()):l.logImpression(o.shelfContainerFactory().impression()))}),[w]);var E=(0,u.useCallback)((function(){l.logInteraction(o.shelfTitleFactory({uri:e.uri}).hitUiNavigate({destination:e.uri}))}),[o,l,e.uri]),N=(0,u.useCallback)((function(){l.logInteraction(o.seeAllFeaturesFactory({uri:e.uri}).hitUiNavigate({destination:e.uri}))}),[o,l,e.uri]);return w||0===x.length?null:(0,O.jsx)(Pe,{title:f.Ru.get("web-player.feature-activation-shelf.generic-title"),seeAllUri:e.uri,showAll:e.showAll,seeAllLabel:f.Ru.get("web-player.feature-activation-shelf.see_more"),onClickShelfTitle:E,onClickShelfSeeAll:N,children:A?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(X,{isLoading:!0}),(0,O.jsx)(X,{isLoading:!0}),(0,O.jsx)(X,{isLoading:!0}),(0,O.jsx)(X,{isLoading:!0}),(0,O.jsx)(X,{isLoading:!0}),(0,O.jsx)(X,{isLoading:!0})]}):x.map((function(t,i){return function(e,t,i,a,n){var o,l,s;switch(e.feature){case r.X.GroupSessions:return(0,O.jsx)(ye,{activated:e.activated,position:t,inShelf:i,destination:e.destination||"",onFeatureActivate:function(){return a(r.X.GroupSessions,!0)}},"feature-activation-shelf-group-sessions");case r.X.CollaborativePlaylists:return(0,O.jsx)(fe,{activated:e.activated,playlist:null!==(o=null!==(l=n[1])&&void 0!==l?l:n[0])&&void 0!==o?o:null,position:t,inShelf:i,onFeatureActivate:function(){return a(r.X.CollaborativePlaylists,!0)}},"feature-activation-shelf-collaborative-playlist");case r.X.Blend:return(0,O.jsx)(ue,{activated:e.activated,position:t,inShelf:i,onFeatureActivate:function(){return a(r.X.Blend,!0)}},"feature-activation-shelf-blend");case r.X.LiveEvents:return(0,O.jsx)(Ce,{activated:e.activated,position:t,inShelf:i,onFeatureActivate:function(){return a(r.X.LiveEvents,!0)}},"feature-activation-shelf-live-events");case r.X.VeryHighQualityAudio:return(0,O.jsx)(ge,{position:t,inShelf:i,onFeatureActivate:function(){return a(r.X.VeryHighQualityAudio,!0)}},"feature-activation-shelf-very-high-quality-audio");case r.X.Dj:return(0,O.jsx)(pe,{activated:e.activated,position:t,inShelf:i,onFeatureActivate:function(){return a(r.X.Dj,!0)}},"feature-activation-shelf-dj");case r.X.SmartShuffle:return(0,O.jsx)(je,{activated:e.activated,playlist:null!==(s=n[0])&&void 0!==s?s:null,position:t,inShelf:i,onFeatureActivate:function(){return a(r.X.SmartShuffle,!0)}},"feature-activation-shelf-smart-shuffle");default:return(0,q.k)(e.feature),null}}(t,i,!e.showAll,R,S)}))})}));var Le=function(e){var t=e.uri,i=e.sectionItems,a=e.showAll,n=void 0!==a&&a,r=e.localStorageKey;return(0,O.jsx)(Ie,{features:c(i),showAll:n,uri:t,localStorageKey:r})}},63617:(e,t,i)=>{i.d(t,{T:()=>r});var a=i(79621),n=i(86070),r=function(e){var t=e.color,i=void 0===t?a.black:t,r=e.height,o=void 0===r?"30":r,l=e.className;return(0,n.jsxs)("svg",{className:l,width:"114",role:"img",height:o,viewBox:"0 0 114 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("title",{id:"spotify-premium-logo-icon",children:"Spotify logo"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37.7835 10.7851C37.7835 10.6921 37.86 10.6156 37.9545 10.6156L40.1039 10.6246C41.8485 10.6246 42.849 11.4421 42.849 12.9076C42.849 14.2486 41.745 15.1501 40.1039 15.1501L37.9545 15.1411C37.86 15.1411 37.7835 15.0646 37.7835 14.9701V10.7851ZM40.296 8.11502L35.232 8.10602C35.1375 8.10602 35.061 8.18252 35.061 8.27552V21.8085C35.061 21.903 35.1375 21.9795 35.232 21.9795H37.614C37.707 21.9795 37.7835 21.903 37.7835 21.8085V17.631L40.026 17.64C43.4175 17.64 45.6105 15.759 45.6105 12.81C45.6105 9.95852 43.524 8.11502 40.296 8.11502Z",fill:i}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M58.4025 13.4759C59.9115 13.4759 60.6195 14.6519 60.7964 15.8174H55.956C56.217 14.3879 57.1605 13.4759 58.4025 13.4759ZM58.4218 11.217C55.4805 11.217 53.262 13.5765 53.262 16.704V16.743C53.262 19.911 55.5375 22.2105 58.6725 22.2105C60.264 22.2105 61.599 21.6705 62.6473 20.604C62.718 20.5305 62.8723 20.355 62.9775 20.2335C63.039 20.163 63.0315 20.058 62.961 19.995L61.5795 18.7695C61.5165 18.714 61.4235 18.714 61.362 18.7695C61.212 18.9075 60.957 19.14 60.93 19.161C60.24 19.7115 59.553 19.953 58.7115 19.953C57.2985 19.953 56.268 19.098 55.98 17.7075H63.4305L63.4485 17.4975C63.4663 17.28 63.4831 17.079 63.4831 16.878C63.4831 14.061 61.9185 11.217 58.4218 11.217Z",fill:i}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.7895 11.217C75.414 11.217 74.289 11.76 73.3575 12.876C72.7245 11.8035 71.6474 11.217 70.296 11.217C68.8529 11.217 67.968 11.9145 67.356 12.645V11.5995C67.356 11.5065 67.2795 11.43 67.1865 11.43H64.8435C64.749 11.43 64.6724 11.5065 64.6724 11.5995V21.8085C64.6724 21.903 64.749 21.9795 64.8435 21.9795H67.1865C67.2795 21.9795 67.356 21.903 67.356 21.8085V16.0665C67.356 14.622 68.1465 13.6875 69.3675 13.6875C70.5719 13.6875 71.2635 14.5275 71.2635 15.99V21.8085C71.2635 21.903 71.34 21.9795 71.433 21.9795H73.776C73.8705 21.9795 73.9469 21.903 73.9469 21.8085V16.047C73.9469 14.5695 74.6985 13.6875 75.9585 13.6875C77.5245 13.6875 77.8529 14.9505 77.8529 16.0095V21.8085C77.8529 21.903 77.9295 21.9795 78.024 21.9795H80.367C80.4615 21.9795 80.5365 21.903 80.5365 21.8085V15.294C80.5365 12.741 79.1355 11.217 76.7895 11.217Z",fill:i}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M93.0376 17.361C93.0376 18.795 92.2021 19.7205 90.9106 19.7205C89.6131 19.7205 88.8991 18.897 88.8991 17.4V11.5995C88.8991 11.5065 88.8226 11.43 88.7279 11.43H86.3849C86.2921 11.43 86.2156 11.5065 86.2156 11.5995V18.096C86.2156 20.622 87.6736 22.191 90.0211 22.191C91.2421 22.191 92.2321 21.7155 93.0376 20.7405V21.8085C93.0376 21.903 93.1141 21.9795 93.2071 21.9795H95.5501C95.6446 21.9795 95.7211 21.903 95.7211 21.8085V11.5995C95.7211 11.5065 95.6446 11.43 95.5501 11.43H93.2071C93.1141 11.43 93.0376 11.5065 93.0376 11.5995V17.361Z",fill:i}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M109.308 11.217C107.934 11.217 106.808 11.76 105.876 12.876C105.243 11.8035 104.166 11.217 102.815 11.217C101.373 11.217 100.487 11.9145 99.876 12.6435V11.5995C99.876 11.5065 99.7995 11.43 99.705 11.43H97.362C97.269 11.43 97.1925 11.5065 97.1925 11.5995V21.8085C97.1925 21.903 97.269 21.9795 97.362 21.9795H99.705C99.7995 21.9795 99.876 21.903 99.876 21.8085V16.0665C99.876 14.622 100.665 13.6875 101.888 13.6875C103.092 13.6875 103.782 14.5275 103.782 15.99V21.8085C103.782 21.903 103.859 21.9795 103.953 21.9795H106.296C106.389 21.9795 106.466 21.903 106.466 21.8085V16.047C106.466 14.5695 107.217 13.6875 108.477 13.6875C110.045 13.6875 110.373 14.9505 110.373 16.0095V21.8085C110.373 21.903 110.45 21.9795 110.543 21.9795H112.886C112.98 21.9795 113.057 21.903 113.057 21.8085V15.294C113.057 12.741 111.656 11.217 109.308 11.217Z",fill:i}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M52.7354 11.232H52.4204C51.0464 11.2425 49.9229 11.919 49.1909 13.167V11.5995C49.1909 11.5065 49.1144 11.43 49.0199 11.43H46.6769C46.5824 11.43 46.5074 11.5065 46.5074 11.5995V21.8085C46.5074 21.903 46.5824 21.9795 46.6769 21.9795H49.0199C49.1144 21.9795 49.1909 21.903 49.1909 21.8085V17.922C49.1909 15.5085 50.3533 14.106 52.3859 14.0565L52.3889 14.055H52.7354C52.8119 14.055 52.8734 13.9935 52.8734 13.9155V11.3715C52.8734 11.295 52.8119 11.232 52.7354 11.232Z",fill:i}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M84.5339 11.4975H82.2195C82.1265 11.4975 82.05 11.574 82.05 11.667V21.768C82.05 21.8625 82.1265 21.9375 82.2195 21.9375H84.5339C84.6285 21.9375 84.7035 21.8625 84.7035 21.768V11.667C84.7035 11.574 84.6285 11.4975 84.5339 11.4975Z",fill:i}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M83.388 6.8985C82.4715 6.8985 81.7275 7.641 81.7275 8.5575C81.7275 9.4755 82.4715 10.2195 83.388 10.2195C84.306 10.2195 85.0485 9.4755 85.0485 8.5575C85.0485 7.641 84.306 6.8985 83.388 6.8985Z",fill:i}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.8725 13.2975C19.038 10.4265 11.0625 10.1625 6.44685 11.5635C5.7045 11.7885 4.9215 11.37 4.6965 10.629C4.4715 9.88648 4.89 9.10348 5.6325 8.87848C10.9305 7.26898 19.7385 7.58098 25.305 10.884C25.9723 11.28 26.19 12.141 25.7955 12.807C25.3995 13.473 24.5385 13.6935 23.8725 13.2975ZM23.715 17.55C23.376 18.1005 22.656 18.273 22.1055 17.9355C18.075 15.4575 11.9279 14.7405 7.15953 16.188C6.54003 16.374 5.88753 16.026 5.70003 15.408C5.51253 14.79 5.86203 14.1375 6.48003 13.95C11.9279 12.297 18.7005 13.098 23.3295 15.9435C23.88 16.281 24.0525 17.001 23.715 17.55ZM21.8789 21.6345C21.609 22.077 21.0345 22.215 20.5935 21.9465C17.0715 19.794 12.6375 19.3065 7.41602 20.5005C6.91352 20.616 6.41102 20.2995 6.29702 19.797C6.18152 19.293 6.49502 18.792 7.00052 18.678C12.714 17.3715 17.6159 17.934 21.5685 20.349C22.0095 20.619 22.149 21.195 21.8789 21.6345ZM15 0C6.7155 0 0 6.7155 0 15C0 23.2845 6.7155 30 15 30C23.2845 30 30 23.2845 30 15C30 6.7155 23.2845 0 15 0Z",fill:i})]})}}}]);
=======
"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9792],{34807:(e,t,a)=>{a.d(t,{FeatureActivationSection:()=>xe});a(46758),a(53321),a(86277);var i=a(50959),n=a(54995),s=a(85648),l=a(82187),o=a.n(l),r=a(16601),c=a(56839),u=a(22739);const d="NTywvDEuW1PlcoR__9XV",f="BkQ1MPUWBY0WvjENXmC7",v="hwhquP1FOxRcCnf84P2M",g="MIBwSRJ5XZaCw1WWXXBn",h="dEuzpK3s_BmlRiVNFude",y="IeJGaG6QXRvfMka0gCSG",m="Wh0HGq_CXEX_JqbSYvx7",p="MVRnUhNC4ZMglLR56YMn",b="jjQUaCx5rvU20rWBzyLA",C="ES02HhKmADP_AdcKPs1e",F="IYwEYGRUJ5RTtr0EyBV1",S="YYlv5PB5fGQthi9XzTQg";var x=a(11527);const j=i.memo((({isLoading:e})=>{const t=(0,u.h)("shimmer");return(0,x.jsx)("div",{ref:t,className:o()(d,{[S]:e})})})),A=i.memo((({cardImage:e,isLoading:t})=>(0,x.jsx)(r.w,{className:v,media:e||(0,x.jsx)(j,{isLoading:t}),id:"feature-skeleton-card-id",title:(0,x.jsx)(c.C,{as:"div",variant:"bodyMediumBold",className:C,charCount:10,isLoading:t}),body:(0,x.jsx)(c.C,{as:"div",variant:"bodySmall",className:F,charCount:15,isLoading:t}),layout:"wide",size:"xl",variant:"elevated"})));var L=a(1740),w=a(24241),N=a(59374);const E={offset:0,limit:50,flatten:!0,sort:{field:N.bD.RELEVANCE,order:N.As.DESC}};function k(e){const t=(0,w.o)(),a=(0,i.useContext)(L.ZF),n=(0,i.useMemo)((()=>function(e){return async function(t){if(null===t)return null;try{const a=await e.getPlaylist(t.uri);return a?.metadata.hasSpotifyTracks?a:null}catch(e){return null}}}(a)),[a]),[s,l]=(0,i.useState)([]),[o,r]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null);return(0,i.useEffect)((()=>{r(!0),t.getContents(E).then((t=>function({items:e},t){return e.filter(N.no).filter((e=>e.isOwnedBySelf&&e.totalLength>0)).slice(0,t)}(t,e))).then((e=>Promise.all(e.map(n)))).then((e=>e.filter((e=>null!==e)))).then((e=>l(e))).catch(u).finally((()=>r(!1)))}),[t,n,e]),{loading:o,playlists:s,error:c}}var I=a(73895);const U={collaborativePlaylists:I.L.CollaborativePlaylists,liveEvents:I.L.LiveEvents,groupSessions:I.L.GroupSessions,veryHighQualityAudio:I.L.VeryHighQualityAudio,blend:I.L.Blend,smartShuffle:I.L.SmartShuffle,dj:I.L.Dj};function P(e){const t=[];for(const n of e)if("object"==typeof(i=n)&&null!==i&&"data"in i&&"object"==typeof i.data&&null!==i.data&&"name"in i.data){const e=null===(a=n.data.name)?null:U[a]??null;if(null===e)continue;t.push({feature:e,activated:n.data.activated,image:n.data.image,title:n.data.title,uri:n.data.uri,name:n.data.name,destination:n.data.destination})}var a,i;return t}var Q=a(49815),H=a(27845),B=a(74950);const G=()=>{const e=(0,H.r)(),[{data:t},{mutate:a}]=(0,B.t)(e.quality.streamingQuality),[{data:i}]=(0,B.t)(e.quality.maxSupportedQuality);if(void 0===t||void 0===i)return{isAvailable:!1,isEnabled:!1,enableVeryHighQualityAudio:()=>{}};return{isAvailable:i>=Q.hF.VERY_HIGH,isEnabled:t===Q.IL.VERY_HIGH,enableVeryHighQualityAudio:()=>{a(Q.IL.VERY_HIGH)}}};var R=a(67577),_=a(80626),V=a(70526),M=a(75802),z=a(69736),O=a(6370),q=a(65376);const D=({children:e,isActivated:t,inShelf:a})=>(0,x.jsx)(z.x,{as:"p",variant:"bodyMediumBold",className:o()(h,{[y]:!a}),style:{paddingInlineEnd:t?"18px":"initial"},children:e});var T=a(6487),W=a(82350);const Y=i.memo((function({image:e,onClick:t,id:a,title:i,body:n,footer:s,activated:l,premiumOnlyFeature:o}){return(0,x.jsx)(r.w,{className:v,media:e,id:a||"",title:i,body:n,layout:"wide",size:"xl",pretitle:(0,x.jsxs)(x.Fragment,{children:[o&&(0,x.jsx)(W.D,{color: getComputedStyle(document.body).getPropertyValue("--spice-text").trim(),height:"18",className:g}),l&&(0,x.jsx)(T.N,{size:"small",className:f})]}),variant:"elevated",footer:s,onClick:t})}));var X=a(75550);const $=i.memo((function({activated:e,position:t,inShelf:a,onFeatureActivate:l}){const o=(0,M.s0)(),r="/blend/invitation",{eventFactory:c,logger:u}=function(e,t,a,i){const{spec:s,logger:l}=(0,_.fU)(n.i,{}),{spec:o,logger:r}=(0,_.fU)(X.e,{});return e?{eventFactory:t?s.shelfContainerFactory().activatedBlendCardFactory({position:a,uri:i}):s.shelfContainerFactory().blendCardFactory({position:a,uri:i}),logger:l}:{eventFactory:t?o.activatedBlendCardFactory({position:a,uri:i}):o.blendCardFactory({position:a,uri:i}),logger:r}}(a,e,t,r);(0,i.useEffect)((()=>{u.logImpression(c.impression())}),[]);const d=()=>{l(),u.logInteraction(c.hitUiNavigate({destination:r})),o(r)};return(0,x.jsx)(Y,{activated:e,premiumOnlyFeature:!1,image:(0,q.g)("images/feature-activation-shelf-blend.png"),onClick:d,title:(0,x.jsx)(D,{isActivated:e,inShelf:a,children:s.ag.get("web-player.feature-activation-shelf.blend.title")}),body:(0,x.jsxs)("div",{className:m,children:[(0,x.jsx)(z.x,{as:"p",variant:"bodySmall",className:p,children:s.ag.get("web-player.feature-activation-shelf.blend.description")}),(0,x.jsx)("div",{className:b,children:(0,x.jsx)(O.P,{size:"small",onClick:d,children:s.ag.get("web-player.feature-activation-shelf.invite.cta")})})]})})}));var J=a(11317);const K=i.memo((function({playlist:e,activated:t,position:a,inShelf:l,onFeatureActivate:o}){const r=(0,M.s0)(),{eventFactory:c,logger:u}=function(e,t,a,i){const{spec:s,logger:l}=(0,_.fU)(n.i,{}),{spec:o,logger:r}=(0,_.fU)(X.e,{});return e?{eventFactory:t?s.shelfContainerFactory().activatedCollaborativePlaylistCardFactory({position:a,uri:i}):s.shelfContainerFactory().collaborativePlaylistCardFactory({position:a,uri:i}),logger:l}:{eventFactory:t?o.activatedCollaborativePlaylistCardFactory({position:a,uri:i}):o.collaborativePlaylistCardFactory({position:a,uri:i}),logger:r}}(l,t,a,e?.metadata?.uri??"");(0,i.useEffect)((()=>{e&&u.logImpression(c.impression())}),[e]);const d=()=>{if(!e)return;o();const t=`${(0,J.EC)(e.metadata.uri).toURLPath(!0)}?feature-activation=${I.L.CollaborativePlaylists}`;u.logInteraction(c.hitUiNavigate({destination:t})),r(t)};return e?(0,x.jsx)(Y,{premiumOnlyFeature:!1,activated:t,image:e.metadata.images[0].url,id:"collaborative-playlists-card",onClick:d,title:(0,x.jsx)(D,{isActivated:t,inShelf:l,children:s.ag.get("web-player.feature-activation-shelf.collaborative-playlists.title",{playlist:e.metadata.name})}),body:(0,x.jsxs)("div",{className:m,children:[(0,x.jsx)(z.x,{as:"p",variant:"bodySmall",className:p,children:s.ag.get("web-player.feature-activation-shelf.collaborative-playlists.description")}),(0,x.jsx)("div",{className:b,children:(0,x.jsx)(O.P,{onClick:d,size:"small",children:s.ag.get("web-player.feature-activation-shelf.invite.cta")})})]})}):null}));const Z=i.memo((function({activated:e,position:t,inShelf:a,onFeatureActivate:l}){const{triggerPlay:o,isPlaying:r}=(0,R.O6)(),{maybeAddDJToLibrary:c}=(0,R.Zk)(),u=(0,R._n)(),{metadata:d}=(0,R.O9)(),f=u&&!!d,{eventFactory:v,logger:g}=function(e,t,a){const{spec:i,logger:s}=(0,_.fU)(n.i,{}),{spec:l,logger:o}=(0,_.fU)(X.e,{});return e?{eventFactory:t?i.shelfContainerFactory().activatedDjCardFactory({position:a}):i.shelfContainerFactory().djCardFactory({position:a}),logger:s}:{eventFactory:t?l.activatedDjCardFactory({position:a}):l.djCardFactory({position:a}),logger:o}}(a,e,t);(0,i.useEffect)((()=>{f&&g.logImpression(v.impression())}),[f]);const h=()=>{l(),g.logInteraction(v.hitPlay({itemToBePlayed:R.rv})),r||(c(),o())};return f?(0,x.jsx)(Y,{activated:e,premiumOnlyFeature:!1,image:d.images[0].url,onClick:h,title:(0,x.jsx)(D,{isActivated:e,inShelf:a,children:s.ag.get("web-player.feature-activation-shelf.ai-dj.title")}),body:(0,x.jsxs)("div",{className:m,children:[(0,x.jsx)(z.x,{as:"p",variant:"bodySmall",className:p,children:s.ag.get("web-player.feature-activation-shelf.ai-dj.description")}),(0,x.jsx)("div",{className:b,children:(0,x.jsx)(O.P,{size:"small",onClick:h,disabled:r,children:s.ag.get("web-player.feature-activation-shelf.ai-dj.cta")})})]})}):null}));var ee=a(77725);const te=i.memo((function({inShelf:e,activated:t,position:a,destination:l,onFeatureActivate:o}){const{eventFactory:r,logger:c}=function(e,t,a){const{spec:i,logger:s}=(0,_.fU)(n.i,{}),{spec:l,logger:o}=(0,_.fU)(X.e,{});return e?{eventFactory:t?i.shelfContainerFactory().activatedGroupSessionsCardFactory({position:a}):i.shelfContainerFactory().groupSessionsCardFactory({position:a}),logger:s}:{eventFactory:t?l.activatedGroupSessionsCardFactory({position:a}):l.groupSessionsCardFactory({position:a}),logger:o}}(e,t,a);(0,i.useEffect)((()=>{c.logImpression(r.impression())}),[]);const u=()=>{o(),c.logInteraction(r.hitNavigateToExternalUri({destination:l})),window.open(l,"_blank","noopener")};return(0,x.jsx)(Y,{activated:t,premiumOnlyFeature:!1,image:(0,q.g)("images/feature-activation-shelf-group-sessions.png"),onClick:u,title:(0,x.jsx)(D,{isActivated:t,inShelf:e,children:s.ag.get("web-player.feature-activation-shelf.group-sessions.title")}),body:(0,x.jsxs)("div",{className:m,children:[(0,x.jsx)(z.x,{as:"p",variant:"bodySmall",className:p,children:s.ag.get("web-player.feature-activation-shelf.group-sessions.description-general")}),(0,x.jsx)("div",{className:b,children:(0,x.jsx)(O.P,{size:"small",onClick:u,iconTrailing:ee.h,children:s.ag.get("web-player.feature-activation-shelf.group-sessions.cta")})})]})})}));const ae=i.memo((function({position:e,inShelf:t,onFeatureActivate:a}){const l=(0,M.s0)(),{isAvailable:o,isEnabled:r,enableVeryHighQualityAudio:c}=G(),{eventFactory:u,logger:d}=function(e,t,a){const{spec:i,logger:s}=(0,_.fU)(n.i,{}),{spec:l,logger:o}=(0,_.fU)(X.e,{});return e?{eventFactory:t?i.shelfContainerFactory().activatedAudioQualityCardFactory({position:a}):i.shelfContainerFactory().audioQualityCardFactory({position:a}),logger:s}:{eventFactory:t?l.activatedAudioQualityCardFactory({position:a}):l.audioQualityCardFactory({position:a}),logger:o}}(t,r,e);(0,i.useEffect)((()=>{o&&d.logImpression(u.impression())}),[]);const f=e=>{a();const t="/preferences"+(e?`?${e}`:"");d.logInteraction(u.hitUiNavigate({destination:t})),l(t)},v=()=>{d.logInteraction(u.hitSetSettingField()),c(),f(`feature-activation=${I.L.VeryHighQualityAudio}`)};return o?(0,x.jsx)(Y,{activated:r,premiumOnlyFeature:!1,image:(0,q.g)("images/feature-activation-shelf-audio-quality.png"),id:"audio-quality-card",onClick:r?()=>f():v,title:(0,x.jsx)(D,{isActivated:r,inShelf:t,children:s.ag.get("web-player.feature-activation-shelf.audio-quality.title")}),body:(0,x.jsxs)("div",{className:m,children:[(0,x.jsx)(z.x,{as:"p",variant:"bodySmall",className:p,children:s.ag.get("web-player.feature-activation-shelf.audio-quality.description")}),(0,x.jsx)("div",{className:b,children:(0,x.jsx)(O.P,{onClick:r?()=>f():v,size:"small",iconLeading:r?T.N:void 0,children:r?s.ag.get("web-player.feature-activation-shelf.audio-quality.cta_alt"):s.ag.get("web-player.feature-activation-shelf.audio-quality.cta")})})]})}):null}));const ie="/concerts",ne=i.memo((function({activated:e,position:t,inShelf:a,onFeatureActivate:l}){const o=(0,M.s0)(),{eventFactory:r,logger:c}=function(e,t,a,i){const{spec:s,logger:l}=(0,_.fU)(n.i,{}),{spec:o,logger:r}=(0,_.fU)(X.e,{});return e?{eventFactory:t?s.shelfContainerFactory().activatedLiveEventsCardFactory({position:a,uri:i}):s.shelfContainerFactory().liveEventsCardFactory({position:a,uri:i}),logger:l}:{eventFactory:t?o.activatedLiveEventsCardFactory({position:a,uri:i}):o.liveEventsCardFactory({position:a,uri:i}),logger:r}}(a,e,t,ie);(0,i.useEffect)((()=>{c.logImpression(r.impression())}),[]);const u=()=>{l(),c.logInteraction(r.hitUiNavigate({destination:ie})),o(ie)};return(0,x.jsx)(Y,{activated:e,premiumOnlyFeature:!1,image:(0,q.g)("images/feature-activation-shelf-live-events.png"),id:"live-events-card",onClick:u,title:(0,x.jsx)(D,{isActivated:e,inShelf:a,children:s.ag.get("web-player.feature-activation-shelf.live-events.title")}),body:(0,x.jsxs)("div",{className:m,children:[(0,x.jsx)(z.x,{as:"p",variant:"bodySmall",className:p,children:s.ag.get("web-player.feature-activation-shelf.live-events.description")}),(0,x.jsx)("div",{className:b,children:(0,x.jsx)(O.P,{onClick:u,size:"small",children:s.ag.get("web-player.feature-activation-shelf.live-events.cta")})})]})})}));var se=a(30753);const le=i.memo((function({activated:e,playlist:t,position:a,inShelf:l,onFeatureActivate:o}){const{setSeen:r}=(0,se.q)(),c=(0,M.s0)(),{eventFactory:u,logger:d}=function(e,t,a){const{spec:i,logger:s}=(0,_.fU)(n.i,{}),{spec:l,logger:o}=(0,_.fU)(X.e,{});return e?{eventFactory:t?i.shelfContainerFactory().activatedSmartShuffleCardFactory({position:a}):i.shelfContainerFactory().smartShuffleCardFactory({position:a}),logger:s}:{eventFactory:t?l.activatedSmartShuffleCardFactory({position:a}):l.smartShuffleCardFactory({position:a}),logger:o}}(l,e,a);(0,i.useEffect)((()=>{t&&d.logImpression(u.impression())}),[t]);const f=(0,i.useCallback)((()=>{if(!t)return;o(),d.logInteraction(u.hitUiNavigate({destination:t.metadata.uri})),r(!1);const e=(0,J.EC)(t.metadata.uri).toURLPath(!0);c(`${e}?feature-activation=${I.L.SmartShuffle}`)}),[c,t,r,d,u,o]);return t?(0,x.jsx)(Y,{activated:e,premiumOnlyFeature:!1,image:t.metadata.images[0].url,onClick:f,title:(0,x.jsx)(D,{isActivated:e,inShelf:l,children:s.ag.get("web-player.feature-activation-shelf.smart-shuffle.title",{playlist:t.metadata.name})}),body:(0,x.jsxs)("div",{className:m,children:[(0,x.jsx)(z.x,{as:"p",variant:"bodySmall",className:p,children:s.ag.get("web-player.feature-activation-shelf.smart-shuffle.description")}),(0,x.jsx)("div",{className:b,children:(0,x.jsx)(O.P,{size:"small",onClick:f,children:s.ag.get("web-player.feature-activation-shelf.smart-shuffle.cta")})})]})}):null}));var oe=a(5629),re=a(53502),ce=a(46974),ue=a(76981);const de="RvSsw_CWBCtHhojt6bY_",fe=i.memo(i.forwardRef((function(e,t){const{className:a,render:n}=e,s=(0,i.useRef)(null),[l,r]=(0,i.useState)({columnCount:-1,columnWidth:-1,gridGap:24});(0,i.useImperativeHandle)(t,(()=>s.current));const c=(0,i.useCallback)((()=>{const e=s.current;if(!e||!e.parentElement)return;const t=e.parentElement.offsetWidth,a=(e=>e<700?1:e<1e3?2:3)(t),i=(e=>2===e?12:3===e?18:24)(a),n=Math.floor((t-(a-1)*i)/a);r({columnCount:a,columnWidth:n,gridGap:i})}),[]);(0,ue.y)({refOrElement:s,observeOnly:"width",onResize:()=>{c()}}),(0,i.useLayoutEffect)((()=>{c()}),[c]);const u={"--column-width":`${l.columnWidth}px`,"--column-count":`${l.columnCount}`,"--grid-gap":`${l.gridGap}px`};return(0,x.jsx)("div",{ref:s,className:o()(de,a),style:u,children:n(l)})})));fe.displayName="GridContainer";const ve="QD8u8vCxcfIpJC14IBqg",ge="H4yLgZB7CQJlPH3u5Qbi",he="jNsZ_X7AAz13oxU5Sx0G",ye="b49pU5FuAfdm6Ub0x7N3",me=i.memo((function({title:e,children:t,seeAllUri:a,className:n="",testId:s="component",seeAllLabel:l,onClickShelfTitle:r,onClickShelfSeeAll:c,showAll:u,elementRef:d}){const f=(0,i.useCallback)((({columnCount:e})=>(0,x.jsx)(x.Fragment,{children:u?t:Array.isArray(t)&&t.filter(((t,a)=>a<e))})),[t,u]);return Array.isArray(t)&&0===t.length?null:(0,x.jsxs)("section",{ref:d,className:o()(n,ve),"data-testid":`${s}-shelf`,"aria-label":e,children:[(0,x.jsx)("div",{className:ge,children:(0,x.jsx)(re.r,{title:e,seeAllUri:a,seeAllLabel:l,hasMoreElements:!u,onClickTitle:r,onClickSeeAll:c})}),(0,x.jsx)(fe,{className:o()(he,{[ye]:u}),render:f})]})}));me.displayName="BaseShelf";const pe=e=>(0,x.jsx)(oe.L,{onError:e=>{(0,ce.vK)(e,"Shelf")},children:(0,x.jsx)(me,{...e,showAll:e.showAll})});var be=a(72417),Ce=(a(2836),a(65786));const Fe=e=>e.desktopSessionsSinceFullActivation>=2||e.desktopSessions>=20;const Se=i.memo((function(e){const{features:t,localStorageKey:a}=e,{spec:l,logger:o}=(0,_.fU)(n.i,{}),{isAvailable:r,isEnabled:c}=G(),u=r&&c,d=(0,R._n)(),{metadata:f}=(0,R.O9)(),v=(0,be.Q)(),{isAvailable:g}=G(),h=(0,i.useMemo)((()=>function(e,t){const a=e.filter((e=>e.feature===I.L.VeryHighQualityAudio)),i=e.filter((e=>e.feature!==I.L.VeryHighQualityAudio));return t?[...i.filter((e=>!e.activated)),...i.filter((e=>e.activated)),...a]:[...e.filter((e=>!e.activated)),...e.filter((e=>e.activated))]}(t,u)),[u,t]),{playlists:y,loading:m}=k(2),p=(0,i.useMemo)((()=>h.filter((({feature:e})=>!!(e!==I.L.Dj||d&&f)&&(!!(e!==I.L.SmartShuffle||v&&0!==y.length)&&(e!==I.L.VeryHighQualityAudio||g?e!==I.L.CollaborativePlaylists||0!==y.length:null))))),[h,v,g,d,f,y]),{hideShelf:b,setFeatureActivation:C}=function(e,t){const a=t||"feature-activation-shelf-v3-interaction-state",[n,s]=(0,Ce.z)(a,{featureInteractionMapping:{[I.L.VeryHighQualityAudio]:!1,[I.L.Dj]:!1,[I.L.SmartShuffle]:!1,[I.L.Blend]:!1,[I.L.GroupSessions]:!1,[I.L.LiveEvents]:!1,[I.L.CollaborativePlaylists]:!1},desktopSessions:0,desktopSessionsSinceFullActivation:0});return(0,i.useEffect)((()=>{if(e)return;const t=Object.values(n.featureInteractionMapping).reduce(((e,t)=>e&&t),!0);s({...n,desktopSessionsSinceFullActivation:t?n.desktopSessionsSinceFullActivation+1:n.desktopSessionsSinceFullActivation,desktopSessions:n.desktopSessions+1})}),[]),{hideShelf:!e&&Fe(n),interactionState:n,setFeatureActivation:(e,t)=>{s({...n,featureInteractionMapping:{...n.featureInteractionMapping,[e]:t}})}}}(e.showAll,a);(0,i.useEffect)((()=>{0!==p.length&&(b?o.logImpression(l.hideShelfImpressionElementFactory().impression()):o.logImpression(l.shelfContainerFactory().impression()))}),[b]);const F=(0,i.useCallback)((()=>{o.logInteraction(l.shelfTitleFactory({uri:e.uri}).hitUiNavigate({destination:e.uri}))}),[l,o,e.uri]),S=(0,i.useCallback)((()=>{o.logInteraction(l.seeAllFeaturesFactory({uri:e.uri}).hitUiNavigate({destination:e.uri}))}),[l,o,e.uri]);return b||0===p.length?null:(0,x.jsx)(pe,{title:s.ag.get("web-player.feature-activation-shelf.generic-title"),seeAllUri:e.uri,showAll:e.showAll,seeAllLabel:s.ag.get("web-player.feature-activation-shelf.see_more"),onClickShelfTitle:F,onClickShelfSeeAll:S,children:m?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(A,{isLoading:!0}),(0,x.jsx)(A,{isLoading:!0}),(0,x.jsx)(A,{isLoading:!0}),(0,x.jsx)(A,{isLoading:!0}),(0,x.jsx)(A,{isLoading:!0}),(0,x.jsx)(A,{isLoading:!0})]}):p.map(((t,a)=>((e,t,a,i,n)=>{switch(e.feature){case I.L.GroupSessions:return(0,x.jsx)(te,{activated:e.activated,position:t,inShelf:a,destination:e.destination||"",onFeatureActivate:()=>i(I.L.GroupSessions,!0)},"feature-activation-shelf-group-sessions");case I.L.CollaborativePlaylists:return(0,x.jsx)(K,{activated:e.activated,playlist:n[1]??n[0]??null,position:t,inShelf:a,onFeatureActivate:()=>i(I.L.CollaborativePlaylists,!0)},"feature-activation-shelf-collaborative-playlist");case I.L.Blend:return(0,x.jsx)($,{activated:e.activated,position:t,inShelf:a,onFeatureActivate:()=>i(I.L.Blend,!0)},"feature-activation-shelf-blend");case I.L.LiveEvents:return(0,x.jsx)(ne,{activated:e.activated,position:t,inShelf:a,onFeatureActivate:()=>i(I.L.LiveEvents,!0)},"feature-activation-shelf-live-events");case I.L.VeryHighQualityAudio:return(0,x.jsx)(ae,{position:t,inShelf:a,onFeatureActivate:()=>i(I.L.VeryHighQualityAudio,!0)},"feature-activation-shelf-very-high-quality-audio");case I.L.Dj:return(0,x.jsx)(Z,{activated:e.activated,position:t,inShelf:a,onFeatureActivate:()=>i(I.L.Dj,!0)},"feature-activation-shelf-dj");case I.L.SmartShuffle:return(0,x.jsx)(le,{activated:e.activated,playlist:n[0]??null,position:t,inShelf:a,onFeatureActivate:()=>i(I.L.SmartShuffle,!0)},"feature-activation-shelf-smart-shuffle");default:return(0,V._)(e.feature),null}})(t,a,!e.showAll,C,y)))})})),xe=({uri:e,sectionItems:t,showAll:a=!1,localStorageKey:i})=>(0,x.jsx)(Se,{features:P(t),showAll:a,uri:e,localStorageKey:i})}}]);
>>>>>>> origin/master
//# sourceMappingURL=xpui-feature-activation.js.map