<<<<<<< HEAD
"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5962],{32238:(e,a,r)=>{r.r(a),r.d(a,{default:()=>oa});var n=r(66569),i=(r(59208),r(9555),r(80710),r(45191),r(23833),r(83603),r(20767),r(45803),r(80766),r(10866),r(43864),r(18535),r(41681),r(62980),r(14053),r(22711),r(11034),r(36389),r(82399),r(12771),r(75231),r(21977),r(26980),r(76133),r(46825),r(77020),r(45935),r(60726),r(82765),r(13312),r(30758)),t=r(41978),l=r(33165),s=r(58184),o=r(33666),c=r(11137),u=r(17635),d=r(74801),m=r(8539),g=r(63296),h=r(11207),b=r(91446),p=r(95477),x=r(2052),f=r(9818),j=r(63259),y=r(63915),v=r(86070),k=function(e){var a=e.message,r=e.spec,n=e.logger,i=e.className,t=(0,y.i)(r,n),l=t.onUpgradeClick,s=t.type;return(0,j.V)()?null:(0,v.jsx)(h.v,{id:"catalogue-restricted-banner",className:i,variant:"tinted",leading:(0,v.jsx)(b.N,{}),title:a,trailing:(0,v.jsx)(p.$,{size:"small",onClick:l,iconOnly:"external"===s?x.H:f.h,"aria-label":m.Ru.get("upgrade.tooltip.title"),title:m.Ru.get("upgrade.tooltip.title")})})},C=r(58295),w=r(87349),P=r(16493),A=r(82342),R=r(64741),M=r(79851),O=r(57528),N=r(83834),U=r(83875),S=r(42495),I=r(67281),L=r(42344),D=new I.l("queryAlbumMerch","query","7b258651f4a220aeab4a0573edbd5cf7edd0acfa4d35de2f18b72235e3300ac4",null),F=r(70305),B=r(82571),z=function(e){var a,r,n,i=e.albumName,t=e.albumURI,l=(r={uri:t},n={gcTime:5*L.i},(0,L.I)(D,r,n)).data,s=null!=l&&l.albumUnion&&"merch"in l.albumUnion?null==l||null===(a=l.albumUnion)||void 0===a||null===(a=a.merch)||void 0===a?void 0:a.items:[];return s&&(null==s?void 0:s.length)>0?(0,v.jsx)("div",{className:"contentSpacing",children:(0,v.jsx)("div",{className:B.A.albumMerch,children:(0,v.jsx)(F.q,{id:i,uri:t,merchItems:s,merchVariant:"Album page merch items"})})}):null},T=r(85848),_=r(56501),E=r(96331),V=r(5125),J=r(76180),K=r(544),W=r(60093),q=r(82837),H=r(58400),X=r(50826),Z=r(18520),G=r(51414),Y=r(66932),Q=r(7138),$=r(50629),ee=r(74460),ae=r(42931),re=r(23989),ne=r(46600),ie=r(68688),te=r(73005),le=r(16743),se=r(67939),oe=r(59943);const ce="bhvAemcPYUmxOdBe1mVi",ue="hmgHdasWrZaA9tiXVw_u",de="RmbxUFLb4j9KmgftJyk1",me="boNCdFnbh9y0PBweIDUt",ge="LfQtKa295FPgk8VuZRfD",he="Oytey9nANMtSDKSmZpJ6";var be=i.memo((function(e){var a=e.images,r=e.title,n=e.isOpen,t=e.onClose,l=(0,i.useMemo)((function(){return(0,oe.g)(a,{desiredSize:1e4})}),[a]);return l?(0,v.jsx)(le.A,{className:ce,isOpen:n,onRequestClose:t,animation:{modal:{base:me,afterOpen:ge,beforeClose:he}},animated:!0,children:(0,v.jsxs)("div",{style:{"--image-width":"".concat(l.width,"px"),"--image-height":"".concat(l.height,"px")},className:ue,children:[(0,v.jsx)(se._,{loading:"eager",alt:r,src:l.url,className:de}),(0,v.jsx)(te.H,{onClick:t,semanticColor:"textBase",children:m.Ru.get("web-player.cover-art-modal.close")})]})}):null})),pe=r(98866),xe=r(58076),fe=r(9168),je=r(78610),ye=r(29969),ve=r(52618),ke=r.n(ve),Ce=r(93239),we=r(30023),Pe=r(4414),Ae=r(55937),Re=r(63994),Me=r(10644),Oe=r(2262),Ne=r(10139),Ue=r(93655),Se=r(64932),Ie=r(10539),Le=r(45782),De=r(48045),Fe=r(44671),Be=r(68262),ze=r(90577),Te=r(23572),_e=r(1900),Ee=r(79278),Ve=r(44690);const Je="m2grVeuHNwfGLVpaSBle",Ke="GLKjAw6oM_egXztVxKKB",We="MGZ4oJmGVPrWsx5cT5hN",qe="DmrVJc9vWCbjU_DuRvfe",He="yLmA5f7x65en2MdKbIhX",Xe="F5J4ctyBbgSfS6qkFH5c";var Ze=i.memo((function(e){var a,r=e.uri,n=e.togglePlay,t=e.isPlaying,l=e.isActive,s=e.spec,o=e.logger,c=e.backgroundColor,u=e.name,d=e.artists,g=e.isPlayable,h=e.sharingInfo,b=(0,Be.W)(),p=(0,ze.n)(),x=(0,Ae.t)(),f=(0,i.useMemo)((function(){return s.actionBarFactory()}),[s]),j=(0,Re.A)(r),y=(0,pe.A)(j,2),k=y[0],C=y[1],w=(0,i.useCallback)((function(){var e=(0,Te.$I)({isPlaying:t,isActive:l,spec:f.playButtonFactory(),logger:o,uri:r});n({loggingParams:e})}),[t,l,n,f,o,r]),A=(0,i.useCallback)((0,ye.A)(ke().mark((function e(){var a,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.saveButtonFactory(),a=k?n.hitDislike({itemToBeDisliked:r}):n.hitLike({itemToBeLiked:r}),o.logInteraction(a),b({targetUri:r,intent:k?"unsave":"save",type:"click"}),e.prev=4,e.next=7,C(!k);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:case"end":return e.stop()}}),e,null,[[4,9]])}))),[b,r,k,C,f,o]),R=(0,Ve.X)(),M=(0,Fe.j)();return(0,v.jsx)(Ne.E,{backgroundColor:c,children:(0,v.jsxs)(Ue.S,{children:[(0,v.jsx)(N.D,{onClick:w,disabled:!g,isPlaying:t,size:M,uri:r}),R&&(0,v.jsx)(Me.r,{spec:f,children:(0,v.jsx)(Ee.Y,{entityName:u,contextUri:r,activationPlacement:"bottomEnd",size:M})}),(0,v.jsx)(De.h,{uri:r,action:_e.no.SAVE_ALBUM,children:(0,v.jsx)(Se.M,{isAdded:!!k,onClick:A,disabled:!(p||null!=x&&x.getCapabilities().canModifyOffline),size:M})}),(0,v.jsx)(Ie.f,{uri:r,isFollowing:!!k,onClick:function(e,a){return(0,Te.Qv)(a,f.downloadButtonFactory(),o,r)},onFollow:A,size:M}),(0,v.jsx)(Ce.b,{onShow:function(){return(0,Te.R2)(f,o)},menu:(0,v.jsx)(P.h,{uri:r,artistUri:null==d||null===(a=d[0])||void 0===a?void 0:a.uri,sharingInfo:h}),children:(0,v.jsx)(Le.e,{label:m.Ru.get("more.label.context",u),size:M})}),(0,v.jsx)("div",{className:He,children:(0,v.jsx)(we.u,{property:Oe.mA,renderNewExperience:function(){return(0,v.jsx)(Pe.g,{options:[],onSelect:function(){},selected:null,enableViewModeMenu:!0})}})})]})})})),Ge=r(3300),Ye=r(96839),Qe=r(25931),$e=r(86461),ea=function(e){var a=e.releases;return(0,v.jsx)(Qe.W,{children:a.map((function(e){return(0,v.jsx)($e.D,{role:"menuitem",to:(0,Ye.o_)(e.uri).toURLPath(!0),children:e.name},e.uri)}))})},aa=(r(20427),864e5),ra=365.25*aa;function na(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,n)}return r}function ia(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?na(Object(r),!0).forEach((function(a){(0,n.A)(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}var ta=i.lazy((function(){return r.e(935).then(r.bind(r,50935))}));function la(e){switch(e){case fe._.Single:return m.Ru.get("single");case fe._.Ep:return m.Ru.get("ep");case fe._.Compilation:return m.Ru.get("compilation");case fe._.Audiobook:return m.Ru.get("card.tag.audiobook");case fe._.Album:default:return m.Ru.get("album")}}var sa=function(e){var a,r,n,h,b,p,x,f,j,y,O=e.uri,I=e.album,L=(0,l.zy)(),D=(0,H.r)(d.E,{data:{uri:O}}),F=D.spec,B=D.logger,J=D.UBIFragment,K=(0,i.useMemo)((function(){return F.trackListFactory()}),[F]),te=(0,i.useMemo)((function(){return F.moreByArtistShelfFactory()}),[F]),le=(0,i.useMemo)((function(){return F.upgradeButtonFactory()}),[F]),se=I.moreAlbumsByArtist,oe=parseInt(new URLSearchParams((0,l.zy)().search).get("index")||"0",10),ce=(0,_.J)(O),ue=(0,W.P)({uri:ce},{featureIdentifier:"album"}),de=ue.usePlayContextItem,me=ue.togglePlay,ge=ue.isPlaying,he=ue.isActive,xe=(0,i.useCallback)((function(e,a){if(F){var r=F.headerFactory().artistNameFactory().hitUiNavigate({destination:a.creator.uri});B.logInteraction(r)}}),[B,F]),fe=function(){var e=(0,i.useState)(!1),a=(0,pe.A)(e,2),r=a[0],n=a[1];return{isOpen:r,openModal:(0,i.useCallback)((function(){return n(!0)}),[]),closeModal:(0,i.useCallback)((function(){return n(!1)}),[])}}(),ye=fe.isOpen,ve=fe.openModal,ke=fe.closeModal,Ce=(0,u.NC)(ne.WJ1,{loadingValue:!1})?{onClick:ve,ariaLabel:m.Ru.get("web-player.album.open_coverart_modal")}:{},we=(0,i.useCallback)((function(){return new URLSearchParams(L.search.slice(1)).get("highlight")||""}),[L.search]),Pe=I.uri,Ae=I.name,Re=I.albumType,Me=null===(a=I.release)||void 0===a?void 0:a.date,Oe=null===(r=I.release)||void 0===r?void 0:r.precision,Ne=I.nrTracks,Ue=I.images,Se=null===(n=I.extractedColors)||void 0===n?void 0:n.colorRaw.hex,Ie=I.artists,Le=I.isPlayable,De=I.isCatalogueRestricted,Fe=I.copyright.items,Be=I.courtesyLine,ze=I.duration.durationMs,Te=I.duration.isEstimate,_e=we(),Ee=null!==(h=null===(b=(0,t.d4)(ie.Ht).overrides)||void 0===b?void 0:b.locale)&&void 0!==h?h:m.Ru.getLocaleForTranslation(),Ve=(0,re.W)({uri:O,type:"locale"}),He=(0,q.qc)({albumName:Ae,albumType:Re,albumArtists:Ie.map((function(e){return e.name})).join(m.Ru.getSeparator()),shouldLocalize:Ve,i18n:m.Ru});(0,E.z)(Se||null);var Ye=function(e){return(0,i.useMemo)((function(){if(null==e||!e.date)return null;if("day"===e.precision){var a=new Date(e.date),r=(new Date).getTime()-a.getTime(),n=r%ra;return n<3.5*aa||n>312552e5?Math.round(r/ra):null}return null}),[e])}(I.release),Qe=(0,T.a)().isCompactMode,$e=(0,S.t)(),na=(0,v.jsx)(P.h,{uri:I.uri,artistUri:null===(p=I.artists)||void 0===p||null===(p=p[0])||void 0===p?void 0:p.uri,sharingInfo:I.sharingInfo});return(0,v.jsxs)("section",{className:Je,"data-testid":"album-page",children:[(0,v.jsx)(A.Q,{children:He}),null!==Ye?(0,v.jsx)(i.Suspense,{fallback:null,children:(0,v.jsx)(ta,{colorLight:null==I||null===(x=I.extractedColors)||void 0===x?void 0:x.colorLight.hex,colorDark:null==I||null===(f=I.extractedColors)||void 0===f?void 0:f.colorDark.hex,name:Ae,years:Ye})}):null,(0,v.jsxs)(Z.z,{backgroundColor:Se,children:[(0,v.jsxs)(R.h,{children:[(0,v.jsx)(N.D,{size:"medium",onClick:function(){return me()},disabled:!Le,isPlaying:ge,uri:O}),(0,v.jsx)(w.h,{menu:na,children:(0,v.jsx)(M.X,{text:Ae,dragUri:O,dragLabel:Ae})})]}),(0,v.jsx)(w.h,{menu:na,children:(0,v.jsx)(G.K,ia({dragUri:Pe,images:Ue,name:Ae,placeholderType:"album"},Ce))}),(0,v.jsxs)(Y.Y,{children:[(0,v.jsx)($.B,{children:la(Re)}),(0,v.jsx)(w.h,{menu:na,children:(0,v.jsx)(ee.mm,{dragUri:I.uri,dragLabel:I.name,scaleAtMinWidth:ee.tw,children:Ae})}),(0,v.jsx)(Q.t,{creators:Ie,onCreatorClick:xe,releaseDate:Me,releaseDatePrecision:Oe,totalItems:Ne,durationMilliseconds:ze,isEstimatedDuration:Te,hasTracks:!0})]})]}),(0,v.jsx)(Ze,{backgroundColor:Se,uri:O,togglePlay:me,isPlaying:ge,isActive:he,spec:F,logger:B,sharingInfo:I.sharingInfo,name:I.name,artists:I.artists,isPlayable:I.isPlayable}),(0,v.jsxs)("div",{className:"contentSpacing",children:[De&&(0,v.jsx)(k,{message:(0,je.E)(Re),className:Xe,spec:le,logger:B}),(0,v.jsx)(J,{spec:K,children:(0,v.jsx)(U.a,{columns:$e,children:(0,v.jsx)(Ge.F,{ariaLabel:Ae,nrTracks:(0,je.YD)(I.discs)?I.discs.totalCount+Ne:Ne,discs:I.discs,albumUri:Pe,highlightUri:_e,scrollToIndex:oe,usePlayContextItem:de,initalTracks:I.items,isCompactMode:Qe})})}),(0,v.jsxs)("div",{className:qe,children:[(0,v.jsxs)("div",{children:[Me&&(0,v.jsx)(s.E,{as:"p",variant:"bodySmall",children:(0,X.rh)((0,X.ad)(Me),Ee,{year:"numeric",month:"long",day:"numeric"},Oe)}),(0,v.jsx)(V.Z,{copyrights:Fe,courtesyLine:Be})]}),I.releases.items.length>0&&(0,v.jsx)(C.t,{menu:(0,v.jsx)(ea,{releases:I.releases.items}),children:function(e,a,r){return(0,v.jsxs)("button",{ref:r,className:We,type:"button",onClick:a,children:[(0,v.jsx)(s.E,{variant:"bodySmall",children:m.Ru.get("album-page.more-releases",I.releases.items.length)}),e?(0,v.jsx)(o.J,{size:"small"}):(0,v.jsx)(c.y,{size:"small"})]})}})]})]}),(0,v.jsx)(z,{albumName:Ae,albumURI:Pe}),(0,v.jsx)(v.Fragment,{children:(null==se?void 0:se.length)>0&&(0,v.jsx)("div",{className:"contentSpacing",children:(0,v.jsx)(J,{spec:te,children:(0,v.jsx)(ae.p,{index:0,id:"more-albums",className:Ke,title:m.Ru.get("album-page.more-by-artist",null==Ie||null===(j=Ie[0])||void 0===j?void 0:j.name),total:se.length,seeAllUri:"".concat(null==Ie||null===(y=Ie[0])||void 0===y?void 0:y.uri.replace("artist","app:artist"),":discography"),seeAllLabel:m.Ru.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:se.map((function(e,a){return(0,v.jsx)(g.R,{index:a,artists:Ie,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)}))})})})}),(0,v.jsx)(be,{title:He,isOpen:ye,onClose:ke,images:Ue})]})};const oa=i.memo((function(){var e=(0,l.g)().albumId,a="spotify:album:".concat(e),r=(0,xe.$)(a),n=r.loading,i=r.error,t=r.data,s=r.canLoadOffline;return n||!t?(0,v.jsx)(O.A,{hasError:null!==i,loadOffline:s,errorMessage:m.Ru.get("error.not_found.title.album")}):(0,v.jsx)(K.P,{surface:J.u.ALBUM,uris:[a],children:(0,v.jsx)(sa,{uri:a,album:t})})}))}}]);
=======
"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2342],{15632:(e,a,i)=>{i.d(a,{g:()=>s});var n=i(69736),l=i(63068),t=i(11527);const s=({children:e})=>(0,t.jsx)(n.x,{variant:"bodySmall",className:l.Z.pretitle,children:e})},66873:(e,a,i)=>{i.d(a,{x:()=>m});var n=i(50959),l=i(76950),t=i(50540),s=i(30374),r=i(2990),o=i(71459),c=i(8499),d=i(11527);const m=({children:e,action:a,uri:i})=>{const m=(0,t.g)(),u=(0,r.j)();let g;const h=()=>{const e={triggerId:c.K,triggerAction:{type:a}};o.y.set((a=>({...a,...e}))),u.storeAction(s.wH,{operation:l.pT.ADD,uris:[i]})};try{g=n.Children.only(e)}catch(a){return(0,d.jsx)(d.Fragment,{children:e})}return m?n.cloneElement(g,{onClick:h}):(0,d.jsx)(d.Fragment,{children:e})}},30521:(e,a,i)=>{i.r(a),i.d(a,{default:()=>Ge});i(86277);var n=i(50959),l=i(82187),t=i.n(l),s=i(75390),r=i(35869),o=i(75802),c=i(69736),d=i(87025),m=i(80859),u=i(10226),g=i(93175),h=i(85648),b=i(29770),k=i(20580),p=i(16972),x=i(41038),y=i(97922),v=i(81639),j=i(16118),f=i(91643),N=i(57986),I=i(20069);const S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryAlbumMerch"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albumUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"merch"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"20"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumMerchItem"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumMerchItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Merch"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"image"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"price"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]};var w=i(18118);const A="iEG0moJ3mt1_j9Lho7MA";var C=i(11527);const L=({albumName:e,albumURI:a})=>{const{data:i}=(n={uri:a},l={gcTime:5*I.y},(0,I.a)(S,n,l));var n,l;const t=i?.albumUnion&&"merch"in i.albumUnion?i?.albumUnion?.merch?.items:[];return t&&t?.length>0?(0,C.jsx)("div",{className:"contentSpacing",children:(0,C.jsx)("div",{className:A,children:(0,C.jsx)(w.s,{id:e,uri:a,merchItems:t,merchVariant:"Album page merch items"})})}):null};var P=i(19848),U=i(32793),F=i(47262),M=i(66713),T=i(23255),R=i(22527),E=i(29673),B=i(80626),V=i(82857),O=i(43104),D=i(80683),z=i(67408),_=i(22795),q=i(47895),Q=i(15842),Y=i(66205),Z=i(38338),H=i(57562),W=i(97013),K=i(66873),X=i(66819),$=i(13734),J=i(9443),G=i(64222),ee=i(91529),ae=i(25230),ie=i(72417);const ne="album-albumPage-sectionWrapper",le="zddjxV2lX9ukNM5QXloA",te="lVqlPjQLuQhK2flsxB78",se="O_EguRjsZ4uI1hHamkOA",re="jcaQQxoVnuuhtVwDJU1R",oe="x-album-releasesDropdown",ce="in4OjUTflcsoj9RUpf05",de="xaPiqLlyzjAbzAaXfU1y",me="vveb4Rn0dK_r8YUM7L_n",ue=n.memo((function({uri:e,togglePlay:a,isPlaying:i,isActive:l,spec:t,logger:s,backgroundColor:r,name:o,artists:c,isPlayable:d,sharingInfo:m}){const u=(0,$.o)(),g=(0,J.k)(),b=(0,_.y)(),x=(0,n.useMemo)((()=>t.actionBarFactory()),[t]),[y,v]=(0,_.Z)(e),j=(0,n.useCallback)((()=>{const n=(0,G.aK)({isPlaying:i,isActive:l,spec:x.playButtonFactory(),logger:s,uri:e});a({loggingParams:n})}),[i,l,a,x,s,e]),f=(0,n.useCallback)((async()=>{let a;const i=x.saveButtonFactory();a=y?i.hitDislike({itemToBeDisliked:e}):i.hitLike({itemToBeLiked:e}),s.logInteraction(a),u({targetUri:e,intent:y?"unsave":"save",type:"click"});try{await v(!y)}catch{}}),[u,e,y,v,x,s]),I=(0,ie.Q)(),S=(0,X.j)();return(0,C.jsx)(Q.o,{backgroundColor:r,children:(0,C.jsxs)(Y.F,{children:[(0,C.jsx)(N.$,{onClick:j,disabled:!d,isPlaying:i,size:S,uri:e}),I&&(0,C.jsx)(B.Nh,{spec:x,children:(0,C.jsx)(ae.K,{entityName:o,contextUri:e,activationPlacement:"bottomEnd",size:S})}),(0,C.jsx)(K.x,{uri:e,action:ee.sr.SAVE_ALBUM,children:(0,C.jsx)(Z.H,{isAdded:!!y,onClick:f,disabled:!g&&!b?.getCapabilities().canModifyOffline,size:S})}),(0,C.jsx)(H.o,{uri:e,isFollowing:!!y,onClick:(a,i)=>(0,G.l7)(i,x.downloadButtonFactory(),s,e),onFollow:f,size:S}),(0,C.jsx)(k.yj,{onShow:()=>(0,G.qq)(x,s),menu:(0,C.jsx)(p.Y,{uri:e,artistUri:c?.[0]?.uri,sharingInfo:m}),children:(0,C.jsx)(W.z,{label:h.ag.get("more.label.context",o),size:S})}),(0,C.jsx)("div",{className:me,children:(0,C.jsx)(D.F,{property:q.FM,renderNewExperience:()=>(0,C.jsx)(z.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var ge=i(41981);const he=864e5,be=365.25*he;var ke=i(15632),pe=i(9108),xe=i(36255),ye=i(39600),ve=i(40234),je=i(58301),fe=i(17676);var Ne=i(1142),Ie=i(48948),Se=i(11317),we=i(51450),Ae=i(50540),Ce=i(24071),Le=i(95504),Pe=i(91530),Ue=i(87350);var Fe=i(62116),Me=i(68007),Te=i(40537),Re=i(80515),Ee=i(58912);const Be="TCmZzqInstJMZjkHgnw3",Ve="PeNI572tTpqsN23o3QhJ",Oe="oUsSfFiifMPXqW0kHjR6",De="XKvEMQZlPfPncTqiitM5",ze="GdbPVlmUCW0Q6ZZ0z0wh",_e="Hu7O5y7x5c7wUYFbnIoS",qe=n.memo((function(e){const{images:a,title:i,isOpen:l,onClose:t}=e,s=(0,n.useMemo)((()=>(0,Ee.X)(a,{desiredSize:1e4})),[a]);return s?(0,C.jsx)(Te.Z,{className:Be,isOpen:l,onRequestClose:t,animation:{modal:{base:De,afterOpen:ze,beforeClose:_e}},animated:!0,children:(0,C.jsxs)("div",{style:{"--image-width":`${s.width}px`,"--image-height":`${s.height}px`},className:Ve,children:[(0,C.jsx)(Re.E,{loading:"eager",alt:i,src:s.url,className:Oe}),(0,C.jsx)(Me.o,{onClick:t,semanticColor:"textBase",children:h.ag.get("web-player.cover-art-modal.close")})]})}):null}));var Qe=i(6807),Ye=i(14892);const Ze=({releases:e})=>(0,C.jsx)(Qe.v,{children:e.map((e=>(0,C.jsx)(Ye.s,{role:"menuitem",to:(0,Se.EC)(e.uri).toURLPath(!0),children:e.name},e.uri)))});var He=i(43192),We=i(50760),Ke=i(78947);const Xe=n.lazy((()=>i.e(4373).then(i.bind(i,4373))));function $e(e){switch(e){case We.V.Single:return h.ag.get("single");case We.V.Ep:return h.ag.get("ep");case We.V.Compilation:return h.ag.get("compilation");case We.V.Audiobook:return h.ag.get("card.tag.audiobook");case We.V.Album:default:return h.ag.get("album")}}const Je=({uri:e,album:a})=>{const i=(0,o.TH)(),{spec:l,logger:f,UBIFragment:I}=(0,B.fU)(g.w,{data:{uri:e}}),S=(0,n.useMemo)((()=>l.trackListFactory()),[l]),w=(0,n.useMemo)((()=>l.moreByArtistShelfFactory()),[l]),A=a.moreAlbumsByArtist,T=parseInt(new URLSearchParams((0,o.TH)().search).get("index")||"0",10),D=(0,U.Y)(e),{usePlayContextItem:z,togglePlay:_,isPlaying:q,isActive:Q}=(0,R.n)({uri:D},{featureIdentifier:"album"}),Y=(0,n.useCallback)(((e,a)=>{if(l){const e=l.headerFactory().artistNameFactory().hitUiNavigate({destination:a.creator.uri});f.logInteraction(e)}}),[f,l]),{isOpen:Z,openModal:H,closeModal:W}=(()=>{const[e,a]=(0,n.useState)(!1);return{isOpen:e,openModal:(0,n.useCallback)((()=>a(!0)),[]),closeModal:(0,n.useCallback)((()=>a(!1)),[])}})(),K=(0,u.W6)(fe.DUY,{loadingValue:!1})?{onClick:H,ariaLabel:h.ag.get("web-player.album.open_coverart_modal")}:{},X=(0,n.useCallback)((()=>new URLSearchParams(i.search.slice(1)).get("highlight")||""),[i.search]),$=a.uri,J=a.name,G=a.albumType,ee=a.release?.date,ae=a.release?.precision,ie=a.nrTracks,me=a.images,Me=a.extractedColors?.colorRaw.hex,Te=a.artists,Re=a.isPlayable,Ee=a.isCatalogueRestricted,Be=a.copyright.items,Ve=a.courtesyLine,Oe=a.duration.durationMs,De=a.duration.isEstimate,ze=X(),_e=(0,r.v9)(Ue.Gg),Qe=_e.overrides?.locale??h.ag.getLocaleForTranslation(),Ye=(0,Fe.k)({uri:e,type:"locale"}),He=(0,E.OT)({albumName:J,albumType:G,albumArtists:Te.map((e=>e.name)).join(h.ag.getSeparator()),shouldLocalize:Ye,i18n:h.ag});(0,F.Y5)(Me||null);const{albumILRAboveEnabled:We,albumILRBelowEnabled:Je}=(()=>{const e=(0,je.E)(),a=(0,o.TH)(),i=(0,u.W6)(fe.t2x),n=(0,ye.vI)(ve.k.ILRAlbumAbove,a),l=(0,ye.vI)(ve.k.ILRAlbumBelow,a);return e?{albumILRAboveEnabled:!l&&(n||i===fe.wPk.ABOVE),albumILRBelowEnabled:!n&&(l||i===fe.wPk.BELOW)}:{albumILRAboveEnabled:!1,albumILRBelowEnabled:!1}})(),Ge=function(e){return(0,n.useMemo)((()=>{if(!e?.date)return null;if("day"===e.precision){const a=new Date(e.date),i=(new Date).getTime()-a.getTime(),n=i%be;return n<3.5*he||n>312552e5?Math.round(i/be):null}return null}),[e])}(a.release),{isCompactMode:ea}=(0,P.mJ)(),aa=(e=>{const a=(0,Ae.g)(),i=(0,Ce.s4)(),l=(0,u.W6)(fe.t2x),t=(0,r.v9)(Ue.n5),s=(0,r.v9)(Pe.rZ);return(0,n.useCallback)((async()=>{if(!(0,Se.YF)(e))return;const n={category:"album_ilr_component_visible",action:"viewed",variant:l,label:"dwp",os:(0,Le.y)(),context:e,country:t?s:"",sp_t:(0,we.vQ)("sp_t")};a?i.send((0,Ie.k)(n)):i.send((0,Ne.x)(n))}),[e,s,i,a,t,l])})(e),{ref:ia,inView:na}=(0,s.YD)({threshold:0});return(0,n.useEffect)((()=>{na&&aa()}),[na,aa]),(0,C.jsxs)("section",{className:ne,"data-testid":"album-page",children:[(0,C.jsx)(x.$,{children:He}),null!==Ge?(0,C.jsx)(n.Suspense,{fallback:null,children:(0,C.jsx)(Xe,{colorLight:a?.extractedColors?.colorLight.hex,colorDark:a?.extractedColors?.colorDark.hex,name:J,years:Ge})}):null,(0,C.jsxs)(y.gF,{backgroundColor:Me,children:[(0,C.jsxs)(v.W,{children:[(0,C.jsx)(N.$,{size:"medium",onClick:()=>_(),disabled:!Re,isPlaying:q,uri:e}),(0,C.jsx)(j.i,{text:J,dragUri:e,dragLabel:J})]}),(0,C.jsx)(k._P,{menu:(0,C.jsx)(p.Y,{uri:a.uri,artistUri:Te?.[0]?.uri,sharingInfo:a.sharingInfo}),children:(0,C.jsx)(y.Oz,{dragUri:$,images:me,name:J,placeholderType:"album",...K})}),(0,C.jsxs)(y.sP,{children:[(0,C.jsx)(ke.g,{children:$e(G)}),(0,C.jsx)(k._P,{menu:(0,C.jsx)(p.Y,{uri:a.uri,artistUri:Te?.[0]?.uri,sharingInfo:a.sharingInfo}),children:(0,C.jsx)(y.xd,{dragUri:a.uri,dragLabel:a.name,scaleAtMinWidth:y.vz,children:J})}),(0,C.jsx)(y.QS,{creators:Te,onCreatorClick:Y,releaseDate:ee,releaseDatePrecision:ae,totalItems:ie,durationMilliseconds:Oe,isEstimatedDuration:De,hasTracks:!0})]})]}),(0,C.jsx)(ue,{backgroundColor:Me,uri:e,togglePlay:_,isPlaying:q,isActive:Q,spec:l,logger:f,sharingInfo:a.sharingInfo,name:a.name,artists:a.artists,isPlayable:a.isPlayable}),Ee?(0,C.jsxs)("div",{className:le,children:[(0,C.jsx)(c.x,{as:"h2",variant:"bodyMediumBold",className:te,children:h.ag.get("windowed.product-album-header")}),(0,C.jsx)("div",{className:se,children:h.ag.get("windowed.product-album-description")})]}):null,(0,C.jsxs)("div",{className:"contentSpacing",children:[(0,C.jsx)(I,{spec:S,children:(0,C.jsx)(ge.L,{ariaLabel:J,nrTracks:(0,Ke.y)(a.discs)?a.discs.totalCount+ie:ie,discs:a.discs,albumUri:$,highlightUri:ze,scrollToIndex:T,usePlayContextItem:z,initalTracks:a.items,isCompactMode:ea})}),(0,C.jsxs)("div",{className:ce,children:[(0,C.jsxs)("div",{children:[ee&&(0,C.jsx)(c.x,{as:"p",variant:"bodySmall",children:(0,O.BI)((0,O.RX)(ee),Qe,{year:"numeric",month:"long",day:"numeric"},ae)}),(0,C.jsx)(M.k,{copyrights:Be,courtesyLine:Ve})]}),a.releases.items.length>0&&(0,C.jsx)(k.xV,{menu:(0,C.jsx)(Ze,{releases:a.releases.items}),children:(e,i,n)=>(0,C.jsxs)("button",{ref:n,className:oe,type:"button",onClick:i,children:[(0,C.jsx)(c.x,{variant:"bodySmall",children:h.ag.get("album-page.more-releases",a.releases.items.length)}),e?(0,C.jsx)(d.U,{size:"small"}):(0,C.jsx)(m.i,{size:"small"})]})})]})]}),We&&(0,C.jsx)("div",{className:t()("contentSpacing",de),"data-testid":"placeholder-album-ilr-above",children:(0,C.jsx)(pe.y,{subtitle:h.ag.get("internal-link-recommender.based-on-this-album"),uri:a.uri,inViewRef:ia,entityType:V.p.ALBUM})}),(0,C.jsx)(L,{albumName:J,albumURI:$}),(0,C.jsxs)(C.Fragment,{children:[A?.length>0&&(0,C.jsx)("div",{className:"contentSpacing",children:(0,C.jsx)(I,{spec:w,children:(0,C.jsx)(xe.q,{index:0,id:"more-albums",className:re,title:h.ag.get("album-page.more-by-artist",Te?.[0]?.name),total:A.length,seeAllUri:`${Te?.[0]?.uri.replace("artist","app:artist")}:discography`,seeAllLabel:h.ag.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:A.map(((e,a)=>(0,C.jsx)(b.i,{index:a,artists:Te,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)))})})}),Je&&(0,C.jsx)("div",{className:t()("contentSpacing",de),"data-testid":"placeholder-album-ilr-below",children:(0,C.jsx)(pe.y,{subtitle:h.ag.get("internal-link-recommender.based-on-this-album"),uri:a.uri,inViewRef:ia,entityType:V.p.ALBUM})})]}),(0,C.jsx)(qe,{title:He,isOpen:Z,onClose:W,images:me})]})},Ge=n.memo((function(){const{albumId:e}=(0,o.UO)(),a=`spotify:album:${e}`,{loading:i,error:n,data:l,canLoadOffline:t}=(0,He.j)(a);return i||!l?(0,C.jsx)(f.h,{hasError:null!==n,loadOffline:t,errorMessage:h.ag.get("error.not_found.title.album")}):(0,C.jsx)(T.fd,{surface:T.Tg.ALBUM,uris:[a],children:(0,C.jsx)(Je,{uri:a,album:l})})}))},39600:(e,a,i)=>{i.d(a,{vI:()=>n});i(86277);const n=(e,a)=>{const i=a?new URLSearchParams(a.search):void 0;return"1"===i?.get(e)}},40234:(e,a,i)=>{i.d(a,{k:()=>n});let n=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShow="ilrs",e.PlaylistInternalTrackLinks="pitl",e.PlaylistInternalTrackAndArtistLinks="pital",e}({})}}]);
>>>>>>> origin/master
//# sourceMappingURL=xpui-routes-album.js.map