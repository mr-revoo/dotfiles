<<<<<<< HEAD
"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{42094:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(98866),i=n(30758),a=n(33165),s=n(27770),l=n(58184),o=n(95477),c=n(8539),u=n(63994);const d="hOOwEKqNuXrNvOCB1SgZ",m="csEdkIN9z2LjJIuZraqz";var p=n(86070),f=function(e){var t=e.uri,n=(0,u.A)(t),f=(0,r.A)(n,2),v=f[0],b=f[1],x=(0,a.Zp)(),y=(0,i.useCallback)((function(){b(!1),x("/",{replace:!0})}),[x,b]);return(0,p.jsxs)("div",{className:d,children:[(0,p.jsx)(s.b,{size:"xxlarge"}),(0,p.jsxs)("div",{className:m,children:[(0,p.jsx)(l.E,{as:"p",variant:"titleSmall",children:c.Ru.get("forbidden-page.title")}),(0,p.jsx)(l.E,{as:"p",variant:"bodySmall",children:c.Ru.get("forbidden-page.description")})]}),v&&(0,p.jsx)(o.$,{colorSet:"invertedLight",onClick:y,children:c.Ru.get("remove_from_your_library")})]})}},5340:(e,t,n)=>{n.d(t,{u:()=>p});var r=n(97500),i=n.n(r),a=n(8159),s=n(34606),l=n(79464),o=n(68262),c=n(72135),u=n(1479),d=n(76967),m=n(86070),p=function(e){var t=e.uri,n=e.src,r=e.playAriaLabel,p=e.onClick,f=e.isPlaying,v=e.isActive,b=e.isLocked,x=e.isEpisode,y=e.isVideo,h=e.spec,g=(0,o.W)(),j=(0,l.s)(),A=(0,a.YQ)((function(e){var n;if(g({type:"click",intent:f?"pause":"play"}),h){var r,i=h.playbackButtonFactory();r=v&&f?i.hitPause({itemToBePaused:t}):v&&!f?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),n=j.logInteraction(r)}p(e,n)}),s.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:d.A.rowImageWithPlay,children:[(0,m.jsx)(u.e,{src:n,isEpisode:x,isVideo:y}),(0,m.jsx)(c.x,{className:i()(d.A.rowPlayPauseButton,d.A.rowImagePlayPauseButton),iconClassName:d.A.rowPlayPauseIcon,onClick:A,isPlaying:f,isLocked:b,playAriaLabel:r})]})}},36883:(e,t,n)=>{n.d(t,{M:()=>f});var r=n(66569),i=(n(59208),n(60989),n(9555),n(80710),n(83603),n(80766),n(10866),n(43864),n(18535),n(41681),n(62980),n(75231),n(21977),n(26980),n(76133),n(46825),n(30278)),a=(n(46686),n(63763),n(15525),n(30758));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l=[],o=function(e){var t,n=(null===(t=l.find((function(t){return t.key===e})))||void 0===t?void 0:t.heights)||{},i=(0,a.useCallback)((function(t){if(e){var n=l.findIndex((function(t){return t.key===e}));-1===n?l.push({key:e,heights:t}):(l[n].heights=t,l.push(l.splice(n,1)[0])),l.length>10&&l.shift()}}),[e]),o=(0,a.useRef)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n));return(0,a.useEffect)((function(){return function(){i(o.current)}}),[i]),o.current},c=function(e,t){for(var n=[],r=e,i=t;r>0;){var a=Math.ceil(r/i);n.push({first:e-r,nrItems:a}),r-=a,i--}return n},u=n(86070);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function e(t){var n,r,a=t.itemsInNode,s=t.renderItem,l=t.renderPlaceholder,o=t.estimatedHeight,d=t.scrollNodeRef,p=t.nrRowsOverscan,f=void 0===p?10:p,v=t.nrInitialInView,b=void 0===v?0:v,x=t.firstIndex,y=t.heights,h=t.fanOut,g=void 0===h?2:h,j=(0,i.Wx)({root:d.current,rootMargin:"".concat(f*o,"px 0px"),initialInView:x<b}),A=j.ref,R=j.inView,k=j.entry,C="".concat(x,"-").concat(a);null!==(n=y[C])&&void 0!==n||(y[C]=o*a),null!=k&&null!==(r=k.boundingClientRect)&&void 0!==r&&r.height&&(y[C]=k.boundingClientRect.height);var O=y[C];return 0===a?null:R?1===a?(0,u.jsx)("div",{ref:A,role:"presentation",children:s(x,O)}):(0,u.jsx)("div",{ref:A,role:"presentation",children:c(a,g).map((function(n,r){var i=n.first,a=n.nrItems;return(0,u.jsx)(e,m(m({},t),{},{itemsInNode:a,firstIndex:x+i}),r)}))}):(0,u.jsx)("div",{ref:A,role:"presentation",children:l("".concat(O,"px"))})},f=function(e){var t=o(e.persistanceKey);return(0,u.jsx)(p,m(m({},e),{},{itemsInNode:e.totalCount,firstIndex:0,heights:t,nrInitialInView:e.nrInitialInView}))}},82911:(e,t,n)=>{n.r(t),n.d(t,{ThisIsTourCard:()=>d,default:()=>d,useThisisPlaylistExtensionQuery:()=>v});var r=n(58184),i=n(71309),a=n(8539),s=n(80047),l=n(79464),o=n(69798),c=n(79079),u=n(86070);const d=function(e){var t=e.artistImageUrl,n=e.artistName,d=e.artistConcertsUri,m=e.spec,p=(0,l.s)(),f=(0,o.t)(m.concertsCardFactory({identifier:n,uri:d,reason:"This is On Tour phase 1 MVP"}));return t&&n&&d?(0,u.jsxs)("section",{ref:f,className:"contentSpacing",children:[(0,u.jsx)(r.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:a.Ru.get("concerts")}),(0,u.jsx)("div",{className:c.A.cards,children:(0,u.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,u.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,u.jsxs)("div",{className:c.A.cardContent,children:[(0,u.jsx)(r.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:a.Ru.get("concerts_on_tour")}),(0,u.jsx)(r.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:n}),(0,u.jsx)(s.A,{to:d,className:c.A.cardLink,children:(0,u.jsx)(i.n,{as:"span",size:"small",onClick:function(){var e=m.concertsCardFactory({identifier:n,uri:d,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:d});p.logInteraction(e)},className:c.A.cardButton,children:a.Ru.get("concerts_see_all_events")})})]})]})})]}):null};var m=n(67281),p=n(42344),f=new m.l("thisisPlaylistExtension","query","c3c3145aca9849ce8f4d742f9d4dc3be4d945717ce66347d1b3710b8a06749b6",null),v=function(e,t){return(0,p.I)(f,e,t)}},17221:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ia});var r=n(59950),i=n(98866),a=(n(60989),n(9555),n(67601),n(63051),n(45191),n(23833),n(83603),n(20767),n(51338),n(45803),n(62980),n(14053),n(22711),n(11034),n(54858),n(36389),n(12771),n(88287),n(75231),n(21977),n(40675),n(76133),n(85194),n(27092),n(68925),n(31796),n(21467),n(22064),n(92114),n(77020),n(45935),n(60726),n(82765),n(13312),n(30758)),s=n(41978),l=n(33165),o=n(58184),c=n(17635),u=n(91068),d=n(96839),m=n(8539),p=n(87236),f=(n(10565),n(39350),n(2795),n(37502)),v=(n(59208),n(80710),n(80766),n(10866),n(43864),n(18535),n(41681),n(26980),n(46825),n(66569)),b=(n(82860),n(53005),n(86070)),x=function(e,t,n){return{event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(n),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}},y=function(e){var t=e.clickTracking,n=e.clickThrough,r=e.thirdPartyImpression,l=e.impression,c=e.logoUrl,u=e.advertiserName,d=e.creativeId,p=e.lineItemId,v=(0,s.wA)(),y=(0,a.useState)(!1),h=(0,i.A)(y,2),g=h[0],j=h[1];return(0,a.useEffect)((function(){return v((0,f.tb)()),v((0,f.i2)(x("event_viewed",d,p))),function(){v((0,f.zV)())}}),[v,d,p]),(0,b.jsxs)("div",{className:"sponsor-container",children:[(0,b.jsx)(o.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:m.Ru.get("playlist.presented_by",u)}),(0,b.jsxs)("div",{className:"sponsor-logo",children:[(0,b.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:n,onClick:function(){v((0,f.i2)(x("event_clicked",d,p))),j(!0)},children:(0,b.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:c,alt:u,"data-ta-id":"sponsor-logo"})}),(0,b.jsx)("img",{className:"sponsor-logo__imp-pixel",src:l,alt:""}),r&&(0,b.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:r,alt:""}),g&&(0,b.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:t,alt:""})]})]})};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){var t=e.playlistUri,n=(0,s.wA)(),r=(0,s.d4)((function(e){return e.ads.sponsoredPlaylist.previewAd||e.ads.sponsoredPlaylist.sponsoredPlaylist.get(t)}));return(0,a.useEffect)((function(){r||n((0,f.uP)(t))}),[n,t,r]),r?(0,b.jsx)("div",{children:(0,b.jsx)(y,g({},r))}):null},A=function(e){var t=e.playlistUri,n=(0,s.wA)(),r=(0,s.d4)((function(e){return e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships")})),i=(0,s.d4)((function(e){return e.ads.sponsoredPlaylist.previewAd}));(0,a.useEffect)((function(){r||n((0,f.uU)())}),[n,r]);var l=i||r&&function(e,t){var n=Date.now()/1e3,r=e.split(":"),i=r[r.length-1];return t.some((function(e){var t=e.playlistId,r=e.endTime,a=e.startTime;return t===i&&n>=a&&n<(r||n+1)}))}(t,r);return l?(0,b.jsx)(j,{playlistUri:t}):null},R=n(38150),k=n(82342),C=n(42094),O=n(57528),T=n(72863),P=n(43219),S=n(35242),E=n(30051),w=n(51443),I=n(83875),N=n(82911),L=n(85848),_=n(37302),U=n(68262),D=n(90577),M=n(40212),B=n(8159),F=n(34867),V=n(78425),z=n(6914),q=n(70358),W=["meta+v"];var $=n(23572),H=n(46600),K=n(68688),Q=n(85670),G=n(76180),Y=n(544),J=n(42344),X=n(60093),Z=(n(40313),n(24847),n(46492)),ee=n(49695),te=n(31323),ne=(0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)((0,v.A)({},te.n.TITLE,["title","original_index"]),te.n.ADDED_BY,["added_by","original_index"]),te.n.ADDED_AT,["added_at","album_title","album_artist_name","album_disc_number","album_track_number","original_index"]),te.n.ARTIST,["artist_name","album_title","album_disc_number","album_track_number","original_index"]),te.n.ALBUM,["album_title","album_disc_number","album_track_number","original_index"]),te.n.DURATION,["duration","album_title","album_disc_number","album_track_number","original_index"]);function re(e,t){void 0!==t&&(e.metadata||(e.metadata={}),e.metadata[Z.W.SORTING_CRITERIA]=function(e){var t=e.field,n=e.order,r=ne[t];if(void 0===r||n!==ee.x.ASC&&n!==ee.x.DESC)throw new Error("Invalid sort params!");return r.map((function(e,t){return n?"".concat(e," ").concat(t>0?ee.x.ASC:n):e})).join(",")}(t))}var ie=n(52169),ae=(0,v.A)({},ie.H.TEXT,"text"),se=(0,v.A)({},ie.t.CONTAINS,"=^#");function le(e,t){void 0!==(null==t?void 0:t.value)&&(e.metadata||(e.metadata={}),e.metadata[Z.W.FILTERING_PREDICATE]=function(e){var t=e.field,n=e.operator,r=e.value;if(t!==ie.H.TEXT||n!==ie.t.CONTAINS)throw new Error("Invalid filter params!");var i=ae[t],a=se[n];return"".concat(i," ").concat(a,' "').concat(r,'"')}(t))}var oe=n(9704);var ce=n(76875),ue=n(6541),de=n(82837),me=n(58400),pe=n(2262),fe=n(29969),ve=n(52618),be=n.n(ve),xe=n(94411),ye=n(36883),he=n(37916),ge=n(8612),je=n(67208),Ae=n(25259),Re=n(91239),ke=n(39946),Ce=(n(2944),n(79548),n(1952),n(97500)),Oe=n.n(Ce),Te=n(7264),Pe=n(71309),Se=n(35833),Ee=n(11217),we=n(13783),Ie=n(93239),Ne=n(87349),Le=n(32439),_e=n(80047),Ue=n(63994),De=n(95771),Me=n(22443),Be=n(26302),Fe=n(81162),Ve=n(9373),ze=n(58634),qe=n(43899),We=n(75882),$e=n(22840),He=n(44472),Ke=n(79464),Qe=n(47162),Ge=n(64932),Ye=n(93477),Je=n(45782),Xe=n(32282),Ze=n(11207),et=n(86001),tt=n(17893),nt="small";const rt="ci11tAmTK1LnxThQkXPy",it="_2sJPwAAp1wY1Ftke6iFe",at="yuNzasMLs7hvemHI4d8Q",st="abYR6tZoE7BdzThmWTb0",lt="GOcKQxqNMhGzbGiAXBig",ot="yFQjuDAhri_egM1pwn70";var ct=["breakpoint","className","showSeparator"];function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var dt=(0,a.memo)((function(e){var t=e.breakpoint,n=e.className,r=e.showSeparator,i=(0,Ae.A)(e,ct);return(0,b.jsx)(Ze.v,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:Oe()(n,rt,(0,v.A)({},ot,r)),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:t===nt?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:t===nt?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px"},i))})),mt=n(50187),pt=n(41253),ft=function(e){var t=e.description,n=e.children;return(0,b.jsxs)("div",{className:st,children:[t&&(0,b.jsx)(mt.v,{lineClamp:2,as:"div",dir:"auto",children:(0,b.jsx)(pt.q,{asTextContent:!0,html:t})}),n]})},vt=n(86346),bt=function(e){var t=e.isPlaying,n=e.onClickPlay,r=e.name,i=e.authorName,a=e.isLocked,s=e.children;return(0,b.jsxs)("div",{className:lt,children:[(0,b.jsx)("div",{className:it,children:s}),(0,b.jsx)(vt.R,{size:"small",version:vt.H.secondary,onClick:n,isPlaying:t,ariaPlayLabel:m.Ru.get("tracklist.a11y.play",r,i),ariaPauseLabel:m.Ru.get("tracklist.a11y.pause",r,i),locked:a})]})},xt=n(61350),yt=n(18139),ht=n(47080),gt=function(e){var t=e.images,n=e.breakpoint,r=e.type,i=e.name,a=(0,ht._)(),s=n===nt?yt.Qe.SIZE_64:yt.Qe.SIZE_112;return(0,b.jsx)(xt.b,{fadeIn:!0,images:a(t,yt.BZ[s]),shape:xt.u.ROUNDED_CORNERS,size:s,iconSize:n===nt?"medium":"xlarge",type:r,title:i,loadingMode:"eager"})},jt=n(61735),At=function(e){var t=e.children;return(0,b.jsx)(jt.d,{lineClamp:2,as:"div",dir:"auto",children:t})},Rt=n(52756);const kt="dK79XxAEu3SEKJ2jS_Qy",Ct="guiUbDD6Ga8Qpatq2jQ8";var Ot=function(e){var t=e.isExplicit,n=e.children;return(0,b.jsxs)("div",{className:kt,children:[t&&(0,b.jsx)(Rt.g,{}),(0,b.jsx)(o.E,{variant:"bodySmall",className:Ct,children:n})]})};const Tt="CFz0rei5rsfsZuplXVIQ",Pt="H9T7R8VeiGcSbjXU0ZRX",St="BppGH6orIYP2gVU_WhVG";var Et=["book","contextUri","featureIdentifier","sharingInfo","uid","rating","isRecommendation","canRemove","showSeparator"];function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nt=(0,a.memo)((function(e){var t,n,r=e.book,s=e.contextUri,c=e.featureIdentifier,u=e.sharingInfo,p=e.uid,f=e.rating,x=e.isRecommendation,y=void 0!==x&&x,h=e.canRemove,g=void 0!==h&&h,j=e.showSeparator,A=void 0!==j&&j,R=(0,Ae.A)(e,Et),k=r.name,C=r.description,O=r.isLocked,T=r.isExplicit,P=r.images,S=r.type,E=r.uri,w=r.authorName,I=r.consumptionCapExplanation,N=r.durationMs,L=r.topics,_=void 0===L?[]:L,U=r.signifierText,D=(0,Ke.s)(),M=(0,me.r)(we.m,{data:{position:0,uri:E}}).spec,B=(0,X.P)({uri:E},{featureIdentifier:c}),F=B.isPlaying,V=B.isActive,z=B.togglePlay,q=(0,l.Zp)(),W=(0,d.o_)(E).toURLPath(!0),H=(0,Fe.x)(s).addItems,K=(0,tt.y)()===et.E.SMALL?"small":"large",Q=function(e){var t,n=(0,qe.L)(),r=(0,Ve.jE)(),s=(0,a.useRef)(null),l=(0,a.useRef)(0),o=(0,We.o)((function(t){var n,r;return(null==t?void 0:t.context.uri)===e&&null!==(n=null==t||null===(r=t.item)||void 0===r?void 0:r.uri)&&void 0!==n?n:null})),c=(0,$e.S)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===o})),u=(0,i.A)(c,1)[0],d=(0,ze.I)({queryKey:["useShowPlayedState",e],queryFn:(t=(0,fe.A)(be().mark((function t(){var r;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.getShowPlayedState(e),l.current=u,t.abrupt("return",r);case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),refetchOnWindowFocus:!1}),m=d.data;return(0,a.useEffect)((function(){s.current&&o!==s.current&&r.invalidateQueries({queryKey:["useShowPlayedState",e]}),s.current=o}),[o,r,e]),(0,a.useMemo)((function(){return m&&n.capabilities.canGetShowPlayedState?{state:m.state,playPositionMilliseconds:m.playPositionMilliseconds+u-l.current}:null}),[m,n,u])}(E),G=(0,Ue.A)(E),Y=(0,i.A)(G,2),J=Y[0],Z=Y[1],ee=(0,Me.T)(E),te=K===nt?"small":"medium",ne=(0,a.useCallback)((function(){D.logInteraction(M.addButtonFactory().hitAddToPlaylist({playlist:s,itemToBeAdded:E})),H([E],{after:"end"})}),[D,M,s,E,H]),re=(0,a.useCallback)((function(){if(O&&!I)q(W);else{var e=(0,$.$I)({isPlaying:F,isActive:V,spec:M.playButtonFactory(),logger:D,uri:E});z({loggingParams:e})}}),[I,V,O,F,D,q,M,z,E,W]),ie=(0,a.useCallback)((function(){var e,t;D.logInteraction(M.genreLinkFactory({uri:null!==(e=_[0].uri)&&void 0!==e?e:""}).hitUiNavigate({destination:null!==(t=_[0].uri)&&void 0!==t?t:""}))}),[D,M,_]),ae=(0,b.jsx)(At,{children:k}),se=(0,b.jsx)(ft,{description:C,children:(0,b.jsxs)(Ot,{isExplicit:!!T,children:[!0===(null==f?void 0:f.showAverage)&&void 0!==f.average&&(0,b.jsxs)("span",{children:[(0,b.jsx)(Te.j,{size:"xsmall",className:Tt}),m.Ru.formatNumber(f.average,{maximumFractionDigits:1})]}),(null===(t=_.at(0))||void 0===t?void 0:t.title)&&(0,b.jsx)(_e.N,{className:Pt,to:null!==(n=_[0].uri)&&void 0!==n?n:"",onClick:ie,children:_[0].title}),N&&(0,b.jsx)(Qe.j,{isPlaying:!1,fullyPlayed:(null==Q?void 0:Q.state)===He.H7.Completed,durationMs:N,position:null==Q?void 0:Q.playPositionMilliseconds})]})}),le=(0,b.jsx)(Le.p,{uri:E,uid:p,contextUri:s,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:g}),oe=!O&&!!!I,ce=y?null:(0,b.jsxs)(bt,{isPlaying:F,onClickPlay:re,isLocked:O&&!I,name:k,authorName:w,children:[(0,b.jsx)(Ge.M,{className:Oe()((0,v.A)({},at,J)),isAdded:J,onClick:function(){J?D.logInteraction(M.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:E})):D.logInteraction(M.saveToLibraryButtonFactory().hitLike({itemToBeLiked:E})),Z(!J)},size:te,isAudiobook:!0,condensedAll:!0}),(0,b.jsx)(Ye.I,{className:Oe()((0,v.A)({},at,(0,De.X)(ee))),uri:E,onClick:function(e,t){t===Be.NV.ADD&&D.logInteraction(M.downloadButtonFactory().hitDownload({itemToDownload:E}))},size:te,canDownload:oe,condensedAll:!0}),(0,b.jsx)(Xe.w,{uri:E,sharingInfo:null!=u?u:null,interactionData:{intent:"share",type:"click"},size:te,onClick:function(){var e;D.logInteraction(M.shareButtonFactory().hitShare({entityToBeShared:E,shareId:null!==(e=null==u?void 0:u.shareId)&&void 0!==e?e:""}))},condensedAll:!0}),(0,b.jsx)(Ie.b,{menu:le,children:(0,b.jsx)(Je.e,{label:m.Ru.get("more.label.context",k),size:te,onClick:function(){D.logInteraction(M.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),ue=(0,b.jsx)(gt,{images:P,name:k,type:S,breakpoint:K}),de=U?(0,b.jsx)(o.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:U}):null,pe=y?(0,b.jsx)(Pe.n,{size:"small",onClick:ne,children:m.Ru.get("playlist.extender.button.add")}):null,ve=(0,b.jsxs)(Se.j,{hasTextSeparator:!0,children:[(0,b.jsxs)(b.Fragment,{children:[y&&O&&(0,b.jsx)(Ee.u,{semanticColor:"textSubdued",title:m.Ru.get("mwp.header.content.unavailable"),size:"xsmall",className:St}),m.Ru.get("card.tag.audiobook")]}),w]});return(0,b.jsx)(Ne.h,{menu:le,onShow:function(){D.logInteraction(M.secondaryHitUiReveal())},children:(0,b.jsx)(dt,It({breakpoint:K,id:"book-".concat(E),media:ue,pretitle:de,title:ae,body:se,subtitle:ve,footer:ce,trailing:pe,onClick:function(){D.logInteraction(M.hitUiNavigate({destination:E})),q(W)},showSeparator:A},R))})})),Lt=n(62790),_t=n(31952),Ut=n(94541),Dt=(0,a.createContext)({getReference:function(){return null},setReference:function(){}}),Mt=function(e){var t=e.children,n=(0,a.useRef)(null),r=(0,a.useCallback)((function(){return n.current}),[]),i=(0,a.useCallback)((function(e){n.current=e}),[]);return(0,b.jsx)(Dt.Provider,{value:{getReference:r,setReference:i},children:t})};function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt=function(e,t,n){var r=e.name,i=e.uri,l=e.uid,o=(0,a.useContext)(E.cL).sortState.order!==Ut.H.NONE,c=(0,_.P)({itemIds:[l],itemUris:[i],itemMimeTypes:[Lt.fl.AUDIOBOOKS],dragLabelText:r,contextUri:t}),u=c.draggable,d=c.onDragStart,m=(0,a.useContext)(Dt),f=m.setReference,b=m.getReference,x=(0,a.useCallback)((function(e){f({uri:i,uid:l}),d(e)}),[d,f,l,i]),y=(0,s.wA)(),h=(0,a.useContext)(ce.w),g=(0,a.useCallback)((function(e,n){var r=e[Lt.fl.AUDIOBOOKS];if(r){var a=b();a?n===ke.Nz.BEFORE?h.move(t,[a],{before:{uri:i,uid:l}}):h.move(t,[a],{after:{uri:i,uid:l}}):n===ke.Nz.BEFORE?y((0,p.io)(t,r,{before:{uri:i,uid:l}})):y((0,p.io)(t,r,{after:{uri:i,uid:l}})),f(null)}}),[t,y,b,h,f,l,i]),j=n&&!o?[Lt.fl.AUDIOBOOKS]:[];return Ft(Ft({},(0,_t.A)({uri:i,id:l,allowedMimeTypesByDropPosition:(0,v.A)((0,v.A)({},ke.Nz.BEFORE,j),ke.Nz.AFTER,j),onDrop:g})),{},{onDragStart:x,draggable:u})};const zt="bg5inM_sdkHpYWiFf7Id",qt="DyW2LAm9YDcCkcdM0eeP";var Wt=["className","dropPosition","draggable"];function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt=function(){return(0,b.jsx)("div",{className:qt})},Qt=(0,a.memo)((function(e){var t=e.item,n=e.contextUri,r=e.canEdit,i=void 0!==r&&r,a=e.canRemove,s=void 0!==a&&a,l=e.index,o=Vt(t,n,i),c=o.className,u=o.dropPosition,d=o.draggable,m=(0,Ae.A)(o,Wt);return(0,b.jsxs)(Re.W,{className:c,"aria-posinset":l,reRunOnDOMUpdate:!0,children:[u===ke.Nz.BEFORE&&(0,b.jsx)(Kt,{}),(0,b.jsx)(Nt,Ht({book:t,contextUri:n,featureIdentifier:"playlist",sharingInfo:t.sharingInfo,uid:t.uid,rating:t.rating,canRemove:s,className:c,draggable:d,showSeparator:0!==l},m)),u===ke.Nz.AFTER&&(0,b.jsx)(Kt,{})]})})),Gt=n(20113);function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xt=function(e){var t=e.contextUri,n=e.initialItems,r=e.nrItems,s=e.canEdit,o=e.canRemove,c=e.ariaLabel,u=(0,a.useContext)(ce.w),d=(0,Q.v7)(),m=(0,a.useContext)(S.g).filter,p=(0,a.useContext)(E.cL).sortState,f=(0,Gt.$)(p,m).contentsOptions,v=(0,w.z1)(),x=(0,i.A)(v,2)[1],y=(0,a.useCallback)(function(){var e=(0,fe.A)(be().mark((function e(n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getContents(t,Jt(Jt({},f),{},{offset:n,limit:r}));case 2:return i=e.sent,a=i.items.map((function(e){return null===e?null:(0,ge.pW)(e)?e:null})),e.abrupt("return",Jt(Jt({},i),{},{items:a}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[u,f,t]),h=(0,he.E)({nrItems:r,fetch:y,limit:50,initialItems:n}),g=h.getItem,j=h.nrValidItems,A=h.invalidateCache;(0,a.useLayoutEffect)((function(){x(j)}),[j,x]),(0,je.H)(t,A);var R=(0,a.useCallback)((function(e){return(0,b.jsx)("div",{style:{height:e}})}),[]),k=(0,a.useCallback)((function(e,n){var r=g(e);return r?(0,b.jsx)(Qt,{contextUri:t,item:r,canEdit:s,canRemove:o,index:e},r.uri):R("".concat(n,"px"))}),[s,o,t,g,R]),C="POP"===(0,l.wQ)()?0:10;return(0,b.jsx)("div",{className:zt,children:(0,b.jsx)(xe.R,{firstInteractiveIsWrapper:!0,"aria-label":c,"aria-rowcount":j,"aria-colcount":6,children:(0,b.jsx)(Mt,{children:(0,b.jsx)(ye.M,{totalCount:j,estimatedHeight:200,renderItem:k,renderPlaceholder:R,scrollNodeRef:d,nrRowsOverscan:10,persistanceKey:t,nrInitialInView:C})})})})},Zt=n(93302),en=n(89220),tn=n(22239),nn=n(12071),rn=n(94056),an=n(22565),sn=n(15554),ln=n(86116),on=n(93697),cn=n(83086),un=n(54229),dn=n(96915),mn=n(59417),pn=n(87393),fn=n(6748),vn=n(4866),bn=n(64436),xn=n(11137),yn=n(33666),hn=n(88511),gn=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({}),jn=n(76967),An=(0,v.A)((0,v.A)((0,v.A)((0,v.A)({},gn.DOWN,(function(){return(0,b.jsx)(xn.y,{size:"small",className:jn.A.statusChangeDown})})),gn.UP,(function(){return(0,b.jsx)(yn.J,{size:"small",className:jn.A.statusChangeUp})})),gn.NEW,(function(){return(0,b.jsx)(hn.Z,{className:jn.A.notificationDot})})),gn.EQUAL,(function(){return null})),Rn=function(e){var t=e.status,n=e.number,r=An[t];return(0,b.jsxs)("div",{className:Oe()(jn.A.rowChartStatus),children:[(0,b.jsx)(o.E,{variant:"bodyMedium",children:n}),(0,b.jsx)(r,{})]})},kn=n(14936),Cn=n(1479),On=n(72786),Tn=n(57412),Pn=n(38680),Sn=n(13148),En=n(59960),wn=n(50152),In=n(93412),Nn=n(13012),Ln=n(29794),_n=n(54847),Un=a.memo((function(e){var t=e.uri,n=e.name,r=e.duration_ms,i=e.artists,a=e.album,s=e.isMOGEFRestricted,l=e.isExplicit,o=e.isPlayable,c=e.uid,u=e.index,d=e.contextUri,p=e.imgUrl,f=e.statusChange,v=e.playCount,x=e.usePlayContextItem,y=e.isCompactMode,h=(0,me.r)(en.i,{data:{position:u,reason:"",uri:t}}).spec,g=(0,Zt.w)(),j=(0,an.c)(),A=x({uid:c,uri:t,index:u}),R=A.isActive,k=A.isPlaying,C=A.triggerPlay,O=A.togglePlay,T=(0,Me.T)(t),P=(0,mn.g)(t,o),S=(0,un.b)({downloadAvailability:T,isExplicit:l,isMOGEFRestricted:s}),E=S.badges,w=S.hasBadges,I=(null==i?void 0:i.map((function(e){return e.name})).join(m.Ru.getSeparator()))||"";return(0,b.jsx)(on.pZ,{value:"row",index:u,children:(0,b.jsx)(Ne.h,{menu:(0,b.jsx)(pn.P,{uri:t,albumUri:null==a?void 0:a.uri,artists:i}),children:(0,b.jsx)(_n.w,{uri:t,contextUri:d,index:u,onTriggerPlay:function(e,t){C({loggingParams:t})},isActive:R,ariaRowIndex:u+1,isPlayable:P,ageRestricted:s,dragMetadata:{name:n,createdBy:I},allowedDropTypes:[],spec:h,isCompactMode:y,children:g.map((function(e,s){var l=e.columnType,o=e.options,c=(0,nn.y)(s,l,g);return(0,b.jsx)(c,{ariaColIndex:s,children:function(){var e;switch(l){case Ut.$.INDEX:return(0,b.jsx)(Pn.$,{uri:t,className:jn.A.rowMarkerChartStatus,playAriaLabel:m.Ru.get("tracklist.a11y.play",n,I),onClick:function(e,t){O({loggingParams:t})},isPlaying:k,isActive:R,spec:h,children:f?(0,b.jsx)(Rn,{number:u+1,status:f}):(0,b.jsx)(En.a,{children:u+1})});case Ut.$.TITLE_AND_ARTIST:case Ut.$.TITLE_AND_AUTHOR:return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Cn.e,{src:p}),(0,b.jsxs)(On.l,{children:[(0,b.jsx)(Ln.p,{titleText:n,children:n}),w&&(0,b.jsxs)(bn.P,{children:[E.download&&(0,b.jsx)(sn._,{}),E.explicit&&(0,b.jsx)(Rt.g,{}),E.nineteen&&(0,b.jsx)(ln.q,{className:jn.A.nineteen,size:16})]}),(0,b.jsx)(In.p,{children:(0,b.jsx)(vn.l,{artists:i,spec:h})})]})]});case Ut.$.TITLE:return(0,b.jsxs)(Tn.q,{children:[j?(0,b.jsx)(_e.A,{to:t,className:jn.A.rowTitle,"data-testid":"internal-track-link",children:(0,b.jsx)(Ln.p,{titleText:n,children:n})}):(0,b.jsx)(Ln.p,{titleText:n,children:n}),w&&(0,b.jsxs)(bn.P,{children:[E.download&&(0,b.jsx)(sn._,{}),E.explicit&&(0,b.jsx)(Rt.g,{}),E.nineteen&&(0,b.jsx)(ln.q,{className:jn.A.nineteen,size:16}),E.hasAssociatedVideo&&(0,b.jsx)(rn.l,{})]})]});case Ut.$.ARTIST:case Ut.$.AUTHOR:return(0,b.jsx)(Nn.Y,{children:i&&(0,b.jsx)(tn.E,{artists:i,spec:h})});case Ut.$.PLAYS:return(0,b.jsx)(wn.Y,{playcount:v});case Ut.$.ALBUM_OR_PODCAST:case Ut.$.ALBUM:return(0,b.jsx)(fn.g,{uri:a.uri,name:a.name,creatorUri:null==i||null===(e=i[0])||void 0===e?void 0:e.uri,spec:h,children:a.name});case Ut.$.DURATION:return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(dn.d,{uri:t,spec:h}),!(null!=o&&o.hideDuration)&&(0,b.jsx)(kn.P,{duration:r}),(0,b.jsx)(Sn.Y,{menu:(0,b.jsx)(pn.P,{uri:t,albumUri:null==a?void 0:a.uri,artists:i}),label:m.Ru.get("more.label.track",n,I),spec:h})]});case Ut.$.ADDED_BY:case Ut.$.ADDED_AT:case Ut.$.RELEASE_DATE:case Ut.$.ACTIONS:case Ut.$.ALBUM_OR_SHOW:case Ut.$.EVENT_DATE:case Ut.$.EVENT_INFO:case Ut.$.CONCERT_DATE:case Ut.$.CONCERT_VENUE:case Ut.$.ADD:return null;default:(0,cn.d)(l)}return null}()},"column-".concat(s))}))})})})}),(function(e,t){return e.uri===t.uri&&e.isCompactMode===t.isCompactMode})),Dn=n(49294),Mn=n(59943),Bn={column:null,order:Ut.H.NONE},Fn=a.memo((function(e){var t=e.ariaLabel,n=e.nrTracks,r=e.playlistUri,i=e.scrollToUid,s=e.usePlayContextItem,l=e.tracklistDomRef,o=e.sortableColumns,c=e.isCompactMode,u=void 0!==c&&c,d=(0,a.useContext)(ce.w),m=(0,a.useContext)(S.g),p=m.filter,f=m.setFilter,v=(0,a.useRef)(null),x=(0,a.useCallback)((function(){v.current&&v.current.update()}),[]);(0,je.H)(r,x);var y=(0,a.useContext)(E.cL),h=y.sortState,g=y.setSortState,j=(0,a.useCallback)((function(e){g((0,P.So)(e,h))}),[h,g]);(0,a.useEffect)((function(){g(Bn),f("")}),[r,f,g]),(0,a.useEffect)((function(){v.current&&i&&v.current.scrollToItem({uid:i})}),[i]);var A=(0,a.useCallback)(function(){var e=(0,fe.A)(be().mark((function e(t,n){var i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getContents(r,{offset:t,limit:n,sort:(0,P.Xt)(h),filter:p,decorateFormatListData:!0});case 2:return i=e.sent,e.abrupt("return",{items:i.items,totalLength:i.totalLength});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r,d,h,p]),R=(0,a.useCallback)((function(e,t){var n,i,a,l=(0,Mn.g)(null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40,desiredLabel:"small"});return(0,b.jsx)(Un,{index:t,contextUri:r,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:(null==l?void 0:l.url)||"",statusChange:null===(i=e.formatListAttributes)||void 0===i?void 0:i.status,playCount:parseInt((null===(a=e.formatListAttributes)||void 0===a?void 0:a.rank)||"0",10),usePlayContextItem:s,isCompactMode:u},t+e.uri)}),[r,s,u]),k=(0,Zt.w)(),C=(0,a.useCallback)((function(e){return{uri:e.uri,uid:e.uid}}),[]);return(0,b.jsx)(on.pZ,{value:"chart-tracklist",children:(0,b.jsx)(Dn.S4,{ariaLabel:t,hasHeaderRow:!0,columns:k,sortableColumns:o,sortState:h,onSort:j,renderRow:R,resolveItem:C,nrTracks:n,fetchTracks:A,limit:100,canFetchAllTracks:d.getCapabilities().canFetchAllTracks,outerRef:v,outerDomRef:l,columnPersistenceKey:"chart-tracklist",isCompactMode:u,className:jn.A.chartTrackList},r)})})),Vn=n(30278),zn=n(54168),qn=n(42931),Wn=n(50778),$n=n(59518);function Hn(e,t){return e.build().withHost(Wn.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:"playlistURI:".concat(t),limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var Kn=n(11498),Qn=n(98350);const Gn="BagEpNps_J8R2QuHRZMa",Yn="bjB8WZd0Ev30ZFbiScDm";var Jn=(0,a.memo)((function(e){var t=e.uri,n=(0,a.useContext)(Q.bi).scrollNodeRef,r=(0,Vn.Wx)({initialInView:!1,rootMargin:"128px 100%",root:n.current}),s=r.ref,l=function(e,t){var n,r=(0,$n.Z)(Hn,[e],{enabled:t,staleTime:36e5,gcTime:72e5}).data;return null==r||null===(n=r.body.content)||void 0===n?void 0:n.items}(t,r.inView),o=(0,a.useRef)(null),c=function(e){var t=(0,Qn.x)("mlt-height",300),n=(0,i.A)(t,2),r=n[0],s=n[1],l=(0,a.useCallback)((function(){var t,n=null===(t=e.current)||void 0===t||null===(t=t.getBoundingClientRect())||void 0===t?void 0:t.height;n&&s(n)}),[e,s]);return(0,Kn.w)({refOrElement:e,observeOnly:"height",onResize:l,observeOnMount:!0}),r}(o);return 0===(null==l?void 0:l.length)?null:(0,b.jsx)("div",{className:Gn,style:{"--last-height":"".concat(c,"px")},ref:s,children:l&&(0,b.jsx)(qn.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:m.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:l.length,elementRef:o,className:Yn,children:l.map((function(e,t){var n,r;return(0,b.jsx)(zn.B,{index:t,uri:e.uri,name:e.name,authorName:null!==(n=null===(r=e.owner)||void 0===r?void 0:r.display_name)&&void 0!==n?n:null,description:null,images:e.images},e.uri)}))})})})),Xn=n(10139),Zn=n(93655),er=n(10539),tr=n(4717),nr=n(24380),rr=n(30023),ir=n(83834),ar=n(4414),sr=n(79278),lr=function(){return null},or=function(){return!1},cr=n(44671),ur=n(10644),dr=n(73005),mr=n(93974),pr=n(29158),fr=n(74444),vr=n(97371),br=n(85614),xr={bottomEnd:br.dw.topStart,top:br.dw.bottom},yr=function(e){var t=e.visible,n=e.onHide,r=e.placement,i=e.children,a=e.label,s=(0,c.NC)(pe.rW);return(0,b.jsx)(fr.W,{placement:r,withPortal:!0,overlay:t&&(0,b.jsx)("div",{className:Oe()({"circular-sp-vietnamese":s}),children:(0,b.jsx)(vr.A,{arrow:xr[r],colorSet:"announcement",onClose:n,children:a})}),children:i})},hr=n(24964),gr=n(18098),jr=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(jr||{}),Ar=function(e){var t=e.uri,n=e.label,r=e.onClick,i=e.size,a=void 0===i?jr.md:i,s=(0,gr.J)({uri:t,permissionLevel:"CONTRIBUTOR"}).onCopyLink,l=(0,hr.R)(),o=l.toggleActivationVisible,c=l.setToggleActivationVisible;return(0,b.jsx)(yr,{visible:o,onHide:function(){return c(!1)},label:m.Ru.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,b.jsx)(pr.Zp,{label:n,children:(0,b.jsx)(dr.H,{onClick:function(e){null==r||r(e),null==s||s()},iconOnly:mr.h,size:a,"aria-hidden":"true","aria-label":n,condensed:!0})})})},Rr=n(67161),kr=n(89457),Cr=n(75592),Or=a.memo((function(e){var t=e.metadata,n=e.tracklistDomRef,i=e.sortableColumns,s=t.hasSpotifyAudiobooks||!1,l=(0,me.r)(Rr.E,{}),o=l.spec,c=l.logger,u=(0,a.useCallback)((function(){c.logInteraction(o.filterFieldFactory().keyStrokeFilter())}),[c,o]),d=(0,a.useCallback)((function(){c.logInteraction(o.filterFieldFactory().hitClearFilter())}),[c,o]);return(0,b.jsxs)("div",{className:T.A.searchBoxContainer,children:[(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(kr.S,{placeholder:m.Ru.get("playlist.search_in_playlist"),onFilter:u,onClear:d,clearOnEscapeInElementRef:n})}),(0,b.jsx)(Cr.d,{columns:(0,r.A)(i),isBooklist:s})]})})),Tr=n(80847),Pr=n(44690),Sr=a.memo((function(e){var t=e.playlist,n=e.capabilities,r=e.spec,s=e.isPlaying,l=e.isActive,o=e.togglePlay,u=e.isBooklist,d=e.isConcert,p=void 0!==d&&d,f=e.backgroundColor,v=e.tracklistDomRef,x=e.sortableColumns,y=t.metadata,h=y.uri,g=y.name,j=y.unfilteredTotalLength,A=y.isOwnedBySelf,R=y.canPlay,k=y.isPublished,C=y.totalLength,O=(0,D.n)(),P=(0,Ke.s)(),S=(0,a.useMemo)((function(){return r.shuffleButtonContainerFactory()}),[r]),E=n.canFilter&&j>0,w=n.canSort&&j>0,I=j>0,N=(0,c.NC)(H.McC,{loadingValue:!1}),L=(0,Pr.X)(),_=or({isOwnedBySelf:A,numberOfTracks:C}),M=(0,Ue.A)(h),B=(0,i.A)(M,2),F=B[0],V=B[1],z=(0,U.W)(),q=(0,a.useCallback)((0,fe.A)(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z({targetUri:h,intent:F?"unsave":"save",type:"click"}),e.prev=1,e.next=4,V(!F);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])}))),[F,z,V,h]),W=(0,a.useCallback)((function(){var e=r.shareButtonFactory().hitShare({entityToBeShared:h,shareId:""});P.logInteraction(e)}),[r,P,h]),K=(0,a.useCallback)((function(){var e,t=r.heartButtonFactory();e=F?t.hitUnfollow({itemToBeUnfollowed:h}):t.hitFollow({itemToBeFollowed:h}),P.logInteraction(e),q()}),[r,q,F,P,h]),Q=(0,cr.j)(),G=E&&w;return(0,b.jsx)(Xn.E,{backgroundColor:f,children:(0,b.jsxs)(Zn.S,{children:[R&&!u?(0,b.jsx)(ir.D,{onClick:o,isPlaying:s,size:Q,uri:h,ariaPlayLabel:m.Ru.get("playlist.a11y.play",g),ariaPauseLabel:m.Ru.get("playlist.a11y.pause",g)}):null,L&&C>0&&!u&&(0,b.jsx)(ur.r,{spec:S,children:(0,b.jsx)(sr.Y,{shuffleContext:Tr.b.playlistActionBar,entityName:g,contextUri:h,isActive:l,activationPlacement:"bottomEnd",size:Q})}),A?null:(0,b.jsx)(nr.e,{children:(0,b.jsx)(Ge.M,{isAdded:!!F,onClick:K,size:Q})}),!u&&(0,b.jsx)(er.f,{uri:h,isFollowing:!!F,canDownload:I,onClick:function(e,t){return(0,$.Qv)(t,r.downloadButtonFactory(),P,h)},onFollow:q,size:Q}),(0,b.jsx)(rr.u,{property:H.G6N,renderNewExperience:function(){var e;return null!==(e=t.metadata.permissions)&&void 0!==e&&e.canAdministratePermissions&&O&&(!u||N)?(0,b.jsx)(Ar,{onClick:W,label:m.Ru.get("permissions.invite-collaborators",g),uri:h,size:Q}):null}}),(p||u)&&(0,b.jsx)(Xe.w,{uri:h,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:p?"concerts-near-you/share":"booklist/share"},onClick:W,size:Q}),_&&(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(lr,{uri:h})}),(0,b.jsx)(Ie.b,{onShow:function(){return(0,$.R2)(r,P)},menu:(0,b.jsx)(tr.W,{uri:h,isPublished:k}),children:(0,b.jsx)(Je.e,{label:m.Ru.get("more.label.context",g),size:Q})}),G?(0,b.jsx)(ur.r,{spec:r,children:(0,b.jsx)(Or,{metadata:t.metadata,tracklistDomRef:v,sortableColumns:x})}):(0,b.jsx)("div",{className:T.A.leadingSlot,children:(0,b.jsx)(rr.u,{property:H.mA2,renderNewExperience:function(){return(0,b.jsx)(ar.g,{options:[],onSelect:function(){},selected:null,enableViewModeMenu:!0})}})})]})})})),Er=n(64508),wr=n(69798),Ir=function(e){var t=(0,Ke.s)(),n=(0,a.useMemo)((function(){return e.spec.promoCardFactory()}),[e.spec]),r=(0,wr.t)(n);return(0,b.jsxs)("div",{className:T.A.concertsFooter,children:[(0,b.jsx)(_e.A,{to:"/concerts",className:T.A.ctaLink,onClick:function(){var e=n.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,b.jsxs)("div",{className:T.A.promoRow,ref:r,children:[(0,b.jsx)(o.E,{as:"h2",variant:"bodyMediumBold",className:T.A.promoTitle,children:m.Ru.get("concerts.find_more")}),(0,b.jsx)(Er.v,{as:"span",selected:!0,children:m.Ru.get("concerts.find_nearby")}),(0,b.jsx)("img",{className:T.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,b.jsx)("div",{className:T.A.disclaimerContainer,children:(0,b.jsx)(o.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:m.Ru.get("concerts_near_you.playlist_disclaimer")})})]})},Nr=n(74706),Lr=n(45089),_r=n(72671),Ur=(n(41669),n(22058)),Dr="multiUserAttributionDisplayNamesV2";function Mr(e){return(0,ge.Jy)(e)||(0,ge.xp)(e)}function Br(e){return(0,ge.Jy)(e)||(0,ge.xp)(e)||(0,ge.pW)(e)}var Fr=a.memo((function(e){var t=e.ariaLabel,n=e.nrTracks,l=e.playlistUri,o=e.playlistName,u=e.isMixedMedia,f=e.isLive,v=e.isBlend,x=e.isConcert,y=e.isBooklist,h=e.canEdit,g=e.scrollToUid,j=e.feedbackPath,A=e.deleteFeedbackPath,R=e.usePlayContextItem,k=e.tracklistRef,C=e.tracklistDomRef,O=e.canRemove,T=e.spec,I=e.initialItems,N=e.isCompactMode,L=void 0!==N&&N,_=e.sortableColumns,U=e.hasSpotifyAudiobooks,D=(0,Ke.s)(),M=(0,c.NC)(H.LX5),B=(0,a.useContext)(ce.w),F=(0,a.useContext)(S.g).filter,V=(0,a.useContext)(E.cL),z=V.sortState,q=V.setSortState,W=(0,a.useRef)((function(){})),$=(0,a.useState)([]),K=(0,i.A)($,2),Q=K[0],G=K[1],Y=(0,s.wA)(),J=(0,Zt.w)(),X=(0,a.useCallback)((function(){null!=k&&k.current&&k.current.update()}),[k]);(0,je.H)(l,X);var Z=(0,a.useCallback)((function(e,t){q((0,P.So)(e,z)),D.logInteraction(T.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[q,z,D,T]),ee=(0,a.useCallback)((function(e){W.current(),B.remove(l,e)}),[B,l]),te=(0,a.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];O&&(W.current=t,e.length>1&&!n?G(e):ee(e))}),[O,ee]);(0,a.useEffect)((function(){null!=k&&k.current&&g&&k.current.scrollToItem({uid:g})}),[g,k]);var ne=(0,a.useCallback)(function(){var e=(0,fe.A)(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getContents(l,{offset:t,limit:n,sort:(0,P.Xt)(z),filter:F,decorateFormatListData:!!j||f||v});case 2:return r=e.sent,e.abrupt("return",{items:r.items,totalLength:r.totalLength});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[l,B,z,F,j,f,v]),re=(0,a.useCallback)((function(e,t,n){if(null!=k&&k.current){var r=k.current.getRows()[t];r&&(D.logInteraction(T.dragSort()),n===_n.Y.Before?B.move(l,e,{before:r}):B.move(l,e,{after:r}))}}),[k,D,T,B,l]),ie=(0,a.useCallback)((function(e,t,n){if(null!=k&&k.current){var r=k.current.getRows()[t];r&&(D.logInteraction(T.dragAddToPlaylist({playlist:l,itemToBeAdded:e[0]})),n===_n.Y.Before?Y((0,p.io)(l,e,{before:{uri:r.uri,uid:r.uid}})):Y((0,p.io)(l,e,{after:{uri:r.uri,uid:r.uid}})))}}),[k,D,T,l,Y]),ae=(0,a.useCallback)((function(e,t){var n,i,a,s,c,m,p,f,g,k,C,T,P,S=null;if((0,ge.xp)(e))S=e.show,T=e.images.concat((null===(P=e.show)||void 0===P?void 0:P.images)||[]);else if((0,ge.Jy)(e)){var E;S=e.album,T=null===(E=e.album)||void 0===E?void 0:E.images}else(0,ge.pW)(e)&&(T=e.images);var w=(0,Mn.g)(T,{desiredSize:40,desiredLabel:"small"}),I=[];h&&z.order===Ut.H.NONE&&(I=y?[Lt.fl.AUDIOBOOKS]:[Lt.fl.TRACKS,Lt.fl.LOCAL_TRACKS,Lt.fl.EPISODES].concat((0,r.A)(U?[Lt.fl.AUDIOBOOKS]:[])));var N="1"===(null==e||null===(n=e.formatListAttributes)||void 0===n?void 0:n["dislike-feedback-selected"]),_=!!(0,ge.xp)(e)&&e.podcastSubscription.isUserSubscribed,D=!1;(0,ge.xp)(e)&&e.podcastSubscription.isPaywalled&&!_?D=!0:Mr(e)?D=e.isPlayable&&!N:(0,ge.pW)(e)&&(D=!0);var F=!1;(0,ge.xp)(e)&&e.podcastSubscription.isPaywalled?F=!0:(0,ge.pW)(e)&&(F=e.isLocked&&!e.isOutOfMarket);var V=v&&function(e,t){var n,r,i,a,s=[];if(!t)return s;var l=t[Dr]?Dr:"multiUserAttributionDisplayNames",o=null==t||null===(n=t[l])||void 0===n?void 0:n.split(","),c=null==t||null===(r=t.multiUserAttributionImages)||void 0===r?void 0:r.split(",");if(!o||!c)return s;for(var u,m=(null==t||null===(i=t.multiUserAttributionUsernamesV2)||void 0===i?void 0:i.split(","))||[],p=(null==t||null===(a=t.multiUserAttributionType)||void 0===a?void 0:a.split(","))||[],f=o.length,v=0;v<f;v++){var b=m[v],x=b&&(0,d.Qj)(b).toURI();s.push({username:b,uri:x,displayName:o[v],images:(u=c[v],u.length>1?[{url:u}]:[]),recsplanation:p[v]})}return s.sort((function(t,n){return t.username?t.username===(null==e?void 0:e.username)?-1:n.username===(null==e?void 0:e.username)?1:0:0}))}(e.addedBy,null==e?void 0:e.formatListAttributes)||e.addedBy&&[e.addedBy]||[],q=0;Mr(e)?q=e.duration.milliseconds:(0,ge.pW)(e)&&(q=e.durationMs||0);var W="";return Br(e)&&(W=e.name),(0,b.jsx)(_r.W,{isCompactMode:L,index:t,playIndex:null!==(i=e.playIndex)&&void 0!==i?i:void 0,contextUri:l,uri:e.uri,uid:e.uid,isPlayable:D,duration_ms:q,isPaywalled:F,isUserSubscribed:_,name:W,artists:(0,ge.Jy)(e)?e.artists:void 0,albumOrShow:S,isExplicit:null!==(a=Br(e)&&e.isExplicit)&&void 0!==a&&a,hasAssociatedVideo:null!==(s=(0,ge.Jy)(e)&&e.hasAssociatedVideo&&M)&&void 0!==s&&s,isMixedMedia:u,isLocal:(0,ge.Jy)(e)&&e.isLocal,addedBy:V,hasDecoratedAddedBy:B.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,ge.xp)(e)&&e.release.date||"",isMOGEFRestricted:((0,ge.Jy)(e)||(0,ge.xp)(e))&&e.is19PlusOnly,type:e.type,imgUrl:(null==w?void 0:w.url)||"",onMove:re,onInsert:ie,usePlayContextItem:R,allowedDropTypes:I,feedbackPath:j,feedbackUri:null==e||null===(c=e.formatListAttributes)||void 0===c?void 0:c.feedback_uri,deleteFeedbackPath:A,isDisliked:N,isBlend:v,ticketingSiteURL:null==e||null===(m=e.formatListAttributes)||void 0===m?void 0:m.ticketingSite,eventDate:null==e||null===(p=e.formatListAttributes)||void 0===p?void 0:p.eventDate,canRemove:O,playlistName:o,isConcert:x,concertsCount:null===(f=e.formatListAttributes)||void 0===f?void 0:f.concerts_count,concertURI:null===(g=e.formatListAttributes)||void 0===g?void 0:g.target_uri,concertDate:null===(k=e.formatListAttributes)||void 0===k?void 0:k.first_concert_date,concertVenue:null===(C=e.formatListAttributes)||void 0===C?void 0:C.first_concert_venue,authorName:(0,ge.pW)(e)?e.authorName:"",isOutOfMarket:!!(0,ge.pW)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,ge.pW)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:h},t+e.uri)}),[h,y,z.order,v,L,l,M,u,B,re,ie,R,j,A,O,o,x,U]),se=(0,a.useCallback)((function(e){return{uri:e.uri,uid:e.uid,type:e.type}}),[]),le=(0,w.z1)(),oe=(0,i.A)(le,2)[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(on.pZ,{value:"playlist-tracklist",children:(0,b.jsx)(Dn.S4,{isCompactMode:L,testID:"playlist-tracklist",ariaLabel:t,hasHeaderRow:!0,columns:J,sortableColumns:_,sortState:z,onSort:Z,onRemove:te,renderRow:ae,resolveItem:se,nrTracks:n,fetchTracks:ne,limit:100,canFetchAllTracks:B.getCapabilities().canFetchAllTracks,outerRef:k,outerDomRef:C,tracks:I,isConcertPlaylist:x,onNrValidItemsChange:oe,columnPersistenceKey:"playlist-tracklist"},l)}),(0,b.jsx)(Lr.F,{title:m.Ru.get("playlist.remove_from_playlist",o),isOpen:Q.length>0,tracks:Q,onClose:function(e){e.stopPropagation(),G([])},onRemove:ee})]})})),Vr=n(21453),zr=n(90441),qr=n(95212),Wr=n(73547),$r=n(39261),Hr=n(48433),Kr=n(67281),Qr=new Kr.l("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),Gr=new Kr.l("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),Yr=new Kr.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),Jr=new Kr.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null),Xr=n(11374);function Zr(e){var t,n,r,i,a,s,l,o,c,u,d,p,f;return{type:Ur.c.AUDIOBOOK,uri:e.uri,name:e.name,description:null!==(t=e.htmlDescriptionPlain)&&void 0!==t?t:"",authorName:(null===(n=e.authors)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.name})).join(m.Ru.getSeparator()))||"",images:null!==(r=null===(i=e.coverArt)||void 0===i?void 0:i.sources)&&void 0!==r?r:[],isLocked:(0,Xr.e$)(e.accessInfo),isExplicit:(null===(a=e.contentRating)||void 0===a?void 0:a.label)===He.x7.Explicit,durationMs:null!==(s=null===(l=e.duration)||void 0===l?void 0:l.totalMilliseconds)&&void 0!==s?s:0,topics:(null===(o=e.genres)||void 0===o?void 0:o.map((function(e){return{uri:e.destinationUri,title:e.contextualName}})))||[],signifierText:null!==(c=null===(u=e.accessInfo)||void 0===u||null===(u=u.signifier)||void 0===u?void 0:u.text)&&void 0!==c?c:"",rating:{average:null!==(d=null===(p=e.rating)||void 0===p||null===(p=p.averageRating)||void 0===p?void 0:p.average)&&void 0!==d?d:0,showAverage:!(null===(f=e.rating)||void 0===f||null===(f=f.averageRating)||void 0===f||!f.showAverage)},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var ei=n(64526),ti=n(31906),ni=n(22084),ri=n(98414);function ii(e,t){var n,r,i,a,s,l,o,c,u,d,m,p,f,v,b,x;return{albums:null!==(b=e.albumsV2,x=null==b?void 0:b.items.filter((function(e){return"AlbumResponseWrapper"===e.__typename})),n=(null!=x?x:[]).map((function(e){return si(e)})).filter(ri.P)||[])&&void 0!==n?n:[],artists:null!==(f=e.artists,r=(null!==(v=null==f?void 0:f.items)&&void 0!==v?v:[]).map((function(e){return li(e)})).filter(ri.P)||[])&&void 0!==r?r:[],episodes:null!==(m=e.episodes,i=(null!==(p=null==m?void 0:m.items)&&void 0!==p?p:[]).map((function(e){return oi(e)})).filter(ri.P)||[])&&void 0!==i?i:[],tracks:null!==(u=e.tracksV2,a=(null!==(d=null==u?void 0:u.items)&&void 0!==d?d:[]).map((function(e){return ui(e.item)})).filter(ri.P)||[])&&void 0!==a?a:[],topResults:null!==(l=e.topResultsV2,c=null!==(o=null==l?void 0:l.itemsV2)&&void 0!==o?o:[],s=c.map((function(e){var t=(0,ti.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return si(t);case"ArtistResponseWrapper":return li(t);case"EpisodeResponseWrapper":return oi(t);case"TrackResponseWrapper":return ui(t);default:return(0,cn.k)(t),null}})).filter(ri.P)||[])&&void 0!==s?s:[],query:t}}function ai(e){return{type:Ur.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,ni.r)(e.coverArt)}}function si(e){return"Album"!==e.data.__typename?null:ai(e.data)}function li(e){if("Artist"!==e.data.__typename)return null;var t=e.data;return{type:Ur.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,ni.r)(t.visuals.avatarImage)}}function oi(e){var t,n;if("Episode"!==e.data.__typename)return null;var r=e.data,i=r.podcastV2.data;return"Podcast"!==i.__typename?null:{type:Ur.c.EPISODE,uri:r.uri,id:r.id,name:r.name,images:(0,ni.r)(r.coverArt),isExplicit:(null===(t=r.contentRating)||void 0===t?void 0:t.label)===ei.x7.Explicit,is19PlusOnly:(null===(n=r.contentRating)||void 0===n?void 0:n.label)===ei.x7.NineteenPlus,podcast:{id:i.id,uri:i.uri,name:i.name},isPlayable:r.playability.playable}}function ci(e){var t,n,r,i,a,s,l,o=(0,ni.r)((null===(t=e.albumOfTrack)||void 0===t?void 0:t.coverArt)||null);return{type:Ur.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:(null===(n=e.albumOfTrack)||void 0===n?void 0:n.name)||"",uri:(null===(r=e.albumOfTrack)||void 0===r?void 0:r.uri)||"",imgUrl:(null===(i=o.at(0))||void 0===i?void 0:i.url)||"",id:(null===(a=e.albumOfTrack)||void 0===a?void 0:a.id)||""},artists:e.artists.items.map((function(e){return{id:e.id,name:e.profile.name,uri:e.uri}})),isPlayable:e.playability.playable,isExplicit:(null===(s=e.contentRating)||void 0===s?void 0:s.label)===ei.x7.Explicit,is19PlusOnly:(null===(l=e.contentRating)||void 0===l?void 0:l.label)===ei.x7.NineteenPlus}}function ui(e){return"Track"!==e.data.__typename?null:ci(e.data)}function di(e){var t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((function(e){return ci(e.track)}))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,cn.k)(t),null}}function mi(e){var t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((function(e){return ai(e)}))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((function(e){return ci(e.track)}))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,cn.k)(t),null}}function pi(e,t){var n,r,i,a;return{albums:[],artists:[],episodes:[],tracks:[],topResults:null!==(r=e.topResultsV2,a=null!==(i=null==r?void 0:r.itemsV2)&&void 0!==i?i:[],n=a.map((function(e){var t=(0,ti.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?Zr(t.data):null})).filter(ri.P)||[])&&void 0!==n?n:[],query:t}}var fi=function(){var e=(0,fe.A)(be().mark((function e(t,n,r){var i,a,s,l,o,c,u,d=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={term:n,offset:d.length>3&&void 0!==d[3]?d[3]:0,limit:d.length>4&&void 0!==d[4]?d[4]:10,numberOfTopResults:d.length>5&&void 0!==d[5]?d[5]:10},!r){e.next=12;break}return e.next=7,t(Gr,a);case 7:if(l=e.sent,o=null==l||null===(s=l.data)||void 0===s?void 0:s.searchV2){e.next=11;break}return e.abrupt("return",null);case 11:return e.abrupt("return",pi(o,n));case 12:return e.next=14,t(Qr,a);case 14:if(c=e.sent,u=null==c||null===(i=c.data)||void 0===i?void 0:i.searchV2){e.next=18;break}return e.abrupt("return",null);case 18:return e.abrupt("return",ii(u,n));case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),vi=function(){var e=(0,fe.A)(be().mark((function e(t,n){var r,i,a,s,l=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uris:[n],limit:l.length>2&&void 0!==l[2]?l[2]:50,offset:l.length>3&&void 0!==l[3]?l[3]:0},e.next=5,t(Yr,i);case 5:if(a=e.sent,s=null==a||null===(r=a.data)||void 0===r?void 0:r.albums){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",di(s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),bi=function(){var e=(0,fe.A)(be().mark((function e(t,n){var r,i,a,s,l=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uris:[n],limit:l.length>2&&void 0!==l[2]?l[2]:50,offset:l.length>3&&void 0!==l[3]?l[3]:0},e.next=5,t(Jr,i);case 5:if(a=e.sent,s=null==a||null===(r=a.data)||void 0===r?void 0:r.artists){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",mi(s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hi=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({}),gi=function(e,t){return"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e=yi(yi({},e),{},{breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}):"NAV_TO_ENTITY"===t.type?e=yi(yi({},e),{},{breadcrumbs:[].concat((0,r.A)(e.breadcrumbs),[t.level])}):("NAV_TO_RESULTS"===t.type?e=yi(yi({},e),{},{breadcrumbs:[].concat((0,r.A)(e.breadcrumbs),[t.level])}):"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:hi.SEARCH,term:t.term,title:""}]}),e)},ji=n(76285);const Ai="playlist-inlineSearchBox-filterInputContainer",Ri="playlist-inlineSearchBox-filterInput",ki="playlist-inlineSearchBox-overlay",Ci="playlist-inlineSearchBox-searchIconContainer",Oi="playlist-inlineSearchBox-searchIcon",Ti="playlist-inlineSearchBox-clearButton";var Pi=a.memo((function(e){var t=e.placeholder,n=e.onChange,r=void 0===n?function(){}:n,s=e.onFocus,l=void 0===s?function(){}:s,c=(0,a.useState)(""),u=(0,i.A)(c,2),d=u[0],p=u[1],f=(0,a.useRef)(null),v=(0,B.YQ)((function(e){r(e)}),200),x=(0,a.useCallback)((function(e){var t=e.currentTarget.value;p(t),v(t)}),[p,v]),y=(0,a.useCallback)((function(){f.current&&f.current.focus(),p(""),r("")}),[p,r]),h=(0,a.useCallback)((function(e){"Escape"===e.key&&d&&y()}),[d,y]);return(0,b.jsxs)("div",{className:Ai,role:"search",children:[(0,b.jsx)(o.E,{as:"input",variant:"bodySmall",ref:f,className:Oe()(Ri),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:t,onChange:x,onKeyDown:h,onFocus:l,value:d}),(0,b.jsxs)("div",{className:ki,children:[(0,b.jsx)("span",{className:Ci,children:(0,b.jsx)(ji.C,{size:"small",className:Oi,"aria-hidden":"true"})}),d&&(0,b.jsx)("button",{className:Ti,onClick:y,"aria-label":m.Ru.get("search.a11y.clear-input"),children:(0,b.jsx)(zr.M,{size:"small"})})]})]})})),Si=(n(82399),n(6024)),Ei=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Dn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Si.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Ut.$.TITLE_AND_ARTIST,Ut.$.ALBUM,Ut.$.ADD]})},wi=function(e){var t=e.renderRow,n=e.searchResults,r=n.filter((function(e){return e.type===Ur.c.TRACK})),i=n.filter((function(e){return e.type===Ur.c.ALBUM}));return(0,b.jsxs)("div",{children:[(0,b.jsx)(o.E,{as:"p",variant:"bodyMediumBold",className:T.A.artistResultListTitle,children:m.Ru.get("playlist.curation.popular_songs")}),(0,b.jsx)(Dn.S4,{ariaLabel:m.Ru.get("playlist.curation.popular_songs"),renderRow:t,rowPlaceholder:Si.qq,nrTracks:r.length,tracks:r,resolveItem:function(e){return{uri:e.uri}},columns:[Ut.$.TITLE_AND_ARTIST,Ut.$.ALBUM,Ut.$.ADD]}),(0,b.jsx)(o.E,{as:"p",variant:"bodyMediumBold",className:T.A.artistResultListTitle,children:m.Ru.get("playlist.curation.albums")}),(0,b.jsx)(Dn.S4,{ariaLabel:m.Ru.get("playlist.curation.albums"),renderRow:t,rowPlaceholder:Si.qq,nrTracks:i.length,tracks:i,resolveItem:function(e){return{uri:e.uri}},columns:[Ut.$.TITLE_AND_ARTIST,Ut.$.ALBUM,Ut.$.ADD]})]})},Ii=function(e){var t=e.renderRow,n=e.searchResults,r=e.renderSeeAllRow,i=e.seeAllXList;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Dn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Si.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Ut.$.TITLE_AND_ARTIST,Ut.$.ALBUM,Ut.$.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,b.jsx)(Dn.S4,{ariaLabel:m.Ru.get("search.title.all"),renderRow:r,rowPlaceholder:Si.qq,nrTracks:i.length,tracks:i,resolveItem:function(e){return{uri:e.uri}},columns:[Ut.$.TITLE_AND_ARTIST,Ut.$.ALBUM,Ut.$.ADD],testID:"playlist-inline-curation-see-all-options"})]})},Ni=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Dn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Si.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Ut.$.TITLE_AND_ARTIST,Ut.$.ALBUM,Ut.$.ADD]})},Li=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Dn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Si.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Ut.$.TITLE_AND_ARTIST,Ut.$.ALBUM,Ut.$.ADD]})},_i=function(e){var t=e.renderRow,n=e.searchResults;return(0,b.jsx)(Dn.S4,{ariaLabel:m.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:Si.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Ut.$.TITLE_AND_ARTIST,Ut.$.ALBUM,Ut.$.ADD]})},Ui=n(29622),Di=n(90100);const Mi="G2t3w2AAeb5OXp0_GeWs",Bi="saVjTFMyWYUz975_tkQm",Fi="thi8fNCkEhutRkDC90c0",Vi="pHVlkChuJpEnBQyU3ADv",zi="ENWs3JxcqtD98_8fbPz2",qi="L8IUKEJL6JiTyE_qUVCc",Wi="XcyjdXgsNX0DBt72tfiD",$i="VhJnuS7UcUPfIlzD8dlU",Hi="He29vQ5anFj_bJ5iEaI2";var Ki=function(e){var t,n=e.searchResult,r=e.index,i=e.isRTL,a=e.onClick,s=null===(t=n.images.at(0))||void 0===t?void 0:t.url;return(0,b.jsx)(Di.$,{className:zi,rowIndex:r,"aria-selected":!1,children:(0,b.jsxs)("div",{"aria-label":"".concat(m.Ru.get("artist-page.tracks.seemore")," ").concat(n.name),className:Hi,onClick:a,children:[(0,b.jsxs)(Ui.T,{columnIndex:0,className:qi,children:[void 0!==s?(0,b.jsx)("img",{className:Fi,src:s,alt:n.name}):null,(0,b.jsxs)("div",{className:Wi,children:[(0,b.jsx)(o.E,{as:"p",className:Vi,variant:"bodyMedium",children:n.name}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("album")})]})]}),(0,b.jsx)(Ui.T,{columnIndex:1}),(0,b.jsx)(Ui.T,{columnIndex:2,children:(0,b.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(n.name),className:$i,onClick:a,children:i?(0,b.jsx)(Wr.g,{}):(0,b.jsx)(qr.V,{})})})]})})},Qi=n(74948),Gi=function(e){var t=e.size;return(0,b.jsx)("div",{className:Bi,children:(0,b.jsx)(Qi.r,{size:t})})},Yi=function(e){var t,n=e.searchResult,r=e.index,i=e.isRTL,a=e.onClick,s=null===(t=n.images.at(0))||void 0===t?void 0:t.url;return(0,b.jsx)(Di.$,{className:zi,rowIndex:r,"aria-selected":!1,children:(0,b.jsxs)("div",{"aria-label":"".concat(m.Ru.get("artist-page.tracks.seemore")," ").concat(n.name),className:Hi,onClick:a,"data-testid":"playlist-inline-curation-artist",children:[(0,b.jsxs)(Ui.T,{columnIndex:0,className:qi,children:[void 0!==s?(0,b.jsx)("img",{className:Mi,src:s,alt:n.name}):(0,b.jsx)(Gi,{size:"small"}),(0,b.jsxs)("div",{className:Wi,children:[(0,b.jsx)(o.E,{as:"p",className:Vi,variant:"bodyMedium",children:n.name}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("artist")})]})]}),(0,b.jsx)(Ui.T,{columnIndex:1}),(0,b.jsx)(Ui.T,{columnIndex:2,children:(0,b.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(n.name),className:$i,onClick:a,children:i?(0,b.jsx)(Wr.g,{}):(0,b.jsx)(qr.V,{})})})]})})},Ji=n(53485),Xi=n(5340),Zi=n(81472),ea=n(39240),ta=n(70252),na=a.memo((function(e){var t=e.uid,n=e.uri,r=e.isPlayable,i=e.isMOGEFRestricted,s=e.isExplicit,l=e.contextUri,o=e.name,c=e.imgUrl,u=e.index,d=e.podcast,p=e.usePlayContextItem,f=(0,a.useMemo)((function(){return l.replace("internal:recs:","")}),[l]),v=(0,U.W)(),x=(0,Fe.x)(f).addItems,y=p({uid:t,uri:n,index:u}),h=y.isActive,g=y.isPlaying,j=y.triggerPlay,A=y.togglePlay,R=(0,a.useCallback)((function(){x([n],{after:"end"}),v({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:f})}),[x,n,v,f]),k=(0,Me.T)(n),C=(0,mn.g)(n,r),O=(0,un.b)({downloadAvailability:k,isExplicit:s,isMOGEFRestricted:i}),T=O.badges,P=O.hasBadges;return(0,b.jsx)(on.pZ,{value:"row",index:u,children:(0,b.jsx)(Ne.h,{menu:(0,b.jsx)(Ji.b,{uri:n,contextUri:l}),children:(0,b.jsxs)(_n.w,{uri:n,contextUri:n,isPlayable:C,onTriggerPlay:function(){j()},isActive:h,ageRestricted:i,index:u,ariaRowIndex:u,dragMetadata:{name:o,createdBy:d.name},children:[(0,b.jsxs)(ea.U,{ariaColIndex:0,children:[(0,b.jsx)(Xi.u,{uri:n,src:c,onClick:function(){A()},isLocked:!1,isPlaying:g,isActive:h,isEpisode:!0,playAriaLabel:m.Ru.get("tracklist.a11y.play",o,d.name)}),(0,b.jsxs)(On.l,{children:[(0,b.jsx)(Ln.p,{titleText:o,children:o}),P&&(0,b.jsxs)(bn.P,{children:[T.download&&(0,b.jsx)(sn._,{}),T.explicit&&(0,b.jsx)(Rt.g,{}),T.nineteen&&(0,b.jsx)(ln.q,{className:jn.A.nineteen,size:16})]})]})]}),(0,b.jsx)(ta.o,{ariaColIndex:1,children:(0,b.jsx)(fn.g,{uri:d.uri,name:d.name,children:d.name})}),(0,b.jsx)(Zi.l,{ariaColIndex:2,children:(0,b.jsx)(Pe.n,{size:"small",onClick:R,children:m.Ru.get("playlist.extender.button.add")})})]})})})}),(function(e,t){return e.uid===t.uid&&e.uri===t.uri&&e.index===t.index})),ra=function(e){var t,n,r=e.episode,i=e.contextUri,a=e.index,s=e.usePlayContextItem;return(0,b.jsx)(na,{uid:r.id,uri:r.uri,isPlayable:r.isPlayable,isMOGEFRestricted:r.is19PlusOnly,isExplicit:r.isExplicit,contextUri:i,name:r.name,imgUrl:null!==(t=null===(n=r.images.at(0))||void 0===n?void 0:n.url)&&void 0!==t?t:"",index:a,podcast:r.podcast,usePlayContextItem:s})},ia=function(e){var t=e.label,n=e.index,r=e.isRTL,i=e.onClick;return(0,b.jsx)(Di.$,{className:zi,rowIndex:n,"aria-selected":!1,children:(0,b.jsxs)("div",{"aria-label":t,className:Hi,onClick:i,children:[(0,b.jsx)(Ui.T,{columnIndex:0,className:qi,children:(0,b.jsx)(o.E,{as:"p",className:Vi,variant:"bodyMedium",children:t})}),(0,b.jsx)(Ui.T,{columnIndex:1}),(0,b.jsx)(Ui.T,{columnIndex:2,children:(0,b.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":t,className:$i,onClick:i,children:r?(0,b.jsx)(Wr.g,{}):(0,b.jsx)(qr.V,{})})})]})})},aa=a.memo((function(e){var t,n=e.uid,r=e.uri,i=e.name,s=e.imgUrl,l=e.artists,o=e.isExplicit,c=e.index,u=e.album,d=e.contextUri,p=e.isPlayable,f=e.isMOGEFRestricted,v=e.usePlayContextItem,x=e.durationMs,y=e.shouldRenderDuration,h=e.internalLink,g=(0,me.r)(en.i,{data:{position:c,reason:"",uri:r}}),j=g.spec,A=g.logger,R=(0,a.useMemo)((function(){return d.replace("internal:recs:","")}),[d]),k=(0,U.W)(),C=(0,Fe.x)(R).addItems,O=v({uid:n,uri:r,index:c}),T=O.isActive,P=O.isPlaying,S=O.triggerPlay,E=O.togglePlay,w=(0,a.useCallback)((function(){A.logInteraction(j.addButtonFactory().hitAddToPlaylist({playlist:R,itemToBeAdded:r})),C([r],{after:"end"}),k({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:R})}),[A,j,R,r,C,k]),I=(0,Me.T)(r),N=(0,mn.g)(r,p),L=l.map((function(e){return e.name})).join(m.Ru.getSeparator()),_=(0,un.b)({downloadAvailability:I,isExplicit:o,isMOGEFRestricted:f}),D=_.badges,M=_.hasBadges,B=y&&x,F=l.map((function(e){return e.name})).join(m.Ru.getSeparator()),V=(0,an.c)();return(0,b.jsx)(on.pZ,{value:"row",index:c,children:(0,b.jsx)(Ne.h,{menu:(0,b.jsx)(pn.P,{uri:r,albumUri:u.uri,artists:l,contextUri:d}),children:(0,b.jsxs)(_n.w,{uri:r,contextUri:d,isPlayable:N,onTriggerPlay:function(e,t){S({loggingParams:t})},isActive:T,ageRestricted:f,index:c,ariaRowIndex:c,dragMetadata:{name:i,createdBy:L},spec:j,className:jn.A.isRecommendedTrackListRow,children:[(0,b.jsxs)(ea.U,{ariaColIndex:0,children:[(0,b.jsx)(Xi.u,{uri:r,src:s,onClick:function(e,t){E({loggingParams:t})},isLocked:!1,isPlaying:P,isActive:T,playAriaLabel:m.Ru.get("tracklist.a11y.play",i,L),spec:j}),(0,b.jsxs)(On.l,{children:[h&&V?(0,b.jsx)(_e.A,{to:r,className:jn.A.rowTitle,"data-testid":"internal-track-link",children:(0,b.jsx)(Ln.p,{titleText:i,children:i})}):(0,b.jsx)(Ln.p,{titleText:i,children:i}),M&&(0,b.jsxs)(bn.P,{children:[D.explicit&&(0,b.jsx)(Rt.g,{}),D.download&&(0,b.jsx)(sn._,{}),D.nineteen&&(0,b.jsx)(ln.q,{className:jn.A.nineteen,size:16})]}),(0,b.jsx)(In.p,{children:(0,b.jsx)(vn.l,{artists:l,spec:j})})]})]}),(0,b.jsx)(ta.o,{ariaColIndex:1,children:(0,b.jsx)(fn.g,{uri:u.uri,name:u.name,creatorUri:null==l||null===(t=l[0])||void 0===t?void 0:t.uri,spec:j,children:u.name})}),(0,b.jsx)(ta.o,{ariaColIndex:2,children:(0,b.jsx)("span",{})}),(0,b.jsxs)(Zi.l,{ariaColIndex:3,children:[B?(0,b.jsx)(dn.d,{uri:r}):null,B?(0,b.jsx)(kn.P,{duration:x,dataTestId:"render-duration"}):(0,b.jsx)(Pe.n,{size:"small",onClick:w,"aria-label":m.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:m.Ru.get("playlist.extender.button.add")}),B?(0,b.jsx)(Sn.Y,{menu:(0,b.jsx)(pn.P,{uri:r,albumUri:u.uri,contextUri:d,artists:l}),label:m.Ru.get("more.label.track",i,F)}):null]})]})})})}),(function(e,t){return e.uid===t.uid&&e.uri===t.uri&&e.index===t.index})),sa=function(e){var t=e.track,n=e.contextUri,r=e.index,i=e.usePlayContextItem;return(0,b.jsx)(aa,{uid:t.id,uri:t.uri,isPlayable:t.isPlayable,isMOGEFRestricted:t.is19PlusOnly,isExplicit:t.isExplicit,contextUri:n,name:t.name,imgUrl:t.album.imgUrl,index:r,album:t.album,artists:t.artists,usePlayContextItem:i})},la=function(e){var t,n=e.resultList,r=e.level,i=e.isRTL,s=e.playlistUri,l=e.navToResults,c=e.navToEntity,u=e.term,p=e.isBooklist,f=n,v=function(e){return e.map((function(e){if(e.type===Ur.c.TRACK||e.type===Ur.c.EPISODE){var t=e.uri,n=e.id;return{type:(0,d.U_)(t)?Ur.c.TRACK:Ur.c.EPISODE,uri:t,uid:n,provider:null}}return null})).filter(ri.P)}(n),x=(0,_.P)(),y=x.draggable,h=x.onDragStart,g=(0,X.P)({uri:"".concat(s.replace("spotify:","spotify:internal:recs:"),":").concat(encodeURIComponent(u),":").concat(null!==(t=null==r?void 0:r.navType)&&void 0!==t?t:0),pages:[{items:v}]},{featureIdentifier:"search"}).usePlayContextItem,j=(0,a.useCallback)((function(e,t){return(0,b.jsx)(ia,{isRTL:i,index:t,label:e.label,onClick:function(){l({navType:e.type,term:u,title:e.label})}},e.uri)}),[i,l,u]),A=(0,a.useCallback)((function(e,t){return e.type===Ur.c.ARTIST?(0,b.jsx)(Yi,{isRTL:i,index:t,searchResult:e,onClick:function(){c({navType:hi.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===Ur.c.EPISODE?(0,b.jsx)(ra,{index:t,episode:e,contextUri:s.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===Ur.c.TRACK?(0,b.jsx)(sa,{index:t,track:e,contextUri:s.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===Ur.c.ALBUM?(0,b.jsx)(Ki,{index:t,isRTL:i,searchResult:e,onClick:function(){c({navType:hi.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,b.jsx)(Nt,{book:e,featureIdentifier:"playlist_recommendations",contextUri:s,isRecommendation:!0,showSeparator:0!==t},e.uri)}),[i,c,s,g]);if(""===u)return(0,b.jsx)("div",{className:T.A.emptySearchTermContainer});if(!n||0===(null==n?void 0:n.length))return(0,b.jsxs)("div",{className:T.A.emptyStateContainer,children:[(0,b.jsx)(o.E,{as:"h1",variant:"titleSmall",children:m.Ru.get("search.empty-results-title",u)}),(0,b.jsx)(o.E,{as:"p",variant:"bodySmall",children:m.Ru.get("search.empty-results-text")})]});if((null==r?void 0:r.navType)===hi.SEARCH){var R=[{type:hi.ARTISTRESULTS,label:m.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:hi.ALBUMRESULTS,label:m.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:hi.TRACKRESULTS,label:m.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return f=n,p?(0,b.jsx)(b.Fragment,{children:f.map((function(e,t){return e&&e.type===Ur.c.AUDIOBOOK?(0,b.jsx)(Nt,{contextUri:s,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:y,onDragStart:function(t){h(t,{itemUris:[e.uri],itemMimeTypes:[Lt.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null}))}):(0,b.jsx)(Ii,{renderRow:A,searchResults:f,renderSeeAllRow:j,seeAllXList:R})}return(null==r?void 0:r.navType)===hi.ALBUM?(0,b.jsx)(Ei,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===hi.ARTIST?(0,b.jsx)(wi,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===hi.ALBUMRESULTS?(0,b.jsx)(Ni,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===hi.TRACKRESULTS?(0,b.jsx)(_i,{renderRow:A,searchResults:f}):(null==r?void 0:r.navType)===hi.ARTISTRESULTS?(0,b.jsx)(Li,{renderRow:A,searchResults:f}):null},oa=function(e){var t=e.playlistUri,n=e.onCurationModeChange,s=e.isBooklist,l=(0,a.useState)([]),c=(0,i.A)(l,2),u=c[0],d=c[1],p=(0,a.useState)(),f=(0,i.A)(p,2),v=f[0],x=f[1],y=(0,$r.W)(),h=function(){var e=(0,a.useReducer)(gi,{term:"",breadcrumbs:[]}),t=(0,i.A)(e,2),n=t[0],r=t[1],s=n.breadcrumbs,l=n.term;return{changeTerm:function(e){r({type:"CHANGE_TERM",term:e})},level:s[s.length-1]||null,goBack:function(){r({type:"GO_BACK"})},navToEntity:function(e){r({type:"NAV_TO_ENTITY",level:e})},navToResults:function(e){r({type:"NAV_TO_RESULTS",level:e})},term:l}}(),g=h.level,j=h.changeTerm,A=h.goBack,R=h.navToEntity,k=h.navToResults,C=h.term,O=(0,a.useContext)(Hr.j).request;return(0,a.useEffect)((function(){var e=!0,t=function(){var t=(0,fe.A)(be().mark((function t(){var n,i,a;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=2;break}return t.abrupt("return");case 2:t.t0=g.navType,t.next=t.t0===hi.SEARCH?5:t.t0===hi.ARTISTRESULTS?21:t.t0===hi.ALBUMRESULTS?23:t.t0===hi.TRACKRESULTS?25:t.t0===hi.EPISODERESULTS?27:t.t0===hi.ALBUM?29:t.t0===hi.ARTIST?40:51;break;case 5:if(t.prev=5,v&&(v.query===C||""===C)){t.next=13;break}return t.next=9,fi(O,C,s);case 9:n=t.sent,e&&x(n),t.next=14;break;case 13:""===C&&d([]);case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(5),d([]);case 19:return v&&d(v.topResults),t.abrupt("break",52);case 21:return v&&d(null==v?void 0:v.artists),t.abrupt("break",52);case 23:return v&&d(null==v?void 0:v.albums),t.abrupt("break",52);case 25:return v&&d(null==v?void 0:v.tracks),t.abrupt("break",52);case 27:return v&&d(null==v?void 0:v.episodes),t.abrupt("break",52);case 29:return t.prev=29,t.next=32,vi(O,g.uri,100,0);case 32:i=t.sent,e&&i&&d(i.tracks),t.next=39;break;case 36:t.prev=36,t.t2=t.catch(29),d([]);case 39:return t.abrupt("break",52);case 40:return t.prev=40,t.next=43,bi(O,g.uri,100,0);case 43:a=t.sent,e&&a&&d([].concat((0,r.A)(a.albums),(0,r.A)(a.tracks))),t.next=50;break;case 47:t.prev=47,t.t3=t.catch(40),d([]);case 50:case 51:return t.abrupt("break",52);case 52:case"end":return t.stop()}}),t,null,[[5,16],[29,36],[40,47]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}),[g,C,v,O,s]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("section",{className:T.A.playlistInlineCurationSection,children:[(0,b.jsxs)("div",{className:T.A.playlistInlineCurationWrapper,children:[(0,b.jsx)(o.E,{as:"h1",className:T.A.playlistInlineCurationTitle,variant:"titleSmall",children:m.Ru.get("playlist.curation.title")}),(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Pi,{placeholder:s?m.Ru.get("playlist.curation.search_placeholder-booklists"):m.Ru.get("playlist.curation.search_placeholder"),onFocus:function(){n(!0)},onChange:function(e){j(e)}})})]}),(0,b.jsx)("button",{className:T.A.playlistInlineCurationCloseButton,onClick:function(){return n(!1)},children:(0,b.jsx)(zr.M,{"aria-label":m.Ru.get("close")})})]}),null!==g&&g.navType!==hi.SEARCH?(0,b.jsxs)("button",{className:T.A.playlistInlineCurationBackButton,onClick:function(){return A()},children:[y?(0,b.jsx)(qr.V,{"aria-label":m.Ru.get("navbar.go-back"),className:T.A.icon}):(0,b.jsx)(Wr.g,{"aria-label":m.Ru.get("navbar.go-back"),className:T.A.icon}),(0,b.jsx)(o.E,{as:"p",variant:"bodyMediumBold",children:g.title})]}):null,(0,b.jsx)("div",{className:T.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,b.jsx)(la,{playlistUri:t,term:C,level:g,resultList:u,navToEntity:R,navToResults:k,isRTL:y,isBooklist:s})})]})},ca=n(7857);n(65050),n(21276),n(91911);function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var da={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},ma=function(e){var t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};for(var n,r,i=t[1],a=/([^:]+):([^:]+)/g,s=[],l=[];n=a.exec(i);){var o=n[1],c=n[2];o===da.USER&&(r=void 0,r=c.replace(/\+/g,"%20"),c=decodeURIComponent(r)),s.push(o),l.push(c)}if(0===s.length)return{type:null,id:null};var u=s.reduce((function(e,t,n){return e[s[n]]=l[n],e}),{});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:s[s.length-1],id:l[l.length-1]},u)},pa=n(74571),fa=n(57167),va=new Kr.l("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),ba=3e5;function xa(e,t){return["list-extender",e,t]}var ya=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3?arguments[3]:void 0,l=2*n,o=3*n,c=(0,Ve.jE)(),d=(0,a.useRef)(0),m=(0,a.useState)(e),p=(0,i.A)(m,2),f=p[0],v=p[1],b=(0,a.useState)((function(){var n,r;return null!==(n=null===(r=c.getQueriesData({queryKey:xa(e,t),stale:!1}).at(0))||void 0===r?void 0:r[1])&&void 0!==n?n:[]})),x=(0,i.A)(b,2),y=x[0],h=x[1],g=(0,a.useRef)(y.map((function(e){var t;return null!==(t=e.uri)&&void 0!==t?t:""}))),j=(0,me.r)(u.K,{data:{uri:e}}),A=j.spec,R=j.logger,k=(0,a.useMemo)((function(){return A.recommendedFactory()}),[A]);(0,fa.e)(pa.Lj.OPERATION_COMPLETE,(function(n){var r=n.data;r.uri===e&&(r.operation===pa.sP.ADD?h((function(e){return e.filter((function(e){return r.uris.every((function(t){return t!==e.uri}))}))})):r.operation===pa.sP.REMOVE&&h((function(e){return e.filter((function(e){return r.items.every((function(t){return t.uri!==e.uri}))}))})),r.operation!==pa.sP.ADD&&r.operation!==pa.sP.REMOVE||c.invalidateQueries({queryKey:xa(e,t)}))}));var C=(0,a.useRef)(!0);(0,a.useEffect)((function(){return C.current||(h([]),v(e),g.current=[],d.current=d.current+1),C.current=!0,function(){d.current=d.current+1}}),[e]),(0,a.useEffect)((function(){if(y.length<l){var e=Math.min(l,o-y.length),n=d.current,i=xa(f,t),a=C.current&&0===g.current.length;(a?c.fetchQuery({queryKey:i,queryFn:function(){return s(f,[],e)},staleTime:ba,gcTime:ba}):s(f,g.current,e)).then((function(t){if(n===d.current&&t){var s=t.map((function(e){return(null==e?void 0:e.uri)&&e.uri})).filter((function(e){return null!==e}));t.length<e&&g.current.length?g.current=[]:g.current=[].concat((0,r.A)(g.current),(0,r.A)(s)),h((function(e){return[].concat((0,r.A)(e),(0,r.A)(t))})),a&&c.setQueryData(i,t)}}))}C.current=!1}),[l,o,f,y.length,c,s,t]);var O=(0,a.useCallback)((function(){if(A){var e=k.refreshButtonFactory().hitRefreshContent();R.logInteraction(e)}h((function(e){return e.slice(n)}))}),[R,k,A,n]);return{recommendations:y.slice(0,n),_bufferedRecommendations:y.slice(n),refresh:O}},ha=a.memo((function(e){var t=e.uri,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(0,a.useContext)(ce.w),r=(0,a.useContext)(Hr.j).request,i=(0,a.useCallback)(function(){var e=(0,fe.A)(be().mark((function e(t,i,a){var s,l,o,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getRecommendedBookUris(t,i,a);case 2:return o=e.sent,e.next=5,r(va,{uris:o});case 5:return c=e.sent,e.abrupt("return",null!==(s=null==c||null===(l=c.data)||void 0===l?void 0:l.podcasts.map((function(e){return"Audiobook"===e.__typename?Zr(e):null})).filter(ri.P))&&void 0!==s?s:[]);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n,r]);return ya(e,"book",t,i)}(t),r=n.recommendations,i=n.refresh,s=(0,_.P)(),l=s.draggable,c=s.onDragStart,u=(0,ca.p)();return u?null!=r&&r.length&&r.length>0?(0,b.jsxs)("div",{className:T.A.recommendedTrackList,children:[(0,b.jsx)("div",{className:T.A.top,children:(0,b.jsxs)("div",{className:T.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:T.A.subtitle,children:m.Ru.get("playlist.extender.songs.in.playlist")})]})}),u&&(0,b.jsxs)(b.Fragment,{children:[r.map((function(e,n){return e?(0,b.jsx)(Nt,{contextUri:t,featureIdentifier:"playlist_recommendations",book:e,sharingInfo:e.sharingInfo,isRecommendation:!0,draggable:l,onDragStart:function(t){c(t,{itemUris:[e.uri],itemMimeTypes:[Lt.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==n},n):null})),(0,b.jsx)(dr.H,{className:T.A.refreshButton,onClick:i,children:m.Ru.get("playlist.extender.refresh")})]})]}):null:(0,b.jsx)("div",{className:T.A.recommendedTrackList,children:(0,b.jsx)("div",{className:T.A.top,children:(0,b.jsxs)("div",{className:T.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:T.A.subtitle,children:m.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})})),ga=n(72331);function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){(0,v.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ra=a.memo((function(e){var t=e.playlistUri,n=e.canEdit,r=e.tracks,i="1"===(0,ga.$)("filter-age-restricted-content"),s=(0,X.P)({uri:t.replace("spotify:","spotify:internal:recs:"),pages:[{items:r.map((function(e){return Aa(Aa({},e),{},{provider:null,type:Ur.c.TRACK,uid:null})}))}]},{featureIdentifier:"playlist_recommendations"}).usePlayContextItem,l=(0,a.useCallback)((function(e,r){var a=e.duration;return(0,b.jsx)(aa,{index:r,imgUrl:e.album.imageUrl,contextUri:t.replace("spotify","spotify:internal:recs"),uri:e.uri,isPlayable:!(i&&e.isMOGEFRestricted),name:e.name,artists:e.artists,album:Aa(Aa({},e.album),{},{imgUrl:e.album.imageUrl}),isExplicit:e.explicit,isMOGEFRestricted:e.isMOGEFRestricted,usePlayContextItem:s,durationMs:a,shouldRenderDuration:!n,internalLink:!0},"".concat(r,"-").concat(e.uri))}),[t,i,s,n]),o=(0,a.useMemo)((function(){return[Ut.$.TITLE_AND_ARTIST,Ut.$.ALBUM,Ut.$.ADDED_AT,Ut.$.ADD]}),[]),c=(0,a.useCallback)((function(e){return{uri:e.uri,uid:e.id}}),[]),u=(0,a.useMemo)((function(){return r.slice(0,Math.min(r.length,10))}),[r]);return(0,b.jsx)(Dn.S4,{ariaLabel:m.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(r.length,10),rowPlaceholder:Si.qq,tracks:u,renderRow:l,resolveItem:c,columns:o},"".concat(t,"-recommended"))})),ka=a.memo((function(e){var t=e.playlistUri,n=e.playlistLength,r=e.canEdit,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(0,a.useContext)(ce.w),r=(0,a.useCallback)(function(){var e=(0,fe.A)(be().mark((function e(t,r,i){var a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.map((function(e){var t;return null!==(t=ma(e).id)&&void 0!==t?t:""})),e.abrupt("return",n.getRecommendedTracks(t,a,i));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n]);return ya(e,"track",t,r)}(t),s=i.recommendations,l=i.refresh,c=!n||0===n,u=(0,ca.p)(),d=c?m.Ru.get("playlist.extender.title.in.playlist"):m.Ru.get("playlist.extender.songs.in.playlist");return u?s.length>0?(0,b.jsxs)("div",{className:T.A.recommendedTrackList,children:[(0,b.jsx)("div",{className:T.A.top,children:(0,b.jsxs)("div",{className:T.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:T.A.subtitle,children:d})]})}),u&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ra,{playlistUri:t,canEdit:r,tracks:s}),(0,b.jsx)(dr.H,{className:T.A.refreshButton,onClick:l,children:m.Ru.get("playlist.extender.refresh")})]})]}):null:(0,b.jsx)("div",{className:T.A.recommendedTrackList,children:(0,b.jsx)("div",{className:T.A.top,children:(0,b.jsxs)("div",{className:T.A.header,children:[(0,b.jsx)(o.E,{variant:"titleSmall",children:m.Ru.get("playlist.extender.recommended.title")}),(0,b.jsx)(o.E,{variant:"bodySmall",className:T.A.subtitle,children:m.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})})),Ca=a.lazy((function(){return n.e(4789).then(n.bind(n,54228))})),Oa=a.lazy((function(){return Promise.resolve().then(n.bind(n,82911))})),Ta=a.lazy((function(){return n.e(3632).then(n.bind(n,91906))})),Pa=a.lazy((function(){return n.e(9718).then(n.bind(n,10701))})),Sa=new Set([]),Ea=a.memo((function(e){var t,n,f,v,x,y,h,g=e.playlist,j=e.capabilities,C=g.metadata,O=C.uri,G=C.name,Y=C.images,Z=C.totalLength,ee=C.unfilteredTotalLength,te=C.isOwnedBySelf,ne=C.hasEpisodes,ie=C.canAdd,ae=C.canRemove,se=C.formatListData,ue=C.hasDateAdded,fe=C.collaborators,ve=C.isPublished,be=C.hasSpotifyAudiobooks,xe=C.hasSpotifyTracks,ye=g.contents.items,he=(0,me.r)(u.K,{data:{uri:O}}),ge=he.spec,je=he.logger,Ae=he.UBIFragment,Re=(0,D.n)(),ke=(0,c.NC)(pe.Cf,{loadingValue:!1}),Ce=(0,c.NC)(pe.Mc,{loadingValue:!1}),Oe=(0,c.NC)(H.FQE,{loadingValue:!1}),Te=(0,L.a)().isCompactMode,Pe=a.useMemo((function(){return ge.headerFactory()}),[ge]),Se=a.useMemo((function(){return ge.tracklistFactory()}),[ge]),Ee=a.useMemo((function(){return ge.actionBarFactory()}),[ge]),we="chart"===(null==se?void 0:se.type),Ie="concerts-near-you"===(null==se?void 0:se.type)&&ke,Ne="live-streams"===(null==se?void 0:se.type),Le=["blend","celebrity-blend","friends-mix"].indexOf((null==se?void 0:se.type)||"")>-1,_e=[xe,ne,be].filter(Boolean).length>1,Ue=!_e&&!!be&&(0,Vr.R)(ye),De="artistsets"===(null==se?void 0:se.type)||"this-is"===(null==se?void 0:se.attributes["editorial.series"]),Me=(null==se?void 0:se.attributes)||{},Be=Me.header_image_url_desktop||Me.image_url||null,Fe=ie&&ae,Ve=function(e,t){var n=(0,a.useState)(e&&0===t),r=(0,i.A)(n,2),s=r[0],l=r[1],o=(0,a.useContext)(Q.bi).scrollNodeChildRef,c=(0,a.useRef)(s);return(0,a.useEffect)((function(){var e,t=!c.current;o&&t&&s&&(null===(e=o.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})),c.current=s}),[o,s]),{inlineCurationModeIsOn:s,handleInlineCurationModeChange:function(e){l(e)}}}(Fe&&(!Ue||Ce&&Oe),ee),ze=Ve.inlineCurationModeIsOn,qe=Ve.handleInlineCurationModeChange,We=(0,s.d4)(K.Ht).productState,$e=!(null==We||!We.ads)&&parseInt(We.ads,10)>0,He="spotify"===g.metadata.owner.username,Ke=(0,s.wA)(),Qe=(0,l.wQ)(),Ge=(0,l.zy)(),Ye=(0,c.NC)(H.vQ3,{loadingValue:!1}),Je=(0,c.NC)(H.UPi,{loadingValue:!1}),Xe=null===(t=(0,N.useThisisPlaylistExtensionQuery)({uri:O},{gcTime:5*J.i,enabled:De}).data)||void 0===t?void 0:t.playlistV2,Ze="Playlist"===(null==Xe?void 0:Xe.__typename)?null===(n=Xe.artistsOnTour)||void 0===n?void 0:n[0]:null,et=Je&&"Playlist"===(null==Xe?void 0:Xe.__typename)?null===(f=Xe.concerts)||void 0===f?void 0:f.items.map((function(e){return e.data})):null,tt=null==et?void 0:et.flatMap((function(e){return"ConcertV2"===e.__typename?[e]:[]})).map((function(e){var t,n=[e.location.name,e.location.city].join(m.Ru.getSeparator()),r=e.artists.items.flatMap((function(e){return"Artist"===e.data.__typename?[e.data]:[]}));return{venue:n,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:null===(t=r[0])||void 0===t||null===(t=t.visuals.avatarImage)||void 0===t||null===(t=t.sources[0])||void 0===t?void 0:t.url}})),nt="POP"!==Qe?new URLSearchParams(Ge.search).get("uid"):null,rt=(0,U.W)(),it=(0,a.useContext)(S.g).filter,at=(0,a.useContext)(E.cL).sortState,st=(0,a.useContext)(ce.w),lt=(0,a.useRef)(null),ot=(0,a.useRef)(null),ct=(0,i.A)(Y,1)[0],ut=(0,M.H)(null!==Be?Be:(null==ct?void 0:ct.url)||null),dt=(0,X.P)(function(e,t,n){var r={uri:e};return re(r,t),le(r,(0,oe.H)(n)),r}(O,(0,P.Xt)(at),it),{featureIdentifier:"playlist"}),mt=dt.isPlaying,pt=dt.isActive,ft=dt.togglePlay,vt=dt.usePlayContextItem,bt=(0,a.useCallback)((function(){var e=(0,$.$I)({isPlaying:mt,isActive:pt,spec:Ee.playButtonFactory(),logger:je,uri:O});ft({loggingParams:e})}),[mt,pt,ft,Ee,je,O]),xt=(0,a.useCallback)((function(e){var t=e.split(/[\r\n]+/g).map((function(e){return(0,d.o_)(e)})).filter((function(e){return null!==e&&((0,d.U_)(e)||(0,d.gH)(e)||(0,d.Pk)(e))}));if(t.length>0&&ie){var n,r=t.map((function(e){return e.toURI()})),i=null===(n=lt.current)||void 0===n||null===(n=n.getSelected())||void 0===n||null===(n=n.slice(-1))||void 0===n?void 0:n[0],a={after:null!=i?i:"end"};Ke((0,p.io)(O,r,a))}}),[ie,Ke,O]);x=xt,y=(0,a.useContext)(V.A),h=(0,B.YQ)((function(){y.paste().then((function(e){return x(e)}))}),500,{leading:!0,trailing:!1}),(0,F.f)(W,h),(0,q.x)(z.W.PASTE,h);var yt=(0,a.useCallback)((function(e,t){var n=[].concat((0,r.A)(t[_.O[d.NQ.TRACK]]||[]),(0,r.A)(t[_.O[d.NQ.LOCAL_TRACK]]||[]),(0,r.A)(t[_.O[d.NQ.EPISODE]]||[]),(0,r.A)(t[_.O[d.NQ.ALBUM]]||[]));n.length>0&&ie&&(je.logInteraction(ge.dragAddToPlaylist({playlist:O,itemToBeAdded:n[0]})),Ke((0,p.io)(O,n)),rt({targetUri:O,intent:"add",type:"drop"}))}),[ie,je,ge,O,Ke,rt]),ht=!He&&0!==ee,gt=!Ue&&Re&&(Fe&&!ze||ht),jt=Ue&&Ce&&Oe&&Re&&(Fe&&!ze||ht),At=(!Ue||Ce&&Oe)&&te&&Re,Rt=!Fe&&!Ue&&!ht&&Re,kt=null!==(v=null==fe?void 0:fe.count)&&void 0!==v?v:1,Ct=(0,w.z1)(),Ot=(0,i.A)(Ct,1)[0],Tt="plays"===Me.rank_type,Pt=(0,a.useMemo)((function(){return(0,P.Ey)({isMixedMedia:_e,hasEpisodes:ne,hasSpotifyAudiobooks:be,hasDateAdded:ue,isLive:Ne,isConcert:Ie,isBlend:Le,nrCollaborators:kt,isBooklist:Ue,isCompactMode:Te,isChart:we,showPlayCount:Tt})}),[_e,ne,be,ue,Ne,Ie,Le,kt,Ue,Te,we,Tt]),St=(0,a.useMemo)((function(){return st.getCapabilities().canSort?Ue?new Set(E.dh):new Set((0,P.zq)(Pt)):Sa}),[Pt,Ue,st]),Et=Oe&&Ue&&!Te;return(0,b.jsxs)(a.Suspense,{fallback:null,children:[(0,b.jsx)(k.Q,{children:(0,de.Q2)({playlistName:G,userName:g.metadata.owner.displayName||"",isSpotifyOwned:He})}),(0,b.jsx)(R.A,{types:ie&&!Ue?[_.O[d.NQ.TRACK],_.O[d.NQ.LOCAL_TRACK],_.O[d.NQ.EPISODE],_.O[d.NQ.ALBUM]]:[],onDrop:yt,children:(0,b.jsxs)("section",{role:"presentation",className:T.A.playlist,"data-testid":"playlist-page","data-test-uri":O,children:[(0,b.jsx)(Nr.x,{metadata:g.metadata,isPlaying:mt,isPublished:ve,totalItems:Ot,togglePlay:bt,backgroundColor:ut,spec:Pe}),(0,b.jsxs)("div",{className:T.A.playlistContent,children:[(0,b.jsx)(Sr,{playlist:g,capabilities:j,spec:Ee,isPlaying:mt,isActive:pt,togglePlay:bt,isBooklist:Ue,backgroundColor:ut,tracklistDomRef:ot,isConcert:Ie,sortableColumns:St}),(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Ca,{formatListData:g.metadata.formatListData})}),!Je&&null!=Ze&&Ze.upcomingEventsCount?(0,b.jsx)(Oa,{artistConcertsUri:Ze.uri||"",artistImageUrl:Ze.imageUrl||"",artistName:Ze.title||"",spec:ge}):null,Je&&!!Ze&&tt&&tt.length>0&&(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Ta,{liveEvents:tt,artistConcertsUri:Ze.uri||"",artistName:Ze.title||"",spec:ge})}),(0,b.jsxs)("div",{className:"contentSpacing",children:[$e?(0,b.jsx)(A,{playlistUri:O}):null,$e&&He?(0,b.jsx)(Pa,{uri:O,playlistName:G}):null,g.metadata.hasSpotifyAudiobooks&&Ye&&(0,b.jsxs)("div",{className:T.A.noBooklistSupportContainer,children:[(0,b.jsx)(o.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:m.Ru.get("web-player.playlist.booklist-not-supported-title")}),(0,b.jsx)(o.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:m.Ru.get("web-player.playlist.booklist-not-supported.message")})]}),Z>0&&(0,b.jsx)(a.Suspense,{fallback:null,children:Et?(0,b.jsx)(Xt,{initialItems:ye,contextUri:O,nrItems:Z,canEdit:Fe,canRemove:ae,ariaLabel:G}):(0,b.jsx)(Ae,{spec:Se,children:(0,b.jsx)(I.a,{columns:Pt,children:we?(0,b.jsx)(Fn,{ariaLabel:G,nrTracks:Z,playlistUri:O,scrollToUid:nt,usePlayContextItem:vt,tracklistDomRef:ot,sortableColumns:St,isCompactMode:Te},O):(0,b.jsx)(Fr,{ariaLabel:G,nrTracks:Z,playlistUri:O,playlistName:G,isMixedMedia:_e,isLive:Ne,isConcert:Ie,isBlend:Le,isBooklist:Ue,canEdit:Fe,scrollToUid:nt,feedbackPath:Me["dislike-endpoint"],deleteFeedbackPath:Me["delete-endpoint"],usePlayContextItem:vt,tracklistRef:lt,tracklistDomRef:ot,canRemove:ae,spec:Se,initialItems:ye,isCompactMode:Te,sortableColumns:St,hasSpotifyAudiobooks:null!=be&&be},O)})})}),At&&(0,b.jsx)(a.Suspense,{fallback:null,children:ze?(0,b.jsx)(oa,{playlistUri:O,onCurationModeChange:qe,isBooklist:Ue}):(0,b.jsx)("button",{className:T.A.seeMore,onClick:function(){qe(!0)},children:(0,b.jsx)(o.E,{as:"div",variant:"bodySmallBold",children:m.Ru.get("playlist.curation.find_more")})})}),gt?(0,b.jsx)("div",{"data-testid":"recommended-track",children:(0,b.jsx)(ka,{playlistUri:O,playlistLength:g.metadata.unfilteredTotalLength,canEdit:Fe})}):null,jt?(0,b.jsx)(ha,{uri:O}):null,Rt&&(0,b.jsx)(Jn,{uri:O})]})]}),Ie&&(0,b.jsx)(Ir,{spec:ge.footerSectionFactory()})]})})]})})),wa=a.memo((function(e){var t=e.uri,n=(0,a.useContext)(ce.w).getCapabilities(),r=(0,a.useContext)(S.g).filter,i=(0,a.useContext)(E.cL).sortState,s=(0,Gt.$)(i,r),l=s.metadataOptions,o=s.contentsOptions,c=(0,ue.W)(t,l,o),u=c.data,d=c.isLoading,p=c.isError;return!u||d?(0,b.jsx)(O.A,{hasError:p,errorMessage:m.Ru.get("error.not_found.title.playlist"),loadOffline:n.canModifyOffline}):u.metadata.permissions&&!u.metadata.permissions.canView?(0,b.jsx)(C.Z,{uri:t}):(0,b.jsx)(Ea,{playlist:u,capabilities:n})}));const Ia=function(){var e=(0,l.g)().playlistId,t=(0,d.Ps)((e||"").split("&")[0]).toURI();return(0,b.jsx)(Y.P,{surface:G.u.PLAYLIST,uris:[t],children:(0,b.jsx)(E.sn,{uri:t,children:(0,b.jsx)(S.s,{uri:t,children:(0,b.jsx)(w.S1,{children:(0,b.jsx)(wa,{uri:t})})})})})}},79079:(e,t,n)=>{n.d(t,{A:()=>r});const r={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
=======
"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3878],{71251:(e,i,a)=>{a.d(i,{j:()=>d});var n=a(50959),t=a(22795),l=a(57562),s=a(13734),r=a(11527);const d=n.memo((function({uri:e,size:i=l.q.md,className:a,onClick:d,canDownload:o,condensedAll:c}){const[m,u]=(0,t.Z)(e),k=(0,s.o)(),p=(0,n.useCallback)((()=>{k({targetUri:e,intent:m?"unsave":"save",type:"click"}),u(!m)}),[k,e,m,u]);return(0,r.jsx)(l.o,{className:a,isFollowing:m,onFollow:p,onClick:d,uri:e,size:i,canDownload:o,condensedAll:c})}))},4576:(e,i,a)=>{a.d(i,{T:()=>u});var n=a(50959),t=a(82187),l=a.n(t),s=a(40763),r=a(85648),d=a(55842),o=a(74713);const c="pvGZ831aNzHTQMZ8CA_u";var m=a(11527);const u=(0,n.memo)((function({onClick:e=(()=>{}),size:i,className:a,uri:t,sharingInfo:u,interactionData:k,ariaLabel:p=r.ag.get("mwp.list.item.share"),condensedAll:v}){const{onCopyLink:y}=(0,o.y)({sharingInfo:u,uri:t,interactionData:k}),S=(0,n.useCallback)((()=>{y(),e()}),[e,y]);return(0,m.jsx)(d.E,{ariaLabel:p,size:i,onClick:S,className:l()(c,a),icon:s.M,condensedAll:v,condensed:!0})}))},28133:(e,i,a)=>{a.r(i),a.d(i,{ThisIsTourCard:()=>c,default:()=>c,useThisisPlaylistExtensionQuery:()=>k});var n=a(69736),t=a(6370),l=a(85648),s=a(60046),r=a(80626),d=a(97607),o=a(11527);const c=e=>{const{artistImageUrl:i,artistName:a,artistConcertsUri:c,spec:m}=e,u=(0,r.$P)(),k=(0,r.Wi)(m.concertsCardFactory({identifier:a,uri:c,reason:"This is On Tour phase 1 MVP"}));return i&&a&&c?(0,o.jsxs)("section",{ref:k,className:"contentSpacing",children:[(0,o.jsx)(n.x,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:l.ag.get("concerts")}),(0,o.jsx)("div",{className:d.Z.cards,children:(0,o.jsxs)("div",{className:d.Z.tourCard,"data-testid":"on-tour-card",children:[(0,o.jsx)("img",{className:d.Z.cardImage,src:i,alt:""}),(0,o.jsxs)("div",{className:d.Z.cardContent,children:[(0,o.jsx)(n.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:d.Z.subtitle,children:l.ag.get("concerts_on_tour")}),(0,o.jsx)(n.x,{as:"h1",variant:"bodyMediumBold",className:d.Z.title,semanticColor:"textBase",children:a}),(0,o.jsx)(s.default,{to:c,className:d.Z.cardLink,children:(0,o.jsx)(t.P,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:c,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:c});u.logInteraction(e)},className:d.Z.cardButton,children:l.ag.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(20069);const u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"thisisPlaylistExtension"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artistsOnTour"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"imageUrl"}},{kind:"Field",name:{kind:"Name",value:"upcomingEventsCount"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"concerts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConcertV2"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"startDateIsoString"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"location"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"city"}},{kind:"Field",name:{kind:"Name",value:"country"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]},k=(e,i)=>(0,m.a)(u,e,i)},1716:(e,i,a)=>{a.r(i),a.d(i,{default:()=>Ot});a(46758),a(53321),a(55115),a(86277),a(92372),a(70069),a(44227),a(91499),a(68856),a(18004),a(16527);var n=a(50959),t=a(35869),l=a(75802),s=a(69736),r=a(10226),d=a(11444),o=a(11317),c=a(85648),m=a(35360),u=(a(39301),a(4815)),k=a(11527);const p=(e,i,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(i),lineitem_id:String(a),creative_id:String(i),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),v=({clickTracking:e,clickThrough:i,thirdPartyImpression:a,impression:l,logoUrl:r,advertiserName:d,creativeId:o,lineItemId:m})=>{const v=(0,t.I0)(),[y,S]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(v((0,u.Vw)()),v((0,u.kh)(p("event_viewed",o,m))),()=>{v((0,u.AG)())})),[v,o,m]),(0,k.jsxs)("div",{className:"sponsor-container",children:[(0,k.jsx)(s.x,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:c.ag.get("playlist.presented_by",d)}),(0,k.jsxs)("div",{className:"sponsor-logo",children:[(0,k.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:i,onClick:()=>{v((0,u.kh)(p("event_clicked",o,m))),S(!0)},children:(0,k.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:r,alt:d,"data-ta-id":"sponsor-logo"})}),(0,k.jsx)("img",{className:"sponsor-logo__imp-pixel",src:l,alt:""}),a&&(0,k.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),y&&(0,k.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},y=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((i=>i.ads.sponsoredPlaylist.previewAd||i.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,n.useEffect)((()=>{a||i((0,u.fd)(e))}),[i,e,a]),a?(0,k.jsx)("div",{children:(0,k.jsx)(v,{...a})}):null},S=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),l=(0,t.v9)((e=>e.ads.sponsoredPlaylist.previewAd));(0,n.useEffect)((()=>{a||i((0,u.z8)())}),[i,a]);const s=l||a&&((e,i)=>{const a=Date.now()/1e3,n=e.split(":"),t=n[n.length-1];return i.some((({playlistId:e,endTime:i,startTime:n})=>e===t&&a>=n&&a<(i||a+1)))})(e,a);return s?(0,k.jsx)(y,{playlistUri:e}):null};var g=a(46771),h=a(41038),N=a(16145),x=a(3533),b=a(22795);const f="hOOwEKqNuXrNvOCB1SgZ",C="csEdkIN9z2LjJIuZraqz",F=({uri:e})=>{const[i,a]=(0,b.Z)(e),t=(0,l.s0)(),r=(0,n.useCallback)((()=>{a(!1),t("/",{replace:!0})}),[t,a]);return(0,k.jsxs)("div",{className:f,children:[(0,k.jsx)(N.l,{size:"xxlarge"}),(0,k.jsxs)("div",{className:C,children:[(0,k.jsx)(s.x,{as:"p",variant:"titleSmall",children:c.ag.get("forbidden-page.title")}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:c.ag.get("forbidden-page.description")})]}),i&&(0,k.jsx)(x.D,{colorSet:"invertedLight",onClick:r,children:c.ag.get("remove_from_your_library")})]})};var T=a(91643),j=a(50879),A=a(21536),I=a(65432),R=a(50216),E=a(56822),D=a(61046),L=a(28133),P=a(19848),_=a(17053),w=a(58301),U=a(52115),V=a(23055),M=a(82857);const O=e=>e.seoExperiment,B=(0,V.P1)(O,(e=>e?.uri)),Z=((0,V.P1)(O,(e=>e?.[M.p.TRACK])),(0,V.P1)(O,(e=>e?.[M.p.ALBUM])),(0,V.P1)(O,(e=>({...e?.[M.p.PLAYLISTV2],...e?.[M.p.PLAYLIST]}))));var K=a(13734),W=a(9443),z=a(1142),Q=a(48948),H=a(51450),J=a(50540),q=a(24071),G=a(95504),Y=a(17676),X=a(91530),$=a(87350);const ee=({context:e,shouldFire:i})=>{const a=(0,J.g)(),l=(0,t.v9)($.n5),s=(0,t.v9)(X.rZ),d=(0,r.W6)(Y.kye),o=(0,q.s4)(),c=(0,n.useCallback)((()=>{const i={category:"rpp_exposures",action:"playlist_page_visit",variant:d,label:"dwp",os:(0,G.y)(),context:e,country:l?s:"",sp_t:(0,H.vQ)("sp_t")};a?o.send((0,Q.k)(i)):o.send((0,z.x)(i))}),[d,e,l,s,a,o]);(0,n.useEffect)((()=>{i&&c()}),[c,i])};var ie=a(71318),ae=a(11090),ne=a(64222),te=a(2800),le=a(23255),se=a(20069),re=a(22527),de=a(1740),oe=a(91415),ce=a(71854),me=a(57158);var ue=a(73689),ke=a(39600),pe=a(29673),ve=a(80626),ye=a(47895),Se=a(40234);a(45205);let ge=function(e){return e.RPP="rich-playlist-pages-2",e.TEST="test",e}({}),he=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});var Ne=a(12895),xe=a(75390);const be=[],fe=(e,i)=>{const a=[];let n=e,t=i;for(;n>0;){const i=Math.ceil(n/t);a.push({first:e-n,nrItems:i}),n-=i,t--}return a},Ce=e=>{const{itemsInNode:i,renderItem:a,renderPlaceholder:n,estimatedHeight:t,scrollNodeRef:l,nrRowsOverscan:s=10,nrInitialInView:r=0,firstIndex:d,heights:o,fanOut:c=2}=e,{ref:m,inView:u,entry:p}=(0,xe.YD)({root:l.current,rootMargin:s*t+"px 0px",initialInView:d<r}),v=`${d}-${i}`;o[v]??=t*i,p?.boundingClientRect?.height&&(o[v]=p.boundingClientRect.height);const y=o[v];return 0===i?null:u?1===i?(0,k.jsx)("div",{ref:m,role:"presentation",children:a(d,y)}):(0,k.jsx)("div",{ref:m,role:"presentation",children:fe(i,c).map((({first:i,nrItems:a},n)=>(0,k.jsx)(Ce,{...e,itemsInNode:a,firstIndex:d+i},n)))}):(0,k.jsx)("div",{ref:m,role:"presentation",children:n(`${y}px`)})},Fe=e=>{const i=(e=>{const i=be.find((i=>i.key===e))?.heights||{},a=(0,n.useCallback)((i=>{if(!e)return;const a=be.findIndex((i=>i.key===e));-1===a?be.push({key:e,heights:i}):(be[a].heights=i,be.push(be.splice(a,1)[0])),be.length>10&&be.shift()}),[e]),t=(0,n.useRef)({...i});return(0,n.useEffect)((()=>()=>{a(t.current)}),[a]),t.current})(e.persistanceKey);return(0,k.jsx)(Ce,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:i,nrInitialInView:e.nrInitialInView})};var Te=a(66514),je=a(3853),Ae=a(64464),Ie=a(82187),Re=a.n(Ie),Ee=a(40688),De=a(6370),Le=a(32394),Pe=a(6936),_e=a(99838),we=a(20580),Ue=a(91023),Ve=a(60046),Me=a(5542),Oe=a(69053),Be=a(3319),Ze=a(22496),Ke=a(41194),We=a(93246),ze=a(65019),Qe=a(23769);var He=a(77861),Je=a(78706),qe=a(44724);const Ge="JgxVj0lHUDTf9MS1jJpk",Ye="m5NcxNs6qkNbc9Wdxed7",Xe=({isExplicit:e,children:i})=>(0,k.jsxs)("div",{className:Ge,children:[e&&(0,k.jsx)(qe.N,{}),(0,k.jsx)(s.x,{variant:"bodySmall",className:Ye,children:i})]});var $e=a(16601),ei=a(61058);const ii="small",ai="ci11tAmTK1LnxThQkXPy",ni="_2sJPwAAp1wY1Ftke6iFe",ti="yuNzasMLs7hvemHI4d8Q",li="abYR6tZoE7BdzThmWTb0",si="GOcKQxqNMhGzbGiAXBig",ri="yFQjuDAhri_egM1pwn70",di=(0,n.memo)((function(e){const{breakpoint:i,className:a,showSeparator:n,...t}=e;return(0,k.jsx)($e.w,{className:Re()(a,ai,{[ri]:n}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:i===ii?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:i===ii?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...t})}));var oi=a(77366),ci=a(29390);const mi=({description:e,children:i})=>(0,k.jsxs)("div",{className:li,children:[e&&(0,k.jsx)(oi.o,{lineClamp:2,as:"div",dir:"auto",children:(0,k.jsx)(ci.w,{asTextContent:!0,html:e})}),i]});var ui=a(61027);const ki=({isPlaying:e,onClickPlay:i,name:a,authorName:n,isLocked:t,children:l})=>(0,k.jsxs)("div",{className:si,children:[(0,k.jsx)("div",{className:ni,children:l}),(0,k.jsx)(ui.f,{size:"small",version:ui.u.secondary,onClick:i,isPlaying:e,ariaPlayLabel:c.ag.get("tracklist.a11y.play",a,n),ariaPauseLabel:c.ag.get("tracklist.a11y.pause",a,n),locked:t})]});var pi=a(93421),vi=a(11401),yi=a(1134);const Si=({images:e,breakpoint:i,type:a,name:n})=>{const t=(0,yi.TJ)();return(0,k.jsx)(pi.O,{fadeIn:!0,images:t(e,48),shape:pi.K.ROUNDED_CORNERS,size:i===ii?vi.m$.SIZE_64:vi.m$.SIZE_112,iconSize:i===ii?"medium":"xlarge",type:a,title:n,loadingMode:"eager"})};var gi=a(97345);const hi=({children:e})=>(0,k.jsx)(gi.g,{lineClamp:2,as:"div",dir:"auto",children:e});var Ni=a(38338),xi=a(71251),bi=a(97013),fi=a(4576);const Ci="WdYB8aMUe06dOu4TmYik",Fi="b1X4Ya4bp35IsN6tPGZw",Ti="aCdPMQVcvScaa22utIJM",ji=(0,n.memo)((function({book:e,contextUri:i,featureIdentifier:a,sharingInfo:t,uid:r,rating:d,isRecommendation:m=!1,canRemove:u=!1,showSeparator:p=!1,...v}){const{name:y,description:S,isLocked:g,isExplicit:h,images:N,type:x,uri:f,authorName:C,consumptionCapExplanation:F,durationMs:T,topics:j=[],signifierText:A}=e,I=(0,ve.$P)(),{spec:R}=(0,ve.fU)(_e.F,{data:{position:0,uri:f}}),{isPlaying:E,isActive:D,togglePlay:L}=(0,re.n)({uri:f},{featureIdentifier:a}),P=(0,l.s0)(),_=(0,o.EC)(f).toURLPath(!0),{addItems:w}=(0,de.Yv)(i),U=(0,ei.jh)()===ei.Uo.SMALL?"small":"large",V=(e=>{const i=(0,We.z)(),a=(0,Ze.NL)(),t=(0,n.useRef)(null),l=(0,n.useRef)(0),s=(0,ze.Y)((i=>i?.context.uri===e?i?.item?.uri??null:null)),[r]=(0,Qe.z)(1e4,(e=>e?.item?.uri===s)),{data:d}=(0,Ke.a)({queryKey:["useShowPlayedState",e],queryFn:async()=>{const a=i.getShowPlayedState(e);return l.current=r,a},refetchOnWindowFocus:!1});return(0,n.useEffect)((()=>{t.current&&s!==t.current&&a.invalidateQueries({queryKey:["useShowPlayedState",e]}),t.current=s}),[s,a,e]),(0,n.useMemo)((()=>d&&i.capabilities.canGetShowPlayedState?{state:d.state,playPositionMilliseconds:d.playPositionMilliseconds+r-l.current}:null),[d,i,r])})(f),[M,O]=(0,b.Z)(f),B=(0,Be._)(f),Z=U===ii?"small":"medium",K=(0,n.useCallback)((()=>{I.logInteraction(R.addButtonFactory().hitAddToPlaylist({playlist:i,itemToBeAdded:f})),w([f],{after:"end"})}),[I,R,i,f,w]),W=(0,n.useCallback)((()=>{if(g&&!F)P(_);else{const e=(0,ne.aK)({isPlaying:E,isActive:D,spec:R.playButtonFactory(),logger:I,uri:f});L({loggingParams:e})}}),[F,D,g,E,I,P,R,L,f,_]),z=(0,n.useCallback)((()=>{I.logInteraction(R.genreLinkFactory({uri:j[0].uri??""}).hitUiNavigate({destination:j[0].uri??""}))}),[I,R,j]),Q=(0,k.jsx)(hi,{children:y}),H=(0,k.jsx)(mi,{description:S,children:(0,k.jsxs)(Xe,{isExplicit:!!h,children:[!0===d?.showAverage&&void 0!==d.average&&(0,k.jsxs)("span",{children:[(0,k.jsx)(Ee.u,{size:"xsmall",className:Ci}),c.ag.formatNumber(d.average,{maximumFractionDigits:1})]}),j.at(0)?.title&&(0,k.jsx)(Ve.Link,{className:Fi,to:j[0].uri??"",onClick:z,children:j[0].title}),T&&(0,k.jsx)(Je.E,{isPlaying:!1,fullyPlayed:V?.state===He._N.Completed,durationMs:T,position:V?.playPositionMilliseconds})]})}),J=(0,k.jsx)(Ue.X,{uri:f,uid:r,contextUri:i,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:u}),q=!g&&!!!F,G=m?null:(0,k.jsxs)(ki,{isPlaying:E,onClickPlay:W,isLocked:g&&!F,name:y,authorName:C,children:[(0,k.jsx)(Ni.H,{className:Re()({[ti]:M}),isAdded:M,onClick:()=>{M?I.logInteraction(R.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:f})):I.logInteraction(R.saveToLibraryButtonFactory().hitLike({itemToBeLiked:f})),O(!M)},size:Z,isAudiobook:!0,condensedAll:!0}),(0,k.jsx)(xi.j,{className:Re()({[ti]:(0,Oe.y)(B)}),uri:f,onClick:(e,i)=>{i===Me.mc.ADD&&I.logInteraction(R.downloadButtonFactory().hitDownload({itemToDownload:f}))},size:Z,canDownload:q,condensedAll:!0}),(0,k.jsx)(fi.T,{uri:f,sharingInfo:t??null,interactionData:{intent:"share",type:"click"},size:Z,onClick:()=>{I.logInteraction(R.shareButtonFactory().hitShare({entityToBeShared:f,shareId:t?.shareId??""}))},condensedAll:!0}),(0,k.jsx)(we.yj,{menu:J,children:(0,k.jsx)(bi.z,{label:c.ag.get("more.label.context",y),size:Z,onClick:()=>{I.logInteraction(R.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),Y=(0,k.jsx)(Si,{images:N,name:y,type:x,breakpoint:U}),X=A?(0,k.jsx)(s.x,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:A}):null,$=m?(0,k.jsx)(De.P,{size:"small",onClick:K,children:c.ag.get("playlist.extender.button.add")}):null,ee=(0,k.jsxs)(Le.l,{hasTextSeparator:!0,children:[(0,k.jsxs)(k.Fragment,{children:[m&&g&&(0,k.jsx)(Pe.Z,{semanticColor:"textSubdued",title:c.ag.get("mwp.header.content.unavailable"),size:"xsmall",className:Ti}),c.ag.get("card.tag.audiobook")]}),C]});return(0,k.jsx)(we._P,{menu:J,onShow:()=>{I.logInteraction(R.secondaryHitUiReveal())},children:(0,k.jsx)(di,{breakpoint:U,id:`book-${f}`,media:Y,pretitle:X,title:Q,body:H,subtitle:ee,footer:G,trailing:$,onClick:()=>{I.logInteraction(R.hitUiNavigate({destination:f})),P(_)},showSeparator:p,...v})})}));var Ai=a(78734),Ii=a(36199);const Ri=(0,n.createContext)({getReference:()=>null,setReference:()=>{}}),Ei=({children:e})=>{const i=(0,n.useRef)(null),a=(0,n.useCallback)((()=>i.current),[]),t=(0,n.useCallback)((e=>{i.current=e}),[]);return(0,k.jsx)(Ri.Provider,{value:{getReference:a,setReference:t},children:e})};const Di=(e,i,a)=>{const{name:l,uri:s,uid:r}=e,{sortState:d}=(0,n.useContext)(R.Gb),o=d.order!==Ii.kn.NONE,c=(0,_.O)({itemIds:[r],itemUris:[s],itemMimeTypes:[Ai.RN.AUDIOBOOKS],dragLabelText:l,contextUri:i}),{setReference:u,getReference:k}=(0,n.useContext)(Ri),p=(0,n.useCallback)((e=>{u({uri:s,uid:r}),c(e)}),[c,u,r,s]),v=(0,t.I0)(),y=(0,n.useContext)(de.ZF),S=(0,n.useCallback)(((e,a)=>{const n=e[Ai.RN.AUDIOBOOKS];if(!n)return;const t=k();t?a===Ae.Pw.BEFORE?y.move(i,[t],{before:{uri:s,uid:r}}):y.move(i,[t],{after:{uri:s,uid:r}}):a===Ae.Pw.BEFORE?v((0,m.jV)(i,n,{before:{uri:s,uid:r}})):v((0,m.jV)(i,n,{after:{uri:s,uid:r}})),u(null)}),[i,v,k,y,u,r,s]),g=a&&!o?[Ai.RN.AUDIOBOOKS]:[];return{...(0,Ae.WB)({uri:s,id:r,allowedMimeTypesByDropPosition:{[Ae.Pw.BEFORE]:g,[Ae.Pw.AFTER]:g},onDrop:S}),onDragStart:p}},Li="bg5inM_sdkHpYWiFf7Id",Pi="DyW2LAm9YDcCkcdM0eeP",_i=()=>(0,k.jsx)("div",{className:Pi}),wi=(0,n.memo)((function({item:e,contextUri:i,canEdit:a=!1,canRemove:n=!1,index:t}){const{className:l,dropPosition:s,...r}=Di(e,i,a);return(0,k.jsxs)(Ne.B,{className:l,"aria-posinset":t,reRunOnDOMUpdate:!0,children:[s===Ae.Pw.BEFORE&&(0,k.jsx)(_i,{}),(0,k.jsx)(ji,{book:e,contextUri:i,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:n,className:l,draggable:!0,showSeparator:0!==t,...r}),s===Ae.Pw.AFTER&&(0,k.jsx)(_i,{})]})}));var Ui=a(85987);const Vi=({contextUri:e,initialItems:i,nrItems:a,canEdit:t,canRemove:s,ariaLabel:r})=>{const d=(0,n.useContext)(de.ZF),o=(0,te.Mi)(),{filter:c}=(0,n.useContext)(I.fo),{sortState:m}=(0,n.useContext)(R.Gb),{contentsOptions:u}=(0,Ui.d)(m,c),[,p]=(0,E.d4)(),v=(0,n.useCallback)((async(i,a)=>{const n=await d.getContents(e,{...u,offset:i,limit:a}),t=n.items.map((e=>null===e?null:(0,je.yD)(e)?e:null));return{...n,items:t}}),[d,u,e]),{getItem:y,nrValidItems:S,invalidateCache:g}=(0,Te.Q)({nrItems:a,fetch:v,limit:50,initialItems:i});(0,n.useLayoutEffect)((()=>{p(S)}),[S,p]),(0,de.rZ)(e,g);const h=(0,n.useCallback)((e=>(0,k.jsx)("div",{style:{height:e}})),[]),N=(0,n.useCallback)(((i,a)=>{const n=y(i);return n?(0,k.jsx)(wi,{contextUri:e,item:n,canEdit:t,canRemove:s,index:i},n.uri):h(`${a}px`)}),[t,s,e,y,h]),x="POP"===(0,l.ur)()?0:10;return(0,k.jsx)("div",{className:Li,children:(0,k.jsx)(Ne.l,{firstInteractiveIsWrapper:!0,"aria-label":r,"aria-rowcount":S,"aria-colcount":6,children:(0,k.jsx)(Ei,{children:(0,k.jsx)(Fe,{totalCount:S,estimatedHeight:200,renderItem:N,renderPlaceholder:h,scrollNodeRef:o,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:x})})})})};var Mi=a(87236),Oi=a(13926),Bi=a(45438),Zi=a(92419),Ki=a(58912);const Wi={column:null,order:Ii.kn.NONE},zi=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,scrollToUid:t,usePlayContextItem:l,tracklistDomRef:s,sortableColumns:r,isCompactMode:d=!1}){const o=(0,n.useContext)(de.ZF),{filter:c,setFilter:m}=(0,n.useContext)(I.fo),u=(0,n.useRef)(null),p=(0,n.useCallback)((()=>{u.current&&u.current.update()}),[]);(0,Zi.r)(a,p);const{sortState:v,setSortState:y}=(0,n.useContext)(R.Gb),S=(0,n.useCallback)((e=>{y((0,A.VK)(e,v))}),[v,y]);(0,n.useEffect)((()=>{y(Wi),m("")}),[a,m,y]),(0,n.useEffect)((()=>{u.current&&t&&u.current.scrollToItem({uid:t})}),[t]);const g=(0,n.useCallback)((async(e,i)=>{const n=await o.getContents(a,{offset:e,limit:i,sort:(0,A._j)(v),filter:c,decorateFormatListData:!0});return{items:n.items,totalLength:n.totalLength}}),[a,o,v,c]),h=(0,n.useCallback)(((e,i)=>{const n=(0,Ki.X)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,k.jsx)(Ii.h_,{index:i,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:n?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:l,isCompactMode:d},i+e.uri)}),[a,l,d]),N=(0,Mi.v)(),x=(0,n.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,k.jsx)(Bi.JL,{value:"chart-tracklist",children:(0,k.jsx)(Ii.Pv,{ariaLabel:e,hasHeaderRow:!0,columns:N,sortableColumns:r,sortState:v,onSort:S,renderRow:h,resolveItem:x,nrTracks:i,fetchTracks:g,limit:100,canFetchAllTracks:o.getCapabilities().canFetchAllTracks,outerRef:u,outerDomRef:s,columnPersistenceKey:"chart-tracklist",isCompactMode:d,className:Oi.Z.chartTrackList},a)})}));var Qi=a(15842),Hi=a(66205),Ji=a(57562),qi=a(40235),Gi=a(33981),Yi=a(6395),Xi=a(80683),$i=a(57986),ea=a(67408),ia=a(25230),aa=a(66819),na=a(68007),ta=a(31734),la=a(12618),sa=a(27782),ra=a(91731),da=a(39276);const oa={bottomEnd:da.LR.topStart,top:da.LR.bottom},ca=({visible:e,onHide:i,placement:a,children:n,label:t})=>{const l=(0,r.W6)(ye.y);return(0,k.jsx)(sa.x,{placement:a,withPortal:!0,overlay:e&&(0,k.jsx)("div",{className:Re()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":l}),children:(0,k.jsx)(ra.J,{arrow:oa[a],colorSet:"announcement",onClose:i,children:t})}),children:n})};var ma=a(93400),ua=a(24918);let ka=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const pa=({uri:e,label:i,onClick:a,size:n=ka.md})=>{const{onCopyLink:t}=(0,ua.l)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:l,setToggleActivationVisible:s}=(0,ma.I)();return(0,k.jsx)(ca,{visible:l,onHide:()=>s(!1),label:c.ag.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,k.jsx)(la.ws,{label:i,children:(0,k.jsx)(na.o,{onClick:e=>{a?.(e),t?.()},iconOnly:ta.V,size:n,"aria-hidden":"true","aria-label":i,condensed:!0})})})};var va=a(51837),ya=a(8824),Sa=a(55538);const ga=n.memo((({metadata:e,tracklistDomRef:i,sortableColumns:a})=>{const{hasSpotifyAudiobooks:t}=e,l=t||!1,{spec:s,logger:r}=(0,ve.fU)(va.createDesktopSearchBarEventFactory,{}),d=(0,n.useCallback)((()=>{r.logInteraction(s.filterFieldFactory().keyStrokeFilter())}),[r,s]),o=(0,n.useCallback)((()=>{r.logInteraction(s.filterFieldFactory().hitClearFilter())}),[r,s]);return(0,k.jsxs)("div",{className:j.Z.searchBoxContainer,children:[(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(ya.K,{placeholder:c.ag.get("playlist.search_in_playlist"),onFilter:d,onClear:o,clearOnEscapeInElementRef:i})}),(0,k.jsx)(Sa.l,{columns:[...a],isBooklist:l})]})}));var ha=a(21705),Na=a(40703),xa=a(97324),ba=a(7863),fa=a(5784),Ca=a(28619),Fa=a(60702);const Ta="Uw4gqTFuHRLn4VKga_bJ",ja="SdECNwBCnmkKl0Q0mJff",Aa="HLkGXLclDq_7guCiD1Xq",Ia="vWR6alsFpTlgXUckErqF",Ra="EbHQLci0cfLjHmS0AKp2",Ea="HzYFPEbZdd6fQW4jfcz4",Da="SQEgwtR2aj51qFj6cMNZ",La="aaNtMSjjJ4cClWoe6K0k",Pa="BhtBJTnsM9AotmyN0MPr",_a="FwoyMQocCMLEafLlvAk5",wa="xcn0geYcJliTHbvcds12",Ua="KptBBI16DBjQBjvPQtlH";function Va(e){const i=(0,n.useRef)(null);return(0,k.jsx)(Na.Y,{center:!0,onClose:e.onClose,ref:i,withPortal:!0,children:(0,k.jsx)(xa.l,{className:Ta,"aria-label":"Example showing onClose property",body:(0,k.jsxs)("div",{className:Pa,children:[(0,k.jsx)(na.o,{size:"medium","aria-label":"IconX",iconOnly:ba.k,onClick:e.onClose,className:wa}),(0,k.jsx)(na.o,{size:"medium","aria-label":"IconArrowLeft",iconOnly:Ca.D,className:_a}),(0,k.jsx)("div",{className:ja,children:(0,k.jsxs)("div",{className:Aa,children:[(0,k.jsx)("div",{className:Ra,children:(0,k.jsxs)("div",{className:Ea,children:[(0,k.jsx)(ha.E,{className:Da,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,k.jsx)(ha.E,{className:La,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,k.jsxs)("div",{className:Ia,children:[(0,k.jsxs)(s.x,{as:"p",variant:"marginalBold",children:[(0,k.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,k.jsxs)(s.x,{as:"p",variant:"titleMedium",children:["IM IN THE ",(0,k.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,k.jsx)("div",{className:Ra,children:(0,k.jsx)(Fa.V,{size:"xlarge"})})]})}),(0,k.jsx)("div",{className:Ua,children:(0,k.jsx)(x.D,{colorSet:"invertedLight",children:"Share"})})]})})})}const Ma="nTTPGZGk721M6gfldG43",Oa="BFYSUcA4ifYvgDzOQX5Q",Ba="el9_37CCpYKxCRKDDyww",Za="FB376b7R1M_0YQZ_SahS",Ka="srPBn9_CV0NzQEEzW9f6",Wa="te8Z8OuKxZx1gbjb7_ua",za=n.memo((function({setuserView:e}){const[i,a]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[i&&(0,k.jsx)(Va,{onClose:()=>{a(!1)}}),(0,k.jsx)(Na.Y,{center:!0,withPortal:!0,children:(0,k.jsx)(xa.l,{colorSet:"overMedia","aria-label":"Title",body:(0,k.jsx)("div",{children:(0,k.jsx)(s.x,{as:"p"})}),dialogTitle:(0,k.jsxs)("div",{className:Ma,children:[(0,k.jsxs)("div",{className:Ba,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(ha.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,k.jsx)(ha.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsx)(s.x,{as:"h1",variant:"titleMedium",children:"Rap Caviar"})]}),(0,k.jsxs)("div",{className:Oa,children:[(0,k.jsx)(na.o,{iconOnly:ba.k,onClick:()=>e(!1),className:Ka}),(0,k.jsx)(na.o,{iconOnly:fa.o,className:Wa,onClick:()=>{a(!0)}})]}),(0,k.jsx)("div",{className:Za,children:(0,k.jsx)(s.x,{as:"p",variant:"bodyMedium",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),Qa="__97AKHEfxNtqFsLai1b",Ha="pzFwHV7jvPlWTI6cG5TV",Ja="iZu1aH8cr2cw98gqmTeo",qa="JRvbfJh7eAZ_1FrQukej";function Ga(){const[e,i]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[e&&(0,k.jsx)(za,{setuserView:i}),(0,k.jsxs)("button",{className:Qa,onClick:()=>i(!0),children:[(0,k.jsxs)("div",{className:Ha,children:[(0,k.jsx)(ha.E,{className:Ja,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(ha.E,{className:Ja,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(ha.E,{className:Ja,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsxs)("div",{className:qa,children:[(0,k.jsx)(s.x,{as:"p",variant:"bodySmallBold",children:"View employee leaderboard"}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:"You're in the top 21% of listeners."})]})]})]})}var Ya=a(1390),Xa=a(72417);const $a=n.memo((function({playlist:e,capabilities:i,spec:a,isPlaying:t,isActive:l,togglePlay:s,isBooklist:d,isConcert:o=!1,backgroundColor:m,tracklistDomRef:u,sortableColumns:p}){const{metadata:{uri:v,name:y,unfilteredTotalLength:S,isOwnedBySelf:g,canPlay:h,isPublished:N,totalLength:x}}=e,f=(0,W.k)(),C=(0,ve.$P)(),F=(0,n.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),T=i.canFilter&&S>0,A=i.canSort&&S>0,I=S>0,R=(0,r.W6)(Y.v8$),E=(0,r.W6)(Y.MF8,{loadingValue:!1}),D=(0,Xa.Q)(),[L,P]=(0,b.Z)(v),_=(0,K.o)(),w=(0,n.useCallback)((async()=>{_({targetUri:v,intent:L?"unsave":"save",type:"click"});try{await P(!L)}catch{}}),[L,_,P,v]),U=(0,n.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:v,shareId:""});C.logInteraction(e)}),[a,C,v]),V=(0,n.useCallback)((()=>{let e;const i=a.heartButtonFactory();e=L?i.hitUnfollow({itemToBeUnfollowed:v}):i.hitFollow({itemToBeFollowed:v}),C.logInteraction(e),w()}),[a,w,L,C,v]),M=(0,aa.j)(),O=T&&A;return(0,k.jsxs)(Qi.o,{backgroundColor:m,children:[(0,k.jsxs)(Hi.F,{children:[h&&!d?(0,k.jsx)($i.$,{onClick:s,isPlaying:t,size:M,uri:v,ariaPlayLabel:c.ag.get("playlist.a11y.play",y),ariaPauseLabel:c.ag.get("playlist.a11y.pause",y)}):null,D&&x>0&&!d&&(0,k.jsx)(ve.Nh,{spec:F,children:(0,k.jsx)(ia.K,{shuffleContext:Ya.W.playlistActionBar,entityName:y,contextUri:v,isActive:l,activationPlacement:"bottomEnd",size:M})}),g?null:(0,k.jsx)(Yi.r,{children:(0,k.jsx)(Ni.H,{isAdded:!!L,onClick:V,size:M})}),!d&&(0,k.jsx)(Ji.o,{uri:v,isFollowing:!!L,canDownload:I,onClick:(e,i)=>(0,ne.l7)(i,a.downloadButtonFactory(),C,v),onFollow:w,size:M}),(0,k.jsx)(Xi.F,{property:Y.bMb,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&f&&(!d||E)?(0,k.jsx)(pa,{onClick:U,label:c.ag.get("permissions.invite-collaborators",y),uri:v,size:M}):null}),(o||d)&&(0,k.jsx)(fi.T,{uri:v,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:o?"concerts-near-you/share":"booklist/share"},onClick:U,size:M}),(0,k.jsx)(qi.y,{onShow:()=>(0,ne.qq)(a,C),menu:(0,k.jsx)(Gi.X,{uri:v,isPublished:N}),children:(0,k.jsx)(bi.z,{label:c.ag.get("more.label.context",y),size:M})}),O?(0,k.jsx)(ve.Nh,{spec:a,children:(0,k.jsx)(ga,{metadata:e.metadata,tracklistDomRef:u,sortableColumns:p})}):(0,k.jsx)("div",{className:j.Z.leadingSlot,children:(0,k.jsx)(Xi.F,{property:Y.FMs,renderNewExperience:()=>(0,k.jsx)(ea.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),R&&(0,k.jsx)(Ga,{})]})}));var en=a(66197);const an=e=>{const i=(0,ve.$P)(),a=(0,n.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),t=(0,ve.Wi)(a);return(0,k.jsxs)("div",{className:j.Z.concertsFooter,children:[(0,k.jsx)(Ve.default,{to:"/concerts",className:j.Z.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});i.logInteraction(e)},children:(0,k.jsxs)("div",{className:j.Z.promoRow,ref:t,children:[(0,k.jsx)(s.x,{as:"h2",variant:"bodyMediumBold",className:j.Z.promoTitle,children:c.ag.get("concerts.find_more")}),(0,k.jsx)(en.A,{as:"span",selected:!0,children:c.ag.get("concerts.find_nearby")}),(0,k.jsx)("img",{className:j.Z.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,k.jsx)("div",{className:j.Z.disclaimerContainer,children:(0,k.jsx)(s.x,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:c.ag.get("concerts_near_you.playlist_disclaimer")})})]})};var nn=a(57370),tn=a(21523),ln=a(85357);const sn="multiUserAttributionDisplayNamesV2";function rn(e){return(0,je.MW)(e)||(0,je.JF)(e)}function dn(e){return(0,je.MW)(e)||(0,je.JF)(e)||(0,je.yD)(e)}const on=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,playlistName:l,isMixedMedia:s,isLive:d,isBlend:u,isConcert:p,isBooklist:v,canEdit:y,scrollToUid:S,feedbackPath:g,deleteFeedbackPath:h,usePlayContextItem:N,tracklistRef:x,tracklistDomRef:b,canRemove:f,spec:C,initialItems:F,isCompactMode:T=!1,sortableColumns:j,hasSpotifyAudiobooks:D}){const L=(0,ve.$P)(),P=(0,r.W6)(Y.Kpm),_=(0,n.useContext)(de.ZF),{filter:w}=(0,n.useContext)(I.fo),{sortState:U,setSortState:V}=(0,n.useContext)(R.Gb),M=(0,n.useRef)((()=>{})),[O,B]=(0,n.useState)([]),Z=(0,t.I0)(),K=(0,Mi.v)(),W=(0,n.useCallback)((()=>{x?.current&&x.current.update()}),[x]);(0,de.rZ)(a,W);const z=(0,n.useCallback)(((e,i)=>{V((0,A.VK)(e,U)),L.logInteraction(C.columnHeaderFactory({identifier:e,position:i||0}).hitSort())}),[V,U,L,C]),Q=(0,n.useCallback)((e=>{M.current(),_.remove(a,e)}),[_,a]),H=(0,n.useCallback)(((e,i,a=!1)=>{f&&(M.current=i,e.length>1&&!a?B(e):Q(e))}),[f,Q]);(0,n.useEffect)((()=>{x?.current&&S&&x.current.scrollToItem({uid:S})}),[S,x]);const J=(0,n.useCallback)((async(e,i)=>{const n=await _.getContents(a,{offset:e,limit:i,sort:(0,A._j)(U),filter:w,decorateFormatListData:!!g||d||u});return{items:n.items,totalLength:n.totalLength}}),[a,_,U,w,g,d,u]),q=(0,n.useCallback)(((e,i,n)=>{if(!x?.current)return;const t=x.current.getRows()[i];t&&(L.logInteraction(C.dragSort()),n===ln.W.Before?_.move(a,e,{before:t}):_.move(a,e,{after:t}))}),[x,L,C,_,a]),G=(0,n.useCallback)(((e,i,n)=>{if(!x?.current)return;const t=x.current.getRows()[i];t&&(L.logInteraction(C.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),n===ln.W.Before?Z((0,m.jV)(a,e,{before:{uri:t.uri,uid:t.uid}})):Z((0,m.jV)(a,e,{after:{uri:t.uri,uid:t.uid}})))}),[x,L,C,a,Z]),X=(0,n.useCallback)((()=>{_.resync(a)}),[_,a]),$=(0,n.useCallback)(((e,i)=>{let n,t=null;(0,je.JF)(e)?(t=e.show,n=e.images.concat(e.show?.images||[])):(0,je.MW)(e)?(t=e.album,n=e.album?.images):(0,je.yD)(e)&&(n=e.images);const r=(0,Ki.X)(n,{desiredSize:40,desiredLabel:"small"});let d=[];y&&U.order===Ii.kn.NONE&&(d=v?[Ai.RN.AUDIOBOOKS]:[Ai.RN.TRACKS,Ai.RN.LOCAL_TRACKS,Ai.RN.EPISODES,...D?[Ai.RN.AUDIOBOOKS]:[]]);const c="1"===e?.formatListAttributes?.["dislike-feedback-selected"],m=!!(0,je.JF)(e)&&e.podcastSubscription.isUserSubscribed;let S=!1;(0,je.JF)(e)&&e.podcastSubscription.isPaywalled&&!m?S=!0:rn(e)?S=e.isPlayable&&!c:(0,je.yD)(e)&&(S=!0);let x=!1;(0,je.JF)(e)&&e.podcastSubscription.isPaywalled?x=!0:(0,je.yD)(e)&&(x=e.isLocked&&!e.isOutOfMarket);const b=u&&((e,i)=>{const a=[];if(!i)return a;const n=i[sn]?sn:"multiUserAttributionDisplayNames",t=i?.[n]?.split(","),l=i?.multiUserAttributionImages?.split(",");if(!t||!l)return a;const s=i?.multiUserAttributionUsernamesV2?.split(",")||[],r=i?.multiUserAttributionType?.split(",")||[],d=t.length;for(let e=0;e<d;e++){const i=s[e],n=i&&(0,o.QK)(i).toURI();a.push({username:i,uri:n,displayName:t[e],images:(c=l[e],c.length>1?[{url:c}]:[]),recsplanation:r[e]})}var c;return a.sort(((i,a)=>i.username?i.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let C=0;rn(e)?C=e.duration.milliseconds:(0,je.yD)(e)&&(C=e.durationMs||0);let F="";return dn(e)&&(F=e.name),(0,k.jsx)(Ii.dx,{isCompactMode:T,index:i,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:S,duration_ms:C,isPaywalled:x,isUserSubscribed:m,name:F,artists:(0,je.MW)(e)?e.artists:void 0,albumOrShow:t,isExplicit:(dn(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,je.MW)(e)&&e.hasAssociatedVideo&&P)??!1,isMixedMedia:s,isLocal:(0,je.MW)(e)&&e.isLocal,addedBy:b,hasDecoratedAddedBy:_.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,je.JF)(e)&&e.release.date||"",isMOGEFRestricted:((0,je.MW)(e)||(0,je.JF)(e))&&e.is19PlusOnly,type:e.type,imgUrl:r?.url||"",onMove:q,onInsert:G,usePlayContextItem:N,allowedDropTypes:d,feedbackPath:g,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:h,isDisliked:c,isBlend:u,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:f,onFeedbackClick:X,playlistName:l,isConcert:p,concertsCount:e.formatListAttributes?.concerts_count,concertURI:e.formatListAttributes?.target_uri,concertDate:e.formatListAttributes?.first_concert_date,concertVenue:e.formatListAttributes?.first_concert_venue,authorName:(0,je.yD)(e)?e.authorName:"",isOutOfMarket:!!(0,je.yD)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,je.yD)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:y},i+e.uri)}),[y,v,U.order,u,T,a,P,s,_,q,G,N,g,h,f,X,l,p,D]),ee=(0,n.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,ie]=(0,E.d4)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Bi.JL,{value:"playlist-tracklist",children:(0,k.jsx)(Ii.Pv,{isCompactMode:T,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:K,sortableColumns:j,sortState:U,onSort:z,onRemove:H,renderRow:$,resolveItem:ee,nrTracks:i,fetchTracks:J,limit:100,canFetchAllTracks:_.getCapabilities().canFetchAllTracks,outerRef:x,outerDomRef:b,tracks:F,isConcertPlaylist:p,onNrValidItemsChange:ie,columnPersistenceKey:"playlist-tracklist"},a)}),(0,k.jsx)(tn.h,{title:c.ag.get("playlist.remove_from_playlist",l),isOpen:O.length>0,tracks:O,onClose:e=>{e.stopPropagation(),B([])},onRemove:Q})]})}));var cn=a(30089),mn=a(94260),un=a(92075),kn=a(44246),pn=a(65441);const vn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"audiobookMetadata"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"htmlDescriptionPlain"}},{kind:"Field",name:{kind:"Name",value:"authors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"genres"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shortName"}},{kind:"Field",name:{kind:"Name",value:"destinationUri"}},{kind:"Field",name:{kind:"Name",value:"contextualName"}}]}},{kind:"Field",name:{kind:"Name",value:"rating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"averageRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"average"}},{kind:"Field",name:{kind:"Name",value:"showAverage"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"accessInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isUserMemberOfAtLeastOneGroup"}},{kind:"Field",name:{kind:"Name",value:"accessExplanation"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConsumptionCappedAccessExplanation"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"body"}},{kind:"Field",name:{kind:"Name",value:"actionText"}},{kind:"Field",name:{kind:"Name",value:"ctaUrl"}},{kind:"Field",name:{kind:"Name",value:"dismiss"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"signifier"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}}]}},{kind:"Field",name:{kind:"Name",value:"unlockedBy"}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareId"}},{kind:"Field",name:{kind:"Name",value:"shareUrl"}}]}}]}}]},yn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getAudiobooksMetadata"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"podcasts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"audiobookMetadata"}}]}}]}}]}},...vn.definitions]},Sn={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Track"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]},gn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResultsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}},...Sn.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Artist"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Artist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Album"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Album"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Episode"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Episode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]},hn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2Booklists"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"topResultsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudiobookResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"audiobookMetadata"}}]}}]}}]}}]}}]}}]}}]}}]}},...vn.definitions]},Nn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationAlbums"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationAlbums"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}},...Sn.definitions]},xn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationArtists"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}}]}},...Sn.definitions]};var bn=a(52559);function fn(e){return{type:M.p.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authors?.map((e=>e?.name)).join(c.ag.getSeparator())||"",images:e.coverArt?.sources??[],isLocked:(0,bn.P2)(e.accessInfo),isExplicit:e.contentRating?.label===He.KS.Explicit,durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var Cn=a(73928),Fn=a(8696),Tn=a(91054),jn=a(70526);function An(e){return{type:M.p.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,Fn.NS)(e.coverArt)}}function In(e){if("Album"!==e.data.__typename)return null;return An(e.data)}function Rn(e){const i=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(i??[]).map((e=>In(e))).filter(Tn.K)||[]}function En(e){if("Artist"!==e.data.__typename)return null;const i=e.data;return{type:M.p.ARTIST,uri:i.uri,id:i.id,name:i.profile.name,images:(0,Fn.NS)(i.visuals.avatarImage)}}function Dn(e){if("Episode"!==e.data.__typename)return null;const i=e.data,a=i.podcastV2.data;return"Podcast"!==a.__typename?null:{type:M.p.EPISODE,uri:i.uri,id:i.id,name:i.name,images:(0,Fn.NS)(i.coverArt),isExplicit:i.contentRating?.label===Cn.KS.Explicit,is19PlusOnly:i.contentRating?.label===Cn.KS.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:i.playability.playable}}function Ln(e){const i=(0,Fn.NS)(e.albumOfTrack?.coverArt||null);return{type:M.p.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:i.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===Cn.KS.Explicit,is19PlusOnly:e.contentRating?.label===Cn.KS.NineteenPlus}}function Pn(e){if("Track"!==e.data.__typename)return null;return Ln(e.data)}function _n(e){return(e?.itemsV2??[]).map((e=>{const i=(0,Fn.U2)(e,"item");switch(i.__typename){case"AlbumResponseWrapper":return In(i);case"ArtistResponseWrapper":return En(i);case"EpisodeResponseWrapper":return Dn(i);case"TrackResponseWrapper":return Pn(i);default:return(0,jn._)(i),null}})).filter(Tn.K)||[]}function wn(e){return(e?.itemsV2??[]).map((e=>{const i=(0,Fn.U2)(e,"item");return"AudiobookResponseWrapper"===i.__typename&&"Audiobook"===i.data.__typename?fn(i.data):null})).filter(Tn.K)||[]}const Un=async(e,i,a,n=0,t=10,l=10)=>{const s={term:i,offset:n,limit:t,numberOfTopResults:l};if(a){const a=await e(hn,s),n=a?.data?.searchV2;return n?(r=i,{albums:[],artists:[],episodes:[],tracks:[],topResults:wn(n.topResultsV2)??[],query:r}):null}var r;const d=await e(gn,s),o=d?.data?.searchV2;return o?function(e,i){return{albums:Rn(e.albumsV2)??[],artists:(t=e.artists,((t?.items??[]).map((e=>En(e))).filter(Tn.K)||[])??[]),episodes:(n=e.episodes,((n?.items??[]).map((e=>Dn(e))).filter(Tn.K)||[])??[]),tracks:(a=e.tracksV2,((a?.items??[]).map((e=>Pn(e.item))).filter(Tn.K)||[])??[]),topResults:_n(e.topResultsV2)??[],query:i};var a,n,t}(o,i):null},Vn=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(Nn,t),s=l?.data?.albums;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:i.tracks.items.map((e=>Ln(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,jn._)(i),null}}(s):null},Mn=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(xn,t),s=l?.data?.artists;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Artist":return{albums:i.discography.popularReleasesAlbums.items.map((e=>An(e)))||[],artists:[],episodes:[],tracks:i.discography.topTracks.items.map((e=>Ln(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,jn._)(i),null}}(s):null};var On=a(49857),Bn=a(45540);const Zn="playlist-inlineSearchBox-filterInputContainer",Kn="playlist-inlineSearchBox-filterInput",Wn="playlist-inlineSearchBox-overlay",zn="playlist-inlineSearchBox-searchIconContainer",Qn="playlist-inlineSearchBox-searchIcon",Hn="playlist-inlineSearchBox-clearButton",Jn=n.memo((function({placeholder:e,onChange:i=(()=>{}),onFocus:a=(()=>{})}){const[t,l]=(0,n.useState)(""),r=(0,n.useRef)(null),d=(0,On.y1)((e=>{i(e)}),200),o=(0,n.useCallback)((e=>{const i=e.currentTarget.value;l(i),d(i)}),[l,d]),m=(0,n.useCallback)((()=>{r.current&&r.current.focus(),l(""),i("")}),[l,i]),u=(0,n.useCallback)((e=>{"Escape"===e.key&&t&&m()}),[t,m]);return(0,k.jsxs)("div",{className:Zn,role:"search",children:[(0,k.jsx)(s.x,{as:"input",variant:"bodySmall",ref:r,className:Re()(Kn),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:o,onKeyDown:u,onFocus:a,value:t}),(0,k.jsxs)("div",{className:Wn,children:[(0,k.jsx)("span",{className:zn,children:(0,k.jsx)(Bn.j,{size:"small",className:Qn,"aria-hidden":"true"})}),t&&(0,k.jsx)("button",{className:Hn,onClick:m,"aria-label":c.ag.get("search.a11y.clear-input"),children:(0,k.jsx)(ba.k,{size:"small"})})]})]})})),qn=({renderRow:e,searchResults:i,renderSeeAllRow:a,seeAllXList:n})=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.all"),renderRow:a,rowPlaceholder:Ii.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD],testID:"playlist-inline-curation-see-all-options"})]}),Gn=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]}),Yn=({renderRow:e,searchResults:i})=>{const a=i.filter((e=>e.type===M.p.TRACK)),n=i.filter((e=>e.type===M.p.ALBUM));return(0,k.jsxs)("div",{children:[(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",className:j.Z.artistResultListTitle,children:c.ag.get("playlist.curation.popular_songs")}),(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]}),(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",className:j.Z.artistResultListTitle,children:c.ag.get("playlist.curation.albums")}),(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]})]})},Xn=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]}),$n=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]}),et=({renderRow:e,searchResults:i})=>(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ii.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADD]});var it=a(61815);const at="G2t3w2AAeb5OXp0_GeWs",nt="saVjTFMyWYUz975_tkQm",tt="thi8fNCkEhutRkDC90c0",lt="pHVlkChuJpEnBQyU3ADv",st="ENWs3JxcqtD98_8fbPz2",rt="L8IUKEJL6JiTyE_qUVCc",dt="XcyjdXgsNX0DBt72tfiD",ot="VhJnuS7UcUPfIlzD8dlU",ct="He29vQ5anFj_bJ5iEaI2",mt=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,k.jsx)(it.RX,{className:st,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:ct,onClick:n,children:[(0,k.jsxs)(it.id,{columnIndex:0,className:rt,children:[void 0!==t?(0,k.jsx)("img",{className:tt,src:t,alt:e.name}):null,(0,k.jsxs)("div",{className:dt,children:[(0,k.jsx)(s.x,{as:"p",className:lt,variant:"bodyMedium",children:e.name}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:c.ag.get("album")})]})]}),(0,k.jsx)(it.id,{columnIndex:1}),(0,k.jsx)(it.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:ot,onClick:n,children:a?(0,k.jsx)(un.e,{}):(0,k.jsx)(mn.V,{})})})]})})};var ut=a(6958);const kt=({size:e})=>(0,k.jsx)("div",{className:nt,children:(0,k.jsx)(ut.a,{size:e})}),pt=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,k.jsx)(it.RX,{className:st,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:ct,onClick:n,"data-testid":"playlist-inline-curation-artist",children:[(0,k.jsxs)(it.id,{columnIndex:0,className:rt,children:[void 0!==t?(0,k.jsx)("img",{className:at,src:t,alt:e.name}):(0,k.jsx)(kt,{size:"small"}),(0,k.jsxs)("div",{className:dt,children:[(0,k.jsx)(s.x,{as:"p",className:lt,variant:"bodyMedium",children:e.name}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:c.ag.get("artist")})]})]}),(0,k.jsx)(it.id,{columnIndex:1}),(0,k.jsx)(it.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:ot,onClick:n,children:a?(0,k.jsx)(un.e,{}):(0,k.jsx)(mn.V,{})})})]})})},vt=({episode:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,k.jsx)(Ii.YK,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:n}),yt=({label:e,index:i,isRTL:a,onClick:n})=>(0,k.jsx)(it.RX,{className:st,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":e,className:ct,onClick:n,children:[(0,k.jsx)(it.id,{columnIndex:0,className:rt,children:(0,k.jsx)(s.x,{as:"p",className:lt,variant:"bodyMedium",children:e})}),(0,k.jsx)(it.id,{columnIndex:1}),(0,k.jsx)(it.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:ot,onClick:n,children:a?(0,k.jsx)(un.e,{}):(0,k.jsx)(mn.V,{})})})]})}),St=({track:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,k.jsx)(Ii.cp,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:n});let gt=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const ht=(e,i)=>"GO_BACK"===i.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:("NAV_TO_RESULTS"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:"CHANGE_TERM"===i.type&&(e={term:i.term,breadcrumbs:[{navType:gt.SEARCH,term:i.term,title:""}]}),e),Nt=({resultList:e,level:i,isRTL:a,playlistUri:t,navToResults:l,navToEntity:r,term:d,isBooklist:m})=>{let u=e;const p=(e=>e.map((e=>{if(e.type===M.p.TRACK||e.type===M.p.EPISODE){const{uri:i,id:a}=e;return{type:(0,o.wj)(i)?M.p.TRACK:M.p.EPISODE,uri:i,uid:a,provider:null}}return null})).filter(Tn.K))(e),v=(0,_.O)(),{usePlayContextItem:y}=(0,re.n)({uri:`${t.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(d)}:${i?.navType??0}`,pages:[{items:p}]},{featureIdentifier:"search"}),S=(0,n.useCallback)(((e,i)=>(0,k.jsx)(yt,{isRTL:a,index:i,label:e.label,onClick:()=>{l({navType:e.type,term:d,title:e.label})}},e.uri)),[a,l,d]),g=(0,n.useCallback)(((e,i)=>e.type===M.p.ARTIST?(0,k.jsx)(pt,{isRTL:a,index:i,searchResult:e,onClick:()=>{r({navType:gt.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===M.p.EPISODE?(0,k.jsx)(vt,{index:i,episode:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===M.p.TRACK?(0,k.jsx)(St,{index:i,track:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===M.p.ALBUM?(0,k.jsx)(mt,{index:i,isRTL:a,searchResult:e,onClick:()=>{r({navType:gt.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,k.jsx)(ji,{book:e,featureIdentifier:"playlist_recommendations",contextUri:t,isRecommendation:!0,showSeparator:0!==i},e.uri)),[a,r,t,y]);if(""===d)return(0,k.jsx)("div",{className:j.Z.emptySearchTermContainer});if(!e||0===e?.length)return(0,k.jsxs)("div",{className:j.Z.emptyStateContainer,children:[(0,k.jsx)(s.x,{as:"h1",variant:"titleSmall",children:c.ag.get("search.empty-results-title",d)}),(0,k.jsx)(s.x,{as:"p",variant:"bodySmall",children:c.ag.get("search.empty-results-text")})]});if(i?.navType===gt.SEARCH){const i=[{type:gt.ARTISTRESULTS,label:c.ag.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:gt.ALBUMRESULTS,label:c.ag.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:gt.TRACKRESULTS,label:c.ag.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return u=e,m?(0,k.jsx)(k.Fragment,{children:u.map(((e,i)=>e&&e.type===M.p.AUDIOBOOK?(0,k.jsx)(ji,{contextUri:t,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:!0,onDragStart:i=>{v(i,{itemUris:[e.uri],itemMimeTypes:[Ai.RN.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==i},i):null))}):(0,k.jsx)(qn,{renderRow:g,searchResults:u,renderSeeAllRow:S,seeAllXList:i})}return i?.navType===gt.ALBUM?(0,k.jsx)(Gn,{renderRow:g,searchResults:u}):i?.navType===gt.ARTIST?(0,k.jsx)(Yn,{renderRow:g,searchResults:u}):i?.navType===gt.ALBUMRESULTS?(0,k.jsx)(Xn,{renderRow:g,searchResults:u}):i?.navType===gt.TRACKRESULTS?(0,k.jsx)($n,{renderRow:g,searchResults:u}):i?.navType===gt.ARTISTRESULTS?(0,k.jsx)(et,{renderRow:g,searchResults:u}):null},xt=({playlistUri:e,onCurationModeChange:i,isBooklist:a})=>{const[t,l]=(0,n.useState)([]),[r,d]=(0,n.useState)(),o=(0,kn.S)(),{level:m,changeTerm:u,goBack:p,navToEntity:v,navToResults:y,term:S}=(()=>{const[e,i]=(0,n.useReducer)(ht,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:t}=e;return{changeTerm:e=>{i({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{i({type:"GO_BACK"})},navToEntity:e=>{i({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{i({type:"NAV_TO_RESULTS",level:e})},term:t}})(),{request:g}=(0,n.useContext)(pn.Ax);return(0,n.useEffect)((()=>{let e=!0;return(async()=>{if(m)switch(m.navType){case gt.SEARCH:try{if(!r||r.query!==S&&""!==S){const i=await Un(g,S,a);e&&d(i)}else""===S&&l([])}catch{l([])}r&&l(r.topResults);break;case gt.ARTISTRESULTS:r&&l(r?.artists);break;case gt.ALBUMRESULTS:r&&l(r?.albums);break;case gt.TRACKRESULTS:r&&l(r?.tracks);break;case gt.EPISODERESULTS:r&&l(r?.episodes);break;case gt.ALBUM:try{const i=await Vn(g,m.uri,100,0);e&&i&&l(i.tracks)}catch{l([])}break;case gt.ARTIST:try{const i=await Mn(g,m.uri,100,0);e&&i&&l([...i.albums,...i.tracks])}catch{l([])}}})(),()=>{e=!1}}),[m,S,r,g,a]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("section",{className:j.Z.playlistInlineCurationSection,children:[(0,k.jsxs)("div",{className:j.Z.playlistInlineCurationWrapper,children:[(0,k.jsx)(s.x,{as:"h1",className:j.Z.playlistInlineCurationTitle,variant:"titleSmall",children:c.ag.get("playlist.curation.title")}),(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Jn,{placeholder:a?c.ag.get("playlist.curation.search_placeholder-booklists"):c.ag.get("playlist.curation.search_placeholder"),onFocus:()=>{i(!0)},onChange:e=>{u(e)}})})]}),(0,k.jsx)("button",{className:j.Z.playlistInlineCurationCloseButton,onClick:()=>i(!1),children:(0,k.jsx)(ba.k,{"aria-label":c.ag.get("close")})})]}),null!==m&&m.navType!==gt.SEARCH?(0,k.jsxs)("button",{className:j.Z.playlistInlineCurationBackButton,onClick:()=>p(),children:[o?(0,k.jsx)(mn.V,{"aria-label":c.ag.get("navbar.go-back"),className:j.Z.icon}):(0,k.jsx)(un.e,{"aria-label":c.ag.get("navbar.go-back"),className:j.Z.icon}),(0,k.jsx)(s.x,{as:"p",variant:"bodyMediumBold",children:m.title})]}):null,(0,k.jsx)("div",{className:j.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,k.jsx)(Nt,{playlistUri:e,term:S,level:m,resultList:t,navToEntity:v,navToResults:y,isRTL:o,isBooklist:a})})]})};var bt=a(38965),ft=(a(54487),a(42738)),Ct=a(32167),Ft=a(78024),Tt=a(79096);const jt=3e5;function At(e,i){return["list-extender",e,i]}const It=(e,i,a=10,t)=>{const l=2*a,s=3*a,r=(0,Ze.NL)(),o=(0,n.useRef)(0),[c,m]=(0,n.useState)(e),[u,k]=(0,n.useState)((()=>r.getQueriesData({queryKey:At(e,i),stale:!1}).at(0)?.[1]??[])),p=(0,n.useRef)(u.map((e=>e.uri??""))),{spec:v,logger:y}=(0,ve.fU)(d.T,{data:{uri:e}}),S=(0,n.useMemo)((()=>v.recommendedFactory()),[v]);(0,Tt.F)(Ft.XL.OPERATION_COMPLETE,(({data:a})=>{a.uri===e&&(a.operation===Ft.If.ADD?k((e=>e.filter((e=>a.uris.every((i=>i!==e.uri)))))):a.operation===Ft.If.REMOVE&&k((e=>e.filter((e=>a.items.every((i=>i.uri!==e.uri)))))),a.operation!==Ft.If.ADD&&a.operation!==Ft.If.REMOVE||r.invalidateQueries({queryKey:At(e,i)}))}));const g=(0,n.useRef)(!0);(0,n.useEffect)((()=>(g.current||(k([]),m(e),p.current=[],o.current=o.current+1),g.current=!0,()=>{o.current=o.current+1})),[e]),(0,n.useEffect)((()=>{if(u.length<l){const e=Math.min(l,s-u.length),a=o.current,n=At(c,i),d=g.current&&0===p.current.length;(d?r.fetchQuery({queryKey:n,queryFn:()=>t(c,[],e),staleTime:jt,gcTime:jt}):t(c,p.current,e)).then((i=>{if(a!==o.current||!i)return;const t=i.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));i.length<e&&p.current.length?p.current=[]:p.current=[...p.current,...t],k((e=>[...e,...i])),d&&r.setQueryData(n,i)}))}g.current=!1}),[l,s,c,u.length,r,t,i]);const h=(0,n.useCallback)((()=>{if(v){const e=S.refreshButtonFactory().hitRefreshContent();y.logInteraction(e)}k((e=>e.slice(a)))}),[y,S,v,a]);return{recommendations:u.slice(0,a),_bufferedRecommendations:u.slice(a),refresh:h}},Rt=n.memo((function({uri:e}){const{recommendations:i,refresh:a}=((e,i=10)=>{const a=(0,n.useContext)(ft.Z),{request:t}=(0,n.useContext)(pn.Ax),l=(0,n.useCallback)((async(e,i,n)=>{const l=await a.getRecommendedBookUris(e,i,n),s=await t(yn,{uris:l});return s?.data?.podcasts.map((e=>"Audiobook"===e.__typename?fn(e):null)).filter(Tn.K)??[]}),[a,t]);return It(e,"book",i,l)})(e),t=(0,_.O)(),l=(0,bt.s)();return l?i?.length&&i.length>0?(0,k.jsxs)("div",{className:j.Z.recommendedTrackList,children:[(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:c.ag.get("playlist.extender.songs.in.playlist")})]})}),l&&(0,k.jsxs)(k.Fragment,{children:[i.map(((i,a)=>i?(0,k.jsx)(ji,{contextUri:e,featureIdentifier:"playlist_recommendations",book:i,sharingInfo:i.sharingInfo,isRecommendation:!0,draggable:!0,onDragStart:e=>{t(e,{itemUris:[i.uri],itemMimeTypes:[Ai.RN.AUDIOBOOKS],dragLabelText:i.name})},showSeparator:0!==a},a):null)),(0,k.jsx)(na.o,{className:j.Z.refreshButton,onClick:a,children:c.ag.get("playlist.extender.refresh")})]})]}):null:(0,k.jsx)("div",{className:j.Z.recommendedTrackList,children:(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:c.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),Et=n.memo((function({playlistUri:e,canEdit:i,tracks:a}){const{usePlayContextItem:t}=(0,re.n)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:M.p.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),l=(0,n.useCallback)(((a,n)=>{const l=a.duration;return(0,k.jsx)(Ii.cp,{index:n,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!a.isMOGEFRestricted,name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:t,durationMs:l,shouldRenderDuration:!i,internalLink:!0},`${n}-${a.uri}`)}),[e,t,i]),s=(0,n.useMemo)((()=>[Ii.QD.TITLE_AND_ARTIST,Ii.QD.ALBUM,Ii.QD.ADDED_AT,Ii.QD.ADD]),[]),r=(0,n.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),d=(0,n.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,k.jsx)(Ii.Pv,{ariaLabel:c.ag.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:Ii.hU,tracks:d,renderRow:l,resolveItem:r,columns:s},`${e}-recommended`)})),Dt=n.memo((function({playlistUri:e,playlistLength:i,canEdit:a}){const{recommendations:t,refresh:l}=((e,i=10)=>{const a=(0,n.useContext)(ft.Z),t=(0,n.useCallback)((async(e,i,n)=>{const t=i.map((e=>Ct.o.from(e).id??""));return a.getRecommendedTracks(e,t,n)}),[a]);return It(e,"track",i,t)})(e),r=!i||0===i,d=(0,bt.s)(),o=`${e}|${m=t,m?m.map((e=>e.uri)):[]}`;var m;ee({context:o,shouldFire:!!t.length});const u=r?c.ag.get("playlist.extender.title.in.playlist"):c.ag.get("playlist.extender.songs.in.playlist");return d?t.length>0?(0,k.jsxs)("div",{className:j.Z.recommendedTrackList,children:[(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:u})]})}),d&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Et,{playlistUri:e,canEdit:a,tracks:t}),(0,k.jsx)(na.o,{className:j.Z.refreshButton,onClick:l,children:c.ag.get("playlist.extender.refresh")})]})]}):null:(0,k.jsx)("div",{className:j.Z.recommendedTrackList,children:(0,k.jsx)("div",{className:j.Z.top,children:(0,k.jsxs)("div",{className:j.Z.header,children:[(0,k.jsx)(s.x,{variant:"titleSmall",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.x,{variant:"bodySmall",className:j.Z.subtitle,children:c.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),Lt=n.lazy((()=>a.e(7427).then(a.bind(a,23737)))),Pt=n.lazy((()=>Promise.resolve().then(a.bind(a,28133)))),_t=n.lazy((()=>a.e(1021).then(a.bind(a,73205)))),wt=n.lazy((()=>a.e(5457).then(a.bind(a,43776)))),Ut=new Set([]),Vt=n.memo((function({playlist:e,capabilities:i}){const{metadata:{uri:a,name:u,images:p,totalLength:v,unfilteredTotalLength:y,isOwnedBySelf:N,hasEpisodes:x,canAdd:b,canRemove:f,formatListData:C,hasDateAdded:F,collaborators:T,isPublished:V,hasSpotifyAudiobooks:M,hasSpotifyTracks:O},contents:{items:z}}=e,{spec:Q,logger:H,UBIFragment:J}=(0,ve.fU)(d.T,{data:{uri:a}}),q=(0,W.k)(),G=(0,r.W6)(ye.OC,{loadingValue:!1}),X=(0,r.W6)(ye.MF,{loadingValue:!1}),le=(0,r.W6)(Y.OBF,{loadingValue:!1}),{isCompactMode:ue}=(0,P.mJ)(),Ne=n.useMemo((()=>Q.headerFactory()),[Q]),xe=n.useMemo((()=>Q.tracklistFactory()),[Q]),be=n.useMemo((()=>Q.actionBarFactory()),[Q]),fe="chart"===C?.type,Ce="concerts-near-you"===C?.type&&G,Fe="live-streams"===C?.type,Te=["blend","celebrity-blend","friends-mix"].indexOf(C?.type||"")>-1,je=[O,x,M].filter(Boolean).length>1,Ae=!je&&!!M&&(0,cn.V)(z),Ie="artistsets"===C?.type||"this-is"===C?.attributes["editorial.series"],Re=C?.attributes||{},Ee=Re.header_image_url_desktop||Re.image_url||null,De=b&&f,{inlineCurationModeIsOn:Le,handleInlineCurationModeChange:Pe}=((e,i)=>{const[a,t]=(0,n.useState)(e&&0===i),{scrollNodeChildRef:l}=(0,n.useContext)(te.VX),s=(0,n.useRef)(a);return(0,n.useEffect)((()=>{const e=!s.current;l&&e&&a&&l.current?.scrollIntoView({block:"end",behavior:"smooth"}),s.current=a}),[l,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{t(e)}}})(De&&(!Ae||X&&le),y),{productState:_e}=(0,t.v9)($.Gg),we=!!_e&&parseInt(_e.ads,10)>0,Ue="spotify"===e.metadata.owner.username,Ve=(0,t.I0)(),Me=(0,l.ur)(),Oe=(0,l.TH)(),Be=(0,r.W6)(Y.XPU,{loadingValue:!1}),Ze=(0,r.W6)(Y.wAP,{loadingValue:!1}),Ke=(0,r.W6)(Y.bys,{loadingValue:!1}),We=(0,L.useThisisPlaylistExtensionQuery)({uri:a},{gcTime:5*se.y,enabled:Ie}).data?.playlistV2,ze="Playlist"===We?.__typename?We.artistsOnTour?.[0]:null,Qe=Ke&&"Playlist"===We?.__typename?We.concerts?.items.map((e=>e.data)):null,He=Qe?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const i=[e.location.name,e.location.city].join(c.ag.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:i,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url}})),Je="POP"!==Me?new URLSearchParams(Oe.search).get("uid"):null,qe=(0,K.o)(),{filter:Ge}=(0,n.useContext)(I.fo),{sortState:Ye}=(0,n.useContext)(R.Gb),Xe=(0,n.useContext)(de.ZF),$e=(0,n.useRef)(null),ei=(0,n.useRef)(null),[ii]=p,ai=(0,ie.Z)(null!==Ee?Ee:ii?.url||null),{isPlaying:ni,isActive:ti,togglePlay:li,usePlayContextItem:si}=(0,re.n)(function(e,i,a){const n={uri:e};return(0,oe.R)(n,i),(0,ce.I)(n,(0,me.cj)(a)),n}(a,(0,A._j)(Ye),Ge),{featureIdentifier:"playlist"}),ri=(0,n.useCallback)((()=>{const e=(0,ne.aK)({isPlaying:ni,isActive:ti,spec:be.playButtonFactory(),logger:H,uri:a});li({loggingParams:e})}),[ni,ti,li,be,H,a]),di=(0,n.useCallback)((e=>{const i=e.split(/[\r\n]+/g).map((e=>(0,o.EC)(e))).filter((e=>null!==e&&((0,o.wj)(e)||(0,o.hn)(e)||(0,o.dB)(e))));if(i.length>0&&b){const e=i.map((e=>e.toURI())),n=$e.current?.getSelected()?.slice(-1)?.[0],t={after:n??"end"};Ve((0,m.jV)(a,e,t))}}),[b,Ve,a]);(0,ae.aw)(di);const oi=(0,n.useCallback)(((e,i)=>{const n=[...i[_.a[o.JM.TRACK]]||[],...i[_.a[o.JM.LOCAL_TRACK]]||[],...i[_.a[o.JM.EPISODE]]||[],...i[_.a[o.JM.ALBUM]]||[]];n.length>0&&b&&(H.logInteraction(Q.dragAddToPlaylist({playlist:a,itemToBeAdded:n[0]})),Ve((0,m.jV)(a,n)),qe({targetUri:a,intent:"add",type:"drop"}))}),[b,H,Q,a,Ve,qe]),ci=(0,ke.vI)(Se.k.RichPlaylistPages,Oe),mi=(0,o.EC)(a)?.id;(e=>{const i=(0,t.I0)(),a=(0,w.E)(),l=(0,t.v9)(B);(0,n.useEffect)((()=>{a&&e!==l&&i((0,U.jZ)(e))}),[e,l,i,a])})(a);const ui=(0,t.v9)(Z),ki=(({treatment:e,entityId:i,experimentId:a,treatmentVariation:n})=>{if(e&&e[i]){const t=e[i].find((e=>e.experimentId===a));return t?.treatment===n}return!1})({treatment:ui||{},entityId:mi||"",experimentId:ge.RPP,treatmentVariation:he.VARIANT});const pi=!Ue&&(ci||ki)&&0!==y,vi=!Ae&&q&&(De&&!Le||pi),yi=Ae&&X&&le&&q&&(De&&!Le||pi),Si=(!Ae||X&&le)&&N&&q;ee({context:a,shouldFire:!vi});const gi=T?.count??1,[hi]=(0,E.d4)(),Ni="plays"===Re.rank_type,xi=(0,n.useMemo)((()=>(0,A.RG)({isMixedMedia:je,hasEpisodes:x,hasSpotifyAudiobooks:M,hasDateAdded:F,isLive:Fe,isConcert:Ce,isBlend:Te,nrCollaborators:gi,isBooklist:Ae,isCompactMode:ue,isChart:fe,showPlayCount:Ni})),[je,x,M,F,Fe,Ce,Te,gi,Ae,ue,fe,Ni]),bi=(0,n.useMemo)((()=>{let e;return e=Xe.getCapabilities().canSort?Ae?new Set(R.i1):new Set((0,A.yj)(xi)):Ut,e}),[xi,Ae,Xe]),fi=le&&Ae&&!ue;return(0,k.jsxs)(n.Suspense,{fallback:null,children:[(0,k.jsx)(h.$,{children:(0,pe.T5)({playlistName:u,userName:e.metadata.owner.displayName||"",isSpotifyOwned:Ue})}),(0,k.jsx)(g.Z,{types:b&&!Ae?[_.a[o.JM.TRACK],_.a[o.JM.LOCAL_TRACK],_.a[o.JM.EPISODE],_.a[o.JM.ALBUM]]:[],onDrop:oi,children:(0,k.jsxs)("section",{role:"presentation",className:j.Z.playlist,"data-testid":"playlist-page","data-test-uri":a,children:[(0,k.jsx)(nn.s,{metadata:e.metadata,isPlaying:ni,isPublished:V,totalItems:hi,togglePlay:ri,backgroundColor:ai,spec:Ne}),(0,k.jsxs)("div",{className:j.Z.playlistContent,children:[(0,k.jsx)($a,{playlist:e,capabilities:i,spec:be,isPlaying:ni,isActive:ti,togglePlay:ri,isBooklist:Ae,backgroundColor:ai,tracklistDomRef:ei,isConcert:Ce,sortableColumns:bi}),(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Lt,{formatListData:e.metadata.formatListData})}),!Ke&&ze?.upcomingEventsCount?(0,k.jsx)(Pt,{artistConcertsUri:ze.uri||"",artistImageUrl:ze.imageUrl||"",artistName:ze.title||"",spec:Q}):null,Ke&&!!ze&&He&&He.length>0&&(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(_t,{liveEvents:He,artistConcertsUri:ze.uri||"",artistName:ze.title||"",spec:Q})}),(0,k.jsxs)("div",{className:"contentSpacing",children:[we?(0,k.jsx)(S,{playlistUri:a}):null,Be&&we&&Ue?(0,k.jsx)(wt,{uri:a,playlistName:u}):null,e.metadata.hasSpotifyAudiobooks&&Ze&&(0,k.jsxs)("div",{className:j.Z.noBooklistSupportContainer,children:[(0,k.jsx)(s.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:c.ag.get("web-player.playlist.booklist-not-supported-title")}),(0,k.jsx)(s.x,{variant:"bodyMedium",semanticColor:"textSubdued",children:c.ag.get("web-player.playlist.booklist-not-supported.message")})]}),v>0&&(0,k.jsx)(n.Suspense,{fallback:null,children:fi?(0,k.jsx)(Vi,{initialItems:z,contextUri:a,nrItems:v,canEdit:De,canRemove:f,ariaLabel:u}):(0,k.jsx)(J,{spec:xe,children:(0,k.jsx)(D.a,{columns:xi,children:fe?(0,k.jsx)(zi,{ariaLabel:u,nrTracks:v,playlistUri:a,scrollToUid:Je,usePlayContextItem:si,tracklistDomRef:ei,sortableColumns:bi,isCompactMode:ue},a):(0,k.jsx)(on,{ariaLabel:u,nrTracks:v,playlistUri:a,playlistName:u,isMixedMedia:je,isLive:Fe,isConcert:Ce,isBlend:Te,isBooklist:Ae,canEdit:De,scrollToUid:Je,feedbackPath:Re["dislike-endpoint"],deleteFeedbackPath:Re["delete-endpoint"],usePlayContextItem:si,tracklistRef:$e,tracklistDomRef:ei,canRemove:f,spec:xe,initialItems:z,isCompactMode:ue,sortableColumns:bi,hasSpotifyAudiobooks:M??!1},a)})})}),Si&&(0,k.jsx)(n.Suspense,{fallback:null,children:Le?(0,k.jsx)(xt,{playlistUri:a,onCurationModeChange:Pe,isBooklist:Ae}):(0,k.jsx)("button",{className:j.Z.seeMore,onClick:()=>{Pe(!0)},children:(0,k.jsx)(s.x,{as:"div",variant:"bodySmallBold",children:c.ag.get("playlist.curation.find_more")})})}),vi?(0,k.jsx)("div",{"data-testid":"recommended-track",children:(0,k.jsx)(Dt,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:De})}):null,yi?(0,k.jsx)(Rt,{uri:a}):null]})]}),Ce&&(0,k.jsx)(an,{spec:Q.footerSectionFactory()})]})})]})})),Mt=n.memo((function({uri:e}){const i=(0,n.useContext)(de.ZF).getCapabilities(),{filter:a}=(0,n.useContext)(I.fo),{sortState:t}=(0,n.useContext)(R.Gb),{metadataOptions:l,contentsOptions:s}=(0,Ui.d)(t,a),{data:r,isLoading:d,isError:o}=(0,ue.Z)(e,l,s);return!r||d?(0,k.jsx)(T.h,{hasError:o,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:i.canModifyOffline}):r.metadata.permissions&&!r.metadata.permissions.canView?(0,k.jsx)(F,{uri:e}):(0,k.jsx)(Vt,{playlist:r,capabilities:i})})),Ot=()=>{const{playlistId:e}=(0,l.UO)(),i=(0,o.FW)((e||"").split("&")[0]).toURI();return(0,k.jsx)(le.fd,{surface:le.Tg.PLAYLIST,uris:[i],children:(0,k.jsx)(R.kz,{uri:i,children:(0,k.jsx)(I.hz,{uri:i,children:(0,k.jsx)(E.Y4,{children:(0,k.jsx)(Mt,{uri:i})})})})})}},39600:(e,i,a)=>{a.d(i,{vI:()=>n});a(86277);const n=(e,i)=>{const a=i?new URLSearchParams(i.search):void 0;return"1"===a?.get(e)}},40234:(e,i,a)=>{a.d(i,{k:()=>n});let n=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShow="ilrs",e.PlaylistInternalTrackLinks="pitl",e.PlaylistInternalTrackAndArtistLinks="pital",e}({})},97607:(e,i,a)=>{a.d(i,{Z:()=>n});const n={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
>>>>>>> origin/master
//# sourceMappingURL=xpui-routes-playlist.js.map