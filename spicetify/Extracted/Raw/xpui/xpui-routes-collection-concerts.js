<<<<<<< HEAD
"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5783],{37719:(e,t,n)=>{n.d(t,{A:()=>j});var o=n(30758),a=n(74948),i=n(58184),r=n(35674),c=n(80047),s=n(86485),l=n(10131);const u="MUiWCNTfb6FcSwVPvQ1V",d="_eSrMs5LTUjW7l0vfuBg",v="UAk3bMhekwJTV_wIyfsT",m="X9w6LPfKsZHMCs38sVIQ",g="NXn5KjeUOjLGlAfS1Gao",f="N0wgFMDDvCiby4QB5kLJ",p="nloNe2BLRHjz9dxlwfLU",h="FyD0hF1e2PKzRxQ6sYDQ",y="GR08E4L_rOGljyQQX30R";var x=n(86070);const j=(0,o.memo)((function(e){var t=e.uri,n=e.title,o=e.imageUrl,j=e.date,b=e.subTitle,_=e.firstParty,N=e.onClick,C=j?(0,l.l4)(j):void 0;return(0,x.jsx)(c.N,{to:t,className:u,"data-testid":"concert-card",onClick:N,children:(0,x.jsxs)("div",{className:d,children:[(0,x.jsx)(s.b,{children:(0,x.jsx)("div",{role:"img",className:y,style:{backgroundImage:"url(".concat(o,")")},children:!o&&(0,x.jsx)(a.r,{role:"img",size:"xxlarge",semanticColor:"textSubdued"})})}),C&&(0,x.jsxs)("time",{className:v,dateTime:j,children:[(0,x.jsx)(i.E,{as:"div",variant:"bodySmall",children:(0,l.tj)(C)}),(0,x.jsx)(i.E,{as:"div",variant:"bodyMediumBold",children:(0,l.Py)(C)})]}),(0,x.jsxs)("div",{className:m,dir:"auto",children:[(0,x.jsx)(i.E,{as:"h2",variant:"bodyMedium",className:g,children:n}),(0,x.jsxs)("div",{className:f,children:[_&&(0,x.jsx)("span",{className:h,children:(0,x.jsx)(r.D,{size:"small"})}),(0,x.jsx)(i.E,{as:"span",className:p,variant:"bodySmall","data-testid":"location-name",semanticColor:"textSubdued",children:b})]})]})]})})}))},22401:(e,t,n)=>{n.r(t),n.d(t,{default:()=>na});var o=n(17635),a=n(46600),i=n(98866),r=(n(60989),n(83603),n(11034),n(12771),n(76133),n(30758)),c=n(41978),s=n(33165),l=n(67187),u=n(79621),d=n(92577),v=n(21773),m=n(47545),g=n(73005),f=n(92686),p=n(93418),h=n(39121),y=n(86072),x=n(8539),j=n(34204),b=n(18520),_=n(66932),N=n(64741),C=n(79851),R=n(74460),k=n(68688),S=n(79464),I=n(69798),D=n(58400),w=n(2262),E=(n(24847),n(20427),n(62980),n(47246),n(58184)),A=n(71309),O=n(82342),F=n(24942),L=n(57528),U=n(98802),P=(n(45803),n(72087)),M=n(90441),T=n(17714),B=n(16743),z=(n(23833),n(76504)),G=n(96839),K=n(80047),V=n(10131);const H="Ig5vKQ7dYBd1EvrAFxNe",W="h_q319q68ujja24YIoXY",q="dFTQKQt3imsoOza3VE4G",X="M8LA1p3y53Qnge37zUmz",Z="HZi6Ziy6mVJMFZsPf4wk",Q="KNX0R2c0r90zNTPYZm6X",Y="JI0woT5IN6EnNKnilhcg",J="kAi1CfiOMYDExKkXuw44",$="Zwr6T4ceJI7KfyNxa4tS",ee="mW3O8RnDMDY6MfRJKqd5",te="raQK_4Eaqa5Zj06_aBm7",ne="AOuYgrCnrYvPKsyzxqVy",oe="P1dra4DUpn36RnCkuwa_",ae="zBCfaF04WlTsiUcov2oJ",ie="JxTPZX9AoptKanJg0zIw";var re=n(86070);const ce=(0,r.memo)((function(e){var t=e.concert,n=e.position,o=e.modalSpec,a=(0,V.l4)(e.concert.startDateIsoString),i=(0,G.o_)(e.concert.uri),c=(0,r.useMemo)((function(){return null==o?void 0:o.eventRowFactory({position:n,uri:t.uri})}),[o,n,t]),s=(0,S.s)();return(0,re.jsxs)(K.N,{to:"/concert/".concat(null==i?void 0:i.id),className:J,onClick:function(){c&&s.logInteraction(c.hitUiNavigate({destination:"/concert/".concat(null==i?void 0:i.id)}))},children:[(0,re.jsxs)("div",{className:$,"aria-hidden":!0,children:[(0,re.jsx)(E.E,{as:"div",variant:"marginalBold",className:ee,children:(0,V.tj)(a)}),(0,re.jsx)(E.E,{as:"div",variant:"bodyMediumBold",className:te,children:(0,V.Py)(a)})]}),(0,re.jsxs)("div",{className:ne,children:[(0,re.jsx)(E.E,{as:"div",variant:"bodySmallBold",className:oe,"data-testid":"event-title",children:t.title}),(0,re.jsx)(z.s,{children:(0,V.Fn)(a)}),(0,re.jsxs)(E.E,{as:"div",variant:"bodySmall",className:ae,children:[(0,V.VJ)(a)," • ",(0,V.WB)(a)]}),(0,re.jsx)(E.E,{as:"div",variant:"bodySmall",className:ie,"data-testid":"event-venue",children:[t.location.venue,t.location.city].join(x.Ru.getSeparator())})]})]},t.uri)}));const se=function(e){var t=(0,r.useMemo)((function(){var t;return null===(t=e.feedSpec)||void 0===t?void 0:t.groupedEventModalFactory({uri:e.artist.uri||""})}),[e.feedSpec,e.artist]),n=(0,S.s)(),o=(0,I.t)(t),a=function(){t&&n.logInteraction(t.closeButtonFactory().hitUiHide()),e.onClose()};return(0,re.jsx)(B.A,{contentLabel:x.Ru.get("live_events.label"),isOpen:!0,className:H,onRequestClose:a,children:(0,re.jsxs)("section",{className:W,ref:o,children:[(0,re.jsx)("div",{className:q,children:(0,re.jsx)(le,{"aria-label":x.Ru.get("close"),iconOnly:M.M,size:"small",onClick:a})}),(0,re.jsxs)("div",{className:X,children:[(0,re.jsx)(T._,{height:"48",width:"48",className:Z,src:e.artist.imageUri}),(0,re.jsxs)("div",{className:Q,children:[(0,re.jsx)(E.E,{as:"h3",variant:"bodyMediumBold",className:Y,"data-testid":"event-venue",children:e.artist.name}),(0,re.jsx)(E.E,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:x.Ru.get("concerts.count_near_location",e.concerts.length,e.location.city)})]})]}),e.concerts.map((function(e,n){return(0,re.jsx)(ce,{concert:e,position:n,modalSpec:t},e.uri)}))]})})};var le=(0,P.Ay)(g.H).withConfig({displayName:"ConcertModal___StyledButtonTertiary",componentId:"sc-179c8vh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"});const ue=(0,r.memo)((function(e){var t,n=e.event,o=e.onClose,a=e.feedSpec,i=null==n||null===(t=n.concerts[0])||void 0===t?void 0:t.concert,c=null==i?void 0:i.artists[0],s=(0,r.useMemo)((function(){return null==a?void 0:a.groupedEventModalFactory({uri:(null==c?void 0:c.uri)||""})}),[a,c]),l=(0,S.s)();if(!n||!i||!c)return null;return(0,re.jsx)(se,{artist:{imageUri:c.imageUri,name:c.name,uri:c.uri},location:{city:i.location,venue:i.venue},concerts:n.concerts.map((function(e){return{uri:"spotify:concert:".concat(e.concert.id),title:e.concert.title,startDateIsoString:e.concert.date,location:{city:e.concert.location,venue:e.concert.venue}}})),onClose:function(){s&&l.logInteraction(s.closeButtonFactory().hitUiHide()),o()}})}));n(14053),n(33050),n(42363);var de=n(58634),ve=n(24089),me=n(19493),ge=n(29969),fe=n(52618),pe=n.n(fe),he=n(30040),ye=n(34630),xe=function(){var e=(0,ge.A)(pe().mark((function e(t,n){var o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ye.Ki)(he.n.getInstance(),t,n);case 2:return o=e.sent,e.abrupt("return",o.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=(0,ge.A)(pe().mark((function e(){var t,n,o,a,i,r,c,s=arguments;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,o=s.length>2?s[2]:void 0,a=(n=s.length>1?s[1]:void 0).geonameId,i=n.startDate,r=n.endDate,e.next=6,(0,ye.DX)(he.n.getInstance(),{page:t,geonameId:a,startDate:i,endDate:r,skipLocationUpdate:o});case 6:return c=e.sent,e.abrupt("return",c.body);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,ge.A)(pe().mark((function e(t,n){var o;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ye.ZV)(he.n.getInstance(),void 0,t,n);case 2:return o=e.sent,e.abrupt("return",o.body);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_e=function(){var e=(0,ge.A)(pe().mark((function e(){var t;return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ye.oF)(he.n.getInstance());case 2:return t=e.sent,e.abrupt("return",t.body);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=6e5,Ce=/^(\d+)/,Re=function(e){var t,n=function(){var e=(0,s.g)().location,t=(null==e?void 0:e.match(Ce))||[],n=(0,i.A)(t,2)[1];if(n)try{return parseInt(n,10)}catch(e){return}}(),o=(0,l.ok)(),a=null===(t=(0,i.A)(o,1)[0].get("filter"))||void 0===t?void 0:t.trim();return e.isAnonymous&&!a||"all"===a?{type:"all",geonameId:n}:e.isInterestedEnabled&&"saved"===a?{type:"saved"}:{type:"foryou",geonameId:n}},ke=n(44383),Se=n(68262);const Ie="MVPegsivznZB6gdkcnkH",De="MlK79hskRbFrN2OBjMkl",we="VxaXFH9Uq1NU0LtsVhIu",Ee="vktIWsUczavLRrl4SkRt",Ae="Y1JeRPqrmHKXI1KcstYN",Oe="S667J_S5yumhYS1VoZyw",Fe="DbrdfLxSkMqLs3HHrKfo",Le="ofURwIKv0qEXJGTraIis",Ue="LOJZO2MnGW5dCIawF767",Pe="tyc7QRlEJigVFIAeLGOB",Me="PoljWhTLU3MKqIx2gSPY",Te="ajxCNAuBJSgYfKUUBWBT",Be="WR2h2Li5XTrBn_Rdme_k",ze="WNhsvOyu4doInF525pLE",Ge="qSR4imCvzdznIQ4F2kBO",Ke="jFxUCv1gagc6erXmpgYw",Ve="LNAJMvRlTPqWsmZvV7Kg",He="jP10ZUl0Jn2Ijue3fZux",We="ncN9bwTgIRk6xruAt5T8",qe="hKG8XDR5S00bjBAibgbI",Xe="XMhrCtHCVSPsNW67vM1m",Ze="vT0t_YE1HgmbnHLLhJD9";const Qe=(0,r.memo)((function(e){var t=e.geonameId,n=e.locationName,o=e.spec,a=(0,r.useState)(!1),c=(0,i.A)(a,2),s=c[0],l=c[1],u=(0,I.t)(o),d="https://concerts.spotifycdn.com/feed_city_images_1/".concat(t,".jpg");return(0,r.useEffect)((function(){var e=function(){l(!0)},t=function(){l(!1)},n=new Image;return n.addEventListener("load",e),n.addEventListener("error",t),n.src=d,function(){n.removeEventListener("load",e),n.removeEventListener("error",t)}}),[d]),(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)("div",{className:qe,ref:u,children:[s&&(0,re.jsx)(T._,{src:d,className:Xe,circle:!0,imageHeight:"56px",imageWidth:"56px"}),(0,re.jsxs)("div",{children:[(0,re.jsx)(E.E,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:x.Ru.get("live_events.city_info_find_tickets",n)}),(0,re.jsx)(E.E,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:x.Ru.get("live_events.city_info_view_details")})]})]})})}));var Ye=n(66410),Je=n(9475),$e=n(37719);const et=(0,r.memo)((function(e){var t=e.concert,n=e.isVirtual,o=e.onClick,a=t.venue,i=t.location,r=t.artists[0];return(0,re.jsx)($e.A,{uri:(0,G.B4)(t.id).toURI(),title:(0,Je.a9)(t),imageUrl:r.imageUri,date:t.startDate.localDate,subTitle:n?a:[a,i].join(x.Ru.getSeparator()),firstParty:(0,Ye.he)(t),onClick:o})}));const tt=(0,r.memo)((function(e){var t=e.event,n=e.onClick,o=(0,r.useCallback)((function(e){e.preventDefault(),n(t)}),[t,n]),a=(0,V.l4)(t.openingDate),i=(0,V.l4)(t.closingDate),c=t.concerts[0].concert,s=c.artists[0];return(0,re.jsx)($e.A,{title:(0,Je.a9)(c),subTitle:"".concat((0,V.WZ)(a,i)," • ").concat(x.Ru.get("concerts.count",t.concerts.length)),onClick:o,imageUrl:s.imageUri,uri:(0,G.B4)(c.id).toURI()})}));const nt=(0,r.memo)((function(e){var t,n=e.event,o=e.position,a=e.sectionSpec,i=e.onOpenGroupedEvent,c=null===(t=n.concerts[0])||void 0===t?void 0:t.concert,s=null==c?void 0:c.id,l=c&&(0,G.B4)(c.id).toURI(),u=(0,S.s)(),d=(0,r.useMemo)((function(){return null==a?void 0:a.eventCardFactory({identifier:null!=s?s:"",position:o,uri:null!=l?l:""})}),[a,s,l,o]),v=(0,I.t)(d);if(n.concerts.length>1)return(0,re.jsx)("div",{ref:v,children:(0,re.jsx)(tt,{event:n,onClick:function(e){i(e),d&&u.logInteraction(d.hitUiReveal())}})});return(0,re.jsx)("div",{ref:v,children:(0,re.jsx)(et,{concert:c,isVirtual:"online"===n.source,onClick:function(){d&&u.logInteraction(d.hitUiNavigate({destination:l}))}})})})),ot="D_V60ibMxH9Vy7kyvWvc",at="anRK1X9LKn5HxZQJB5Tl",it="shUifmqVle_F5ILRpCqe",rt="_WibGTg4OzGdsTf18zK1",ct="LHhL2094jqvK0MNwlGAu",st="yRQGIh3Y05BG51IHUW2b",lt="fT86P9Div4C8GXI9hZ36",ut="G8sU0RZZT_ZhaEv7B26V";const dt=(0,r.memo)((function(e){var t=e.date,n=e.image,o=e.title,a=e.subTitle,i=e.dateRange,r=e.uri,c=e.onClick,s=t?(0,V.l4)(t):void 0;return(0,re.jsxs)(K.N,{to:r,className:ot,"data-testid":"concert-row",onClick:c,children:[(0,re.jsx)("time",{dateTime:t,className:at,children:s&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(E.E,{as:"div",variant:"bodySmall",children:(0,V.tj)(s)}),(0,re.jsx)(E.E,{variant:"bodyMediumBold",children:(0,V.Py)(s)})]})}),(0,re.jsx)(T._,{src:n,alt:"",role:"presentation",className:it}),(0,re.jsxs)("div",{className:ct,children:[(0,re.jsxs)("div",{className:st,children:[(0,re.jsx)(E.E,{variant:"bodyMedium",className:rt,children:o}),(0,re.jsx)(E.E,{variant:"bodySmall","data-testid":"event-venue",semanticColor:"textSubdued",children:a})]}),(0,re.jsx)(E.E,{as:"span",variant:"bodyMedium",semanticColor:"textSubdued",className:lt,children:i}),(0,re.jsx)("div",{className:ut,children:s&&(0,re.jsx)(E.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:(0,V.WB)(s)})})]})]})}));const vt=(0,r.memo)((function(e){var t=e.event,n=e.onClick,o=(0,r.useCallback)((function(e){e.preventDefault(),n(t)}),[t,n]),a=(0,V.l4)(t.openingDate),i=(0,V.l4)(t.closingDate),c=t.concerts[0].concert,s=c.artists[0];return(0,re.jsx)(dt,{image:null==s?void 0:s.imageUri,title:(0,Je.a9)(c),subTitle:x.Ru.get("concerts.count",t.concerts.length),dateRange:(0,V.WZ)(a,i),uri:null==c?void 0:c.id,onClick:o})}));const mt=(0,r.memo)((function(e){var t=e.concert,n=e.isVirtual,o=e.onClick,a=t.venue,i=t.location,r=t.artists[0],c=(0,V.l4)(t.startDate.localDate);return(0,re.jsx)(dt,{date:t.startDate.localDate,image:null==r?void 0:r.imageUri,title:(0,Je.a9)(t),subTitle:n?a:[a,i].join(x.Ru.getSeparator()),dateRange:(0,V.Y)(c),uri:(0,G.B4)(t.id).toURI(),onClick:o})}));const gt=(0,r.memo)((function(e){var t,n=e.event,o=e.position,a=e.sectionSpec,i=e.onOpenGroupedEvent,c=null===(t=n.concerts[0])||void 0===t?void 0:t.concert,s=null==c?void 0:c.id,l=c&&(0,G.B4)(c.id).toURI(),u=(0,S.s)(),d=(0,r.useMemo)((function(){return null==a?void 0:a.eventRowFactory({identifier:null!=s?s:"",position:o,uri:null!=l?l:""})}),[a,s,l,o]),v=(0,I.t)(d);if(n.concerts.length>1)return(0,re.jsx)("div",{ref:v,children:(0,re.jsx)(vt,{event:n,onClick:function(e){i(e)}})});return(0,re.jsx)("div",{ref:v,children:(0,re.jsx)(mt,{concert:c,isVirtual:"online"===n.source,onClick:function(){d&&u.logInteraction(d.hitUiNavigate({destination:null!=l?l:""}))}})})}));var ft=function(e){var t=null==e?void 0:e.match(/(202\d)-([01]\d)-([0-3]\d)/);if(t){var n=(0,i.A)(t,4),o=n[1],a=n[2],r=n[3];return new Date(parseInt(o,10),parseInt(a,10)-1,parseInt(r,10))}},pt=function(){var e,t,n=(0,l.ok)(),o=(0,i.A)(n,1)[0],a=null===(e=o.get("startDate"))||void 0===e?void 0:e.trim(),r=null===(t=o.get("endDate"))||void 0===t?void 0:t.trim(),c=ft(a),s=ft(r);return c&&s&&{from:c,to:s}},ht=(n(45191),n(36389),n(77020),n(45935),n(60726),n(82765),n(13312),n(95477)),yt=n(40620),xt=n(64508),jt=n(73155),bt=(n(9084),n(39261)),_t=(n(82368),n(41681),n(58470),n(70043)),Nt=n(67017),Ct=n(91985),Rt=n(3091),kt=n(17176),St=n(6924),It=n(72653),Dt=n(94222),wt=n(96644),Et=n(87584),At=n(63514),Ot=n(16856),Ft=n(54869),Lt=n(96132),Ut=n(24808),Pt=n(47613),Mt=n(2283),Tt=n(88593),Bt=n(56708),zt=n(64416),Gt=n(79494),Kt=n(38408),Vt=n(62224),Ht=n(63240),Wt=n(45523),qt=n(10632),Xt=n(54701),Zt=n(80675),Qt=n(72861),Yt=n(76804),Jt=n(55128),$t=n(53406),en=n(15643),tn=n(1467),nn=n(24428),on=n(48199),an=n(61845),rn=n(83536),cn=n(70756),sn=n(63855),ln=n(1103),un=n(96344),dn=n(38903),vn=n(17530),mn=n(33140),gn=n(87122),fn=n(71418),pn=n(44135),hn=n(6729),yn=n(32409),xn=n(67031),jn=n(98045),bn=n(86111),_n=n(11554),Nn=n(61753),Cn=n(87318),Rn=n(89949),kn=n(22180),Sn=n(85428),In={af:_t.af,am:Nt.c,ar:Ct.ar,arEG:Rt.m,arMA:kt.E,arSA:St.G,az:It.az,bg:Dt.bg,bn:wt.bn,bho:Nt.c,bs:Et.bs,ca:At.ca,cs:Ot.cs,da:Ft.da,de:Lt.de,el:Ut.el,en:Nt.c,enGB:Pt.b,es419:Mt.es,es:Mt.es,esAR:Mt.es,esMX:Mt.es,et:Tt.et,eu:Bt.eu,fa:zt.$,fi:Gt.fi,fil:Nt.c,frCA:Kt.V,fr:Vt.fr,gl:Ht.gl,gu:Wt.gu,he:qt.he,hi:Xt.hi,hr:Zt.hr,hu:Qt.hu,id:Yt.id,is:Jt.is,it:$t.it,ja:en.ja,kn:tn.kn,ko:nn.ko,lt:on.lt,lv:an.lv,mk:rn.mk,ml:Nt.c,mr:Nt.c,ms:cn.ms,nb:sn.nb,ne:Nt.c,nl:ln.nl,or:Nt.c,paIN:Nt.c,paPK:Nt.c,pl:un.pl,ptBR:dn.F,ptPT:vn.pt,ro:mn.ro,ru:gn.ru,sk:fn.sk,sl:pn.sl,sr:hn.sr,sv:yn.sv,sw:Nt.c,ta:xn.ta,te:jn.te,th:bn.th,tr:_n.tr,uk:Nn.uk,ur:Nt.c,vi:Cn.vi,zhCN:Rn.g,zhHK:kn.a,zhTW:Sn.G,zu:Nt.c},Dn=function(e){return function(e){return Object.keys(In).includes(e)}(e)?In[e]:Nt.c},wn=n(12058),En=n(42534),An=function(e){var t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));var n=new Date(t);return n.setDate(t.getDate()+2),{from:t,to:n}},On=function(e){var t=new Date(e);t.setDate(e.getDate()+(5-e.getDay()));var n=new Date(t);n.setDate(t.getDate()+7);var o=new Date(n);return o.setDate(n.getDate()+2),{from:n,to:o}},Fn=function(e,t){return!!(null!=e&&e.from&&null!=e&&e.to&&null!=t&&t.from&&null!=t&&t.to)&&((0,wn.r)(e.from,t.from)&&(0,wn.r)(e.to,t.to))},Ln=function(e){return(0,En.x)(e,{representation:"date"})};const Un="C1USyigFSYyc22_BmsgB",Pn="Cwo5ZgH_QLzFbSjWjglf",Mn="iL7PRv0yTC9UFjHfDJDW",Tn="oxBa3kaduGMhYxc9I_Uu",Bn="x0xbkRE3CyGK_i406MSX",zn="zT6EzYpjnj9pMKhMFQB7",Gn="YOLVSXg5_gdh0VfL2oNl",Kn="ynXemVsankd4H506x8D2";var Vn={formatCaption:function(e){return x.Ru.formatDate(e,{month:"long",year:"numeric"})},formatDay:function(e){return x.Ru.formatDate(e,{day:"numeric"})},formatWeekdayName:function(e){return x.Ru.formatDate(e,{weekday:"short"})}};const Hn=(0,r.memo)((function(e){var t,n=e.onDone,o=e.onClose,a=e.spec,c=(0,r.useState)(e.dateRange),s=(0,i.A)(c,2),l=s[0],u=s[1],d=(0,bt.W)(),v=(0,I.t)(a),m=(0,S.s)(),f=new Date,p=An(f),h=On(f),y=Fn(l,p),j=Fn(l,h),b=new Date;return b.setFullYear(b.getFullYear()+1),(0,re.jsx)("div",{ref:v,children:(0,re.jsx)(B.A,{isOpen:!0,children:(0,re.jsxs)("section",{className:Un,children:[(0,re.jsx)(g.H,{className:Pn,iconOnly:M.M,size:"small",onClick:o,"aria-label":x.Ru.get("close_button_action")}),(0,re.jsxs)("div",{className:Mn,children:[(0,re.jsx)(E.E,{as:"h3",variant:"bodyMediumBold",children:x.Ru.get("live_events.date_picker_dialog_title")}),(0,re.jsxs)("div",{className:Tn,children:[(0,re.jsx)(xt.v,{className:Bn,size:"md",selectedColorSet:"brightAccent",selected:y,onClick:function(){u(y?void 0:p),a&&m.logInteraction(a.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:x.Ru.get("live_events.this_weekend_preset")}),(0,re.jsx)(xt.v,{className:Bn,size:"md",selectedColorSet:"brightAccent",selected:j,onClick:function(){u(j?void 0:h),a&&m.logInteraction(a.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:x.Ru.get("live_events.next_weekend_preset")})]})]}),(0,re.jsx)(jt.hv,{mode:"range",selected:l,onSelect:u,numberOfMonths:2,defaultMonth:null===(t=e.dateRange)||void 0===t?void 0:t.from,fromDate:new Date,toDate:b,formatters:Vn,dir:d?"rtl":"ltr",modifiersClassNames:{today:zn},locale:Dn(x.Ru.getLocaleForFormatting())}),(0,re.jsxs)("div",{className:Gn,children:[(0,re.jsx)(g.H,{className:Kn,size:"small",onClick:function(){u(void 0)},disabled:!(null!=l&&l.from),children:x.Ru.get("live_events.date_picker_dialog_clear")}),(0,re.jsx)(ht.$,{size:"small",onClick:function(){if(null!=l&&l.from){var e=l.from,t=l.to;n({from:e,to:t||e})}else n()},children:x.Ru.get("live_events.date_picker_dialog_done")})]})]})})})})),Wn="WnIhxhr9MIQjVvkvUQTf",qn="ETRYfT8oEUJuUDLgOBUX";const Xn=function(e){var t=(0,r.useState)(!1),n=(0,i.A)(t,2),o=n[0],a=n[1],c=(0,l.ok)(),s=(0,i.A)(c,2)[1],u=(0,S.s)(),d=(0,r.useMemo)((function(){var t;return null===(t=e.spec)||void 0===t?void 0:t.datePickerModalFactory()}),[e.spec]),v=(0,r.useMemo)((function(){var t;return null===(t=e.spec)||void 0===t?void 0:t.headerFactory()}),[e.spec]),m=pt(),g=An(new Date),f=On(new Date),p=(0,r.useCallback)((function(e){var t={filter:"all"};if(e&&(t.startDate=Ln(e.from),t.endDate=Ln(e.to),d)){var n=new URLSearchParams(t).toString();u.logInteraction(d.doneButtonFactory({uri:n}).hitUiNavigate({destination:n}))}a(!1),s(t),d&&u.logInteraction(d.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[s,d,u]),h=(0,r.useCallback)((function(e){var t={filter:"all"};Fn(m,e)||(t.startDate=Ln(e.from),t.endDate=Ln(e.to)),s(t)}),[m,s]),y=m?ht.$:A.n;return(0,re.jsxs)("div",{className:Wn,children:[(0,re.jsx)("div",{children:(0,re.jsx)(y,{className:qn,iconLeading:yt.R,onClick:function(){a(!0),v&&u.logInteraction(v.datePickerButtonFactory().hitUiReveal())},size:"small",children:m?(0,V.tX)(m):x.Ru.get("live_events.date_picker_button_text")})}),o&&(0,re.jsx)(Hn,{onClose:function(){a(!1),d&&u.logInteraction(d.closeButtonFactory().hitUiHide())},onDone:p,dateRange:m,spec:d}),(0,re.jsxs)("div",{children:[(0,re.jsx)(xt.v,{size:"sm",selectedColorSet:"brightAccent",selected:Fn(m,g),onClick:function(){if(h(g),v){var e={startDate:Ln(g.from),endDate:Ln(g.to)},t=new URLSearchParams(e).toString();u.logInteraction(v.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},className:qn,children:x.Ru.get("live_events.this_weekend_preset")}),(0,re.jsx)(xt.v,{size:"sm",selectedColorSet:"brightAccent",selected:Fn(m,f),onClick:function(){if(h(f),v){var e={startDate:Ln(f.from),endDate:Ln(f.to)},t=new URLSearchParams(e).toString();u.logInteraction(v.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},className:qn,children:x.Ru.get("live_events.next_weekend_preset")})]})]})};var Zn=(0,r.memo)((function(e){var t=e.eventGroups,n=e.locationName,o=e.isLoading,a=e.feedSpec,i=e.onOpenGroupedEvent,c=e.layout,s=(0,r.useMemo)((function(){return null==a?void 0:a.eventSectionFactory({identifier:"all",position:1})}),[a]),l=(0,I.t)(s);return o?(0,re.jsx)(L.A,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,re.jsx)(F.p,{title:x.Ru.get("concerts.error.no_concerts_found_title"),message:x.Ru.get("concerts.error.no_concerts_found_message",n),renderInline:!0}):(0,re.jsx)("div",{ref:l,children:t.map((function(e){return(0,re.jsxs)("div",{className:ze,children:["grid"===c&&(0,re.jsx)(U.$,{total:e.events.length,title:x.Ru.formatDate(new Date("".concat(e.date,"T00:00:00")),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),showAll:!0,withEncoreCards:!1,children:e.events.map((function(e,t){var n,o=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,re.jsx)(nt,{event:e,position:t,sectionSpec:s,onOpenGroupedEvent:i},null==o?void 0:o.id)}))}),"list"===c&&(0,re.jsxs)("div",{children:[(0,re.jsx)(E.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Ee,children:x.Ru.formatDate(new Date("".concat(e.date,"T00:00:00")),{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.events.map((function(e,t){var n,o=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,re.jsx)(gt,{event:e,position:t,sectionSpec:s,onOpenGroupedEvent:i},null==o?void 0:o.id)}))]})]},e.date)}))}):null}));const Qn=(0,r.memo)((function(e){var t,n,c,u=e.geonameId,d=e.spec,v=e.layout,m=e.onLocationNameChange,g=pt(),f=(0,s.Zp)(),p=(0,l.ok)(),h=(0,i.A)(p,1)[0],y=(0,r.useState)(),j=(0,i.A)(y,2),b=j[0],_=j[1],N=(0,Se.W)(),C=(0,r.useMemo)((function(){return null==d?void 0:d.headerFactory()}),[d]),R=(0,r.useMemo)((function(){return null==d?void 0:d.cityInfoFactory()}),[d]),k=(n={geonameId:u,startDate:g&&(0,Ye.bU)(g.from),endDate:g&&(0,Ye.bU)(g.to)},c=(0,o.NC)(a.b3k),(0,me.q)({queryKey:["concerts","all",n],queryFn:function(e){var t=e.pageParam;return je(t,n,c)},staleTime:Ne,initialPageParam:1,placeholderData:ve.rX,getNextPageParam:function(e,t){if(!(t.length>=50)&&0!==e.events.length)return t.length+1}})),S=k.data,I=k.isLoading,D=k.hasNextPage,w=k.isFetchingNextPage,F=k.fetchNextPage,L=(0,r.useMemo)((function(){var e;return(0,Ye.fD)(null!==(e=null==S?void 0:S.pages)&&void 0!==e?e:[])}),[null==S?void 0:S.pages]),U=null==S||null===(t=S.pages[0])||void 0===t?void 0:t.userLocation;(0,r.useEffect)((function(){U&&(null==m||m(U))}),[U,m]);var P=U||x.Ru.get("concerts.default_location");return(0,re.jsxs)("div",{children:[(0,re.jsx)(O.Q,{children:"".concat(x.Ru.get("concerts_shows_in")," ").concat(P)}),(0,re.jsxs)("div",{className:Ke,children:[(0,re.jsx)(ke.A,{handleLocationChange:function(e){N({type:"click",intent:"change-live-events-location"}),null!=e&&e.geonameId&&f({pathname:(0,Ye.nm)(e.geonameId,e.location),search:"?".concat(h.toString())})},locationStr:P,headerSpec:C}),(0,re.jsx)(Xn,{})]}),(0,re.jsx)(Zn,{isLoading:I,locationName:P,eventGroups:L,onOpenGroupedEvent:function(e){var t;_(e);var n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];N({type:"click",intent:"open-grouped-live-event",targetUri:n})},feedSpec:d,layout:v}),D&&(0,re.jsx)("div",{className:Ge,children:(0,re.jsx)(A.n,{disabled:w,onClick:function(){F()},children:x.Ru.get("concerts.load_more")})}),(0,re.jsx)(ue,{event:b,locationName:P,feedSpec:d,onClose:function(){return _(void 0)}}),(0,re.jsx)(E.E,{variant:"marginal",semanticColor:"textSubdued",children:x.Ru.get("live_events.disclaimer")}),S&&S.pages[0]&&S.pages[0].userLocationGeonameId&&(0,re.jsx)(Qe,{geonameId:S.pages[0].userLocationGeonameId,locationName:P,spec:R})]})}));var Yn=n(6022),Jn=n(65370),$n=n(93697);const eo=(0,r.memo)((function(e){var t=e.title,n=void 0===t?"":t,o=e.identifier,a=e.position,i=e.events,c=e.feedSpec,s=e.onOpenGroupedEvent,l=e.layout,u=(0,r.useMemo)((function(){return null==c?void 0:c.eventSectionFactory({identifier:o,position:a})}),[c,o,a]),d=(0,I.t)(u);return 0===i.length?null:(0,re.jsxs)("div",{className:Ie,ref:d,children:["grid"===l&&(0,re.jsx)($n.pZ,{value:"headered-grid",index:a,children:(0,re.jsx)(U.$,{total:i.length,title:n,showAll:!0,withEncoreCards:!1,children:i.map((function(e,t){var n,o=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,re.jsx)(nt,{event:e,position:t,sectionSpec:u,onOpenGroupedEvent:s},null==o?void 0:o.id)}))})}),"list"===l&&(0,re.jsxs)("div",{children:[(0,re.jsx)(E.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Ee,children:n}),i.map((function(e,t){var n,o=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,re.jsx)(gt,{event:e,position:t,sectionSpec:u,onOpenGroupedEvent:s},null==o?void 0:o.id)}))]})]})}));const to=(0,r.memo)((function(e){var t,n,c,u,d=e.spec,v=e.layout,m=e.onLocationNameChange,g=(0,r.useState)(),f=(0,i.A)(g,2),p=f[0],h=f[1],y=(0,l.ok)(),j=(0,i.A)(y,1)[0],b=(c=e.geonameId,u=(0,o.NC)(a.b3k),(0,de.I)({queryKey:["concerts","popular",{geonameId:c}],queryFn:function(){return be(c,u)},staleTime:Ne,placeholderData:ve.rX})),_=(null===(t=b.data)||void 0===t?void 0:t.userLocation)||x.Ru.get("concerts.default_location"),N=(0,r.useMemo)((function(){return null==d?void 0:d.headerFactory()}),[d]),C=(0,s.Zp)();return(0,r.useEffect)((function(){var e;null!==(e=b.data)&&void 0!==e&&e.userLocation&&(null==m||m(b.data.userLocation))}),[null===(n=b.data)||void 0===n?void 0:n.userLocation,m]),(0,re.jsxs)("div",{children:[(0,re.jsx)(O.Q,{children:"".concat(x.Ru.get("concerts_shows_in")," ").concat(_)}),(0,re.jsx)("div",{className:Ke,"data-testid":"location-selector",children:(0,re.jsx)(ke.A,{handleLocationChange:function(e){(0,Yn.d)({action_type:"click",action_intent:"change-live-events-location",view_uri:"",item_id:""}),null!=e&&e.geonameId&&C({pathname:(0,Ye.nm)(e.geonameId,e.location),search:"?".concat(j.toString())})},locationStr:_,headerSpec:N})}),(0,re.jsxs)("div",{className:Ve,children:[(0,re.jsx)(E.E,{variant:"titleSmall",semanticColor:"textBase",children:x.Ru.get("live_events.for_you_anonymous_heading")}),(0,re.jsx)(E.E,{variant:"bodyMedium",className:He,semanticColor:"textSubdued",children:x.Ru.get("live_events.for_you_anonymous_subheading")}),(0,re.jsx)(ht.$,{colorSet:"invertedLight",className:We,onClick:function(){return(0,Jn.ie)()},children:x.Ru.get("live_events.sign_up_free")})]}),b.data&&(0,re.jsx)(eo,{title:x.Ru.get("concerts.popular_concerts_near",_),identifier:"popular",position:0,events:b.data.events,onOpenGroupedEvent:function(e){var t;h(e);var n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];(0,Yn.d)({action_type:"click",action_intent:"open-grouped-live-event",target_uri:n,view_uri:"",item_id:""})},feedSpec:d,layout:v}),(0,re.jsx)(ue,{event:p,locationName:_,feedSpec:d,onClose:function(){return h(void 0)}}),(0,re.jsx)(E.E,{variant:"marginal",semanticColor:"textSubdued",children:x.Ru.get("live_events.disclaimer")}),b.data&&b.data.userLocationGeonameId&&(0,re.jsx)(Qe,{geonameId:b.data.userLocationGeonameId,locationName:_})]})}));n(80710),n(75231),n(26980),n(46825);const no=(0,r.memo)((function(e){var t=e.isLoading,n=e.events,o=e.locationName,a=e.spec,i=e.layout,r=e.onOpenGroupedEvent;if(t)return(0,re.jsx)(L.A,{hasError:!1,errorMessage:""});if(0===n.length)return(0,re.jsx)(F.p,{title:x.Ru.get("concerts.error.no_concerts_found_title"),message:x.Ru.get("concerts.error.no_concerts_found_message",o),renderInline:!0});var c=function(e){var t={popular:[],recommended:[],online:[]};return e.forEach((function(e){switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t}(n);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(eo,{title:x.Ru.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:c.online,onOpenGroupedEvent:r,feedSpec:a,layout:i}),(0,re.jsx)(eo,{title:x.Ru.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:c.recommended,onOpenGroupedEvent:r,feedSpec:a,layout:i}),(0,re.jsx)(eo,{title:x.Ru.get("concerts.popular_concerts_near",o),identifier:"popular",position:2,events:c.popular,onOpenGroupedEvent:r,feedSpec:a,layout:i})]})}));n(59208),n(2944);var oo=n(63259),ao=n(67939),io=n(76875),ro=n(59943),co=n(67281),so=n(42344),lo=new co.l("promoCardPlaylist","query","ad0959194c2cec8bf10b87c74923628dd7c2ef2abbd217374279b0bc728c3cc2",null);const uo="Cot6ZntaldMo77XCx1dt",vo="vfWT92cAm89qtD3Lwfrc",mo="XyJgy3JOLfeFBo2CiltA",go="UI2hGxMrqbScQtyg3FzT",fo="mnwdEtmP084CWa7aUEzN";var po=function(){var e,t,n=(0,oo.V)(),o=(0,r.useContext)(io.w),a=(0,de.I)({queryKey:["cny-resolve"],queryFn:function(){return o.resolvePlaylistFormatURI("spotify:playlist-format:concerts-near-you")},enabled:!n,staleTime:1/0}).data,i=(e={uri:a},t={enabled:!!a},(0,so.I)(lo,e,t)).data;if("Playlist"===(null==i?void 0:i.playlistV2.__typename))return i.playlistV2};const ho=(0,r.memo)((function(e){var t,n=po();if(!n)return null;var o=(0,ro.g)(null===(t=n.images.items[0])||void 0===t?void 0:t.sources,{desiredSize:88});return(0,re.jsxs)(K.A,{to:n.uri,className:uo,children:[(0,re.jsx)(ao._,{src:null==o?void 0:o.url,loading:"lazy",alt:"",ariaHidden:!0,className:vo}),(0,re.jsxs)("div",{className:mo,children:[(0,re.jsx)(E.E,{as:"h3",variant:"bodyMediumBold",className:go,children:n.name}),(0,re.jsx)(E.E,{as:"p",variant:"bodySmall",className:fo,children:n.description})]})]})}));const yo=(0,r.memo)((function(e){var t=e.geonameId,n=e.spec,c=e.layout,l=e.onLocationNameChange,u=(0,s.Zp)(),d=(0,r.useState)(),v=(0,i.A)(d,2),m=v[0],g=v[1],f=(0,Se.W)(),p=(0,r.useMemo)((function(){return n.headerFactory()}),[n]),h=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.NC)(a.b3k);return(0,de.I)({queryKey:["concerts",e],queryFn:function(){return xe(e.geonameId,t)},staleTime:Ne,placeholderData:ve.rX})}({geonameId:t}),y=h.data,j=h.isLoading;(0,r.useEffect)((function(){null!=y&&y.userLocation&&(null==l||l(y.userLocation))}),[null==y?void 0:y.userLocation,l]);var b=(0,o.NC)(a.P98,{loadingValue:!1}),_=(null==y?void 0:y.userLocation)||x.Ru.get("concerts.default_location");return(0,re.jsxs)("div",{children:[(0,re.jsx)(O.Q,{children:"".concat(x.Ru.get("concerts_shows_in")," ").concat(_)}),(0,re.jsx)("div",{className:Ke,"data-testid":"location-selector",children:(0,re.jsx)(ke.A,{handleLocationChange:function(e){f({type:"click",intent:"change-live-events-location"}),null!=e&&e.geonameId&&u((0,Ye.nm)(e.geonameId,e.location))},locationStr:_,headerSpec:p})}),b&&(0,re.jsx)("div",{className:Ze,children:(0,re.jsx)(ho,{})}),(0,re.jsx)(no,{isLoading:j,events:(null==y?void 0:y.events)||[],locationName:_,spec:n,onOpenGroupedEvent:function(e){var t;g(e);var n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];f({type:"click",intent:"open-grouped-live-event",targetUri:n})},layout:c}),(0,re.jsx)(ue,{event:m,locationName:_,feedSpec:n,onClose:function(){return g(void 0)}}),(0,re.jsx)(E.E,{variant:"marginal",semanticColor:"textSubdued",children:x.Ru.get("live_events.disclaimer")}),y&&y.userLocationGeonameId&&(0,re.jsx)(Qe,{geonameId:y.userLocationGeonameId,locationName:_})]})}));const xo=(0,r.memo)((function(e){var t,n,o,a=e.spec,c=e.layout,s=(0,r.useState)(),l=(0,i.A)(s,2),u=l[0],d=l[1],v=(0,de.I)({queryKey:["savedConcerts"],queryFn:_e}),m=(0,Se.W)(),g=(null===(t=v.data)||void 0===t?void 0:t.userLocation)||x.Ru.get("concerts.default_location");return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(O.Q,{children:"".concat(x.Ru.get("live_events.label"))}),null!==(n=v.data)&&void 0!==n&&n.events.length?(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(eo,{title:x.Ru.get("concerts_upcoming"),identifier:"saved",position:0,events:null===(o=v.data)||void 0===o?void 0:o.events,feedSpec:a,onOpenGroupedEvent:function(e){var t;d(e);var n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];m({type:"click",intent:"open-grouped-live-event",targetUri:n})},layout:c})}):(0,re.jsxs)("div",{className:Ue,children:[(0,re.jsx)(E.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Te,children:x.Ru.get("concerts_interested_in_live_events")}),(0,re.jsx)(E.E,{as:"p",className:Be,children:x.Ru.get("concerts_no_events_description")}),(0,re.jsx)(K.A,{to:"/concerts",className:Pe,children:(0,re.jsx)(A.n,{as:"span",className:Me,children:x.Ru.get("concerts_browse_more_events")})})]}),(0,re.jsx)(E.E,{variant:"marginal",semanticColor:"textSubdued",children:x.Ru.get("live_events.disclaimer")}),(0,re.jsx)(ue,{event:u,locationName:g,feedSpec:a,onClose:function(){return d(void 0)}})]})}));var jo=u.blueViolet100;const bo=function(){var e=(0,c.d4)(k.Ht).isAnonymous,t=(0,s.zy)(),n=t.pathname+t.search,a=(0,S.s)(),u=(0,o.NC)(w.oq),E=(0,r.useState)("grid"),A=(0,i.A)(E,2),O=A[0],F=A[1],L=(0,D.r)(y.s,{}).spec,U=(0,l.ok)(),P=(0,i.A)(U,2),M=(P[0],P[1]),T=Re({isAnonymous:e,isInterestedEnabled:u}),B=(0,r.useMemo)((function(){return L.headerFactory().liveEventsNavbarFactory({uri:n,reason:T.type})}),[L,T,n]),z=(0,I.t)(B),G=(0,r.useState)(),K=(0,i.A)(G,2),V=K[0],H=K[1],W=[{value:"foryou",label:x.Ru.get("live_events.for_you_tab"),content:e?(0,re.jsx)(to,{geonameId:T.geonameId,spec:L,layout:O,onLocationNameChange:H}):(0,re.jsx)(yo,{geonameId:T.geonameId,spec:L,layout:O,onLocationNameChange:H})},{value:"all",label:x.Ru.get("live_events.all_events_tab"),content:(0,re.jsx)(Qn,{geonameId:T.geonameId,spec:L,layout:O,onLocationNameChange:H})},{value:"saved",label:x.Ru.get("concerts_interested"),content:(0,re.jsx)(xo,{spec:L,layout:O})}],q=function(){var e=L.headerFactory().layoutToggleFactory().hitToggleState({stateBeforeToggle:O,stateAfterToggle:"grid"===O?"list":"grid"});a.logInteraction(e),F("grid"===O?"list":"grid")},X=e&&V?x.Ru.get("live_events.location_concert_tickets",V):x.Ru.get("live_events.label");return(0,re.jsxs)("section",{className:De,children:[(0,re.jsxs)(b.z,{size:b.K.SMALL,backgroundColor:jo,children:[(0,re.jsx)(_.Y,{children:(0,re.jsx)(R.mm,{children:X})}),(0,re.jsx)(N.h,{children:(0,re.jsx)(C.X,{text:X})})]}),(0,re.jsxs)("div",{className:we,children:[(0,re.jsx)(j.K,{backgroundColor:jo}),(0,re.jsx)("div",{className:Oe,ref:z,children:(0,re.jsxs)(d.t,{currentTab:T.type,onTabChange:function(e,n){if(void 0!==n){var o=W[n].value,i="".concat(t.pathname,"?filter=").concat(o),r=L.headerFactory().liveEventsNavbarFactory({uri:i,reason:o}).hitUiNavigate({destination:i});a.logInteraction(r),M({filter:o})}},children:[(0,re.jsxs)("div",{className:Le,children:[(0,re.jsx)(v.w,{"aria-label":"live events navbar",children:W.map((function(e){return(0,re.jsx)(m.V,{value:e.value,id:e.value,label:e.label,className:Fe},e.value)}))}),"grid"===O&&(0,re.jsx)(g.H,{"aria-label":x.Ru.get("concerts.feed_list_layout"),iconOnly:f.N,className:Ae,onClick:q,size:"small"}),"list"===O&&(0,re.jsx)(g.H,{"aria-label":x.Ru.get("concerts.feed_grid_layout"),iconOnly:p.D,className:Ae,onClick:q,size:"small"})]}),W.map((function(e){return(0,re.jsx)(h.K,{value:e.value,children:e.content},e.value)}))]})})]})]})};var _o=n(3125),No=n(27489),Co=(n(9555),n(21977),n(14183)),Ro=n(66569),ko=n(59950),So=(n(46686),n(91911),n(80766),n(10866),n(38725),n(43864),n(18535),n(62420),n(3869),n(48433)),Io=n(74702),Do=new co.l("concertFeed","query","2c9fb8f35175a8a3f0bd4cbe9de95c3298228db153577f0492e54251c2f813bb",null);function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){(0,Ro.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ao=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me.q,a=(0,r.useContext)(So.j).request,c=o({queryKey:["concert-feed",e.geoHash,e.geonameId,e.dateRange],queryFn:function(t){var n=t.pageParam;return(0,Io.c)(a,Do,Eo(Eo({},e),{},{paginationKey:""===n?null:n}))},staleTime:6e4,gcTime:6e4,enabled:!!e.geoHash||!!e.geonameId,initialPageParam:"",getNextPageParam:function(e){var t,n;if(!(0,Co.Bw)(null==e||null===(t=e.data)||void 0===t?void 0:t.liveEventsFeed))return"";var o=null!==(n=e.data.liveEventsFeed.sections.find((function(e){return"AllEvents"===e.__typename})))&&void 0!==n?n:{};return(0,Co.dR)(o)?o.paginationKey:""}}),s=null==(n=null===(t=c.data)||void 0===t?void 0:t.pages)?void 0:n.reduce((function(e,t){var n,o,a,r=null==e?void 0:e.liveEventsFeed,c=null==t||null===(n=t.data)||void 0===n?void 0:n.liveEventsFeed;if(!(0,Co.Bw)(c)||!(0,Co.Bw)(r))return e;var s=null!==(o=r.sections.find((function(e){return"AllEvents"===e.__typename})))&&void 0!==o?o:{},l=(0,Co.dR)(s)?s.sections:[],u=null!==(a=c.sections.find((function(e){return"AllEvents"===e.__typename})))&&void 0!==a?a:{},d=(0,Co.dR)(u)?u.sections:[],v=[].concat((0,ko.A)(l),(0,ko.A)(d)).reduce((function(e,t){var n,o=null!==(n=e[t.key])&&void 0!==n?n:[];return(0,Co.ys)(t)?Eo(Eo({},e),{},(0,Ro.A)({},t.key,[].concat((0,ko.A)(o),(0,ko.A)(t.concerts)))):e}),{}),m=Object.entries(v).map((function(e){var t=(0,i.A)(e,2);return{key:t[0],concerts:t[1]}}));return{liveEventsFeed:{sections:c.sections.map((function(e){return"AllEvents"===e.__typename||(0,Co.dR)(e)?{sections:m,__typename:"AllEvents"}:e}))}}}),{liveEventsFeed:{sections:[]}});return Eo(Eo({},c),{},{data:s})};var Oo=function(e){var t,n,o=(0,i.A)(e,1)[0];if("visuals"in o.data){var a=null!==(t=null===(n=o.data.visuals.avatarImage)||void 0===n?void 0:n.sources)&&void 0!==t?t:[],r=(0,i.A)(a,1)[0];return null==r?void 0:r.url}};const Fo=function(e){var t=(0,r.useState)(!1),n=(0,i.A)(t,2),o=n[0],a=n[1],c=(0,r.useMemo)((function(){var t;if((0,Co.ys)(e)){var n=(0,i.A)(e.concerts,1)[0];if((0,Co.$V)(n)){var o=(0,G.o_)(n.data.uri);return null===(t=e.spec)||void 0===t?void 0:t.eventCardFactory({identifier:null==o?void 0:o.id,position:e.position,uri:n.data.uri})}}}),[e]),s=(0,S.s)(),l=(0,I.t)(c);if((0,Co.ys)(e)){var u=(0,i.A)(e.concerts,1)[0];if((0,Co.$V)(u)){var d=(0,i.A)(u.data.artists.items,1)[0],v=Oo(u.data.artists.items),m=(0,V.Vi)(e.concerts),g=m.startDate,f=m.endDate;return{isModalOpen:o,handleClick:function(e){e.preventDefault(),a(!0),c&&s.logInteraction(c.hitUiReveal())},handleClose:function(){return a(!1)},concert:{uri:u.data.uri,title:u.data.title,imageUrl:v,dateRange:(0,V.WZ)(g,f),startDateIsoString:u.data.startDateIsoString},artist:{uri:"uri"in d.data?d.data.uri:"",name:"profile"in d.data?d.data.profile.name:"",imageUri:null!=v?v:""},location:{city:u.data.location.city,venue:u.data.location.name},totalConcerts:e.concerts.length,concerts:e.concerts.map((function(e){return(0,Co.$V)(e)?{uri:e.data.uri,title:e.data.title,location:{city:e.data.location.city,venue:e.data.location.name},startDateIsoString:e.data.startDateIsoString}:null})).filter(Co.se),ref:l}}}};var Lo=function(e){var t,n=(0,S.s)(),o=(0,r.useMemo)((function(){var t,n,o=(0,G.o_)((0,Co.$V)(e)?e.data.uri:"");return null===(t=e.spec)||void 0===t?void 0:t.eventCardFactory({identifier:null==o?void 0:o.id,position:e.position,uri:null!==(n=null==o?void 0:o.toURI())&&void 0!==n?n:""})}),[e]);if((0,Co.$V)(e))return{imageUrl:null!==(t=Oo(e.data.artists.items))&&void 0!==t?t:"",uri:e.data.uri,title:e.data.title,subTitle:[e.data.location.name,e.data.location.city].join(x.Ru.getSeparator()),date:e.data.startDateIsoString,dateRange:(0,V.Y)(new Date(e.data.startDateIsoString)),handleClick:function(){return o&&n.logInteraction(o.hitUiNavigate({destination:e.data.uri}))}}};const Uo="V5SKycHF8ljKTRcTXM52",Po="CzWhnZA1N50SUeRTGNXg",Mo="kA_2O3KDNrREQ60CWtsH",To="eIRhBzZ6DVZOR5G3KjAQ",Bo="o9A1xL55C2qn_cIvXSfJ";function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Go={ConcertGroup:function(e){var t,n=Fo(e);return n?(0,re.jsxs)("div",{ref:n.ref,children:[(0,re.jsx)(dt,{onClick:n.handleClick,uri:n.concert.uri,title:n.concert.title,image:null!==(t=n.concert.imageUrl)&&void 0!==t?t:"",subTitle:x.Ru.get("concerts.count",n.concerts.length),dateRange:n.concert.dateRange}),n.isModalOpen&&(0,re.jsx)(se,{onClose:n.handleClose,artist:n.artist,location:n.location,concerts:n.concerts})]}):null},ConcertV2ResponseWrapper:function(e){var t=Lo(e);return t?(0,re.jsx)(dt,{uri:t.uri,title:t.title,subTitle:t.subTitle,image:t.imageUrl,date:t.date,onClick:t.handleClick}):null}};const Ko=function(e){var t=(0,r.useMemo)((function(){var t,n;return null===(t=e.spec)||void 0===t?void 0:t.eventSectionFactory({identifier:"all",position:null!==(n=e.position)&&void 0!==n?n:0})}),[e.spec,e.position]),n=(0,I.t)(t);return 0===e.concerts.length?null:(0,re.jsxs)("div",{ref:n,className:Bo,children:[(0,re.jsx)(E.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:e.title}),e.concerts.map((function(e,n){if(o=e.__typename,!Object.keys(Go).includes(null!=o?o:""))return null;var o,a=Go[e.__typename];return(0,re.jsx)(a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(n),!0).forEach((function(t){(0,Ro.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:n,spec:t},e),n)})).filter(Co.se)]})};function Vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Ho={ConcertGroup:function(e){var t=Fo(e);return t?(0,re.jsxs)("div",{ref:t.ref,children:[(0,re.jsx)($e.A,{onClick:t.handleClick,uri:t.concert.uri,title:t.concert.title,imageUrl:t.concert.imageUrl,subTitle:"".concat(t.concert.dateRange," • ").concat(x.Ru.get("concerts.count",t.totalConcerts))}),t.isModalOpen&&(0,re.jsx)(se,{onClose:t.handleClose,artist:t.artist,location:t.location,concerts:t.concerts})]}):null},ConcertV2ResponseWrapper:function(e){var t=Lo(e);return t?(0,re.jsx)($e.A,{uri:t.uri,title:t.title,subTitle:t.subTitle,imageUrl:t.imageUrl,date:t.date,onClick:t.handleClick}):null}};const Wo=function(e){var t=(0,r.useMemo)((function(){var t,n;return null===(t=e.spec)||void 0===t?void 0:t.eventSectionFactory({identifier:"all",position:null!==(n=e.position)&&void 0!==n?n:0})}),[e.spec,e.position]),n=(0,I.t)(t);return(0,re.jsx)("div",{ref:n,children:(0,re.jsx)(U.$,{total:e.concerts.length,title:e.title,showAll:!0,withEncoreCards:!1,children:e.concerts.map((function(e,n){if(o=e.__typename,!Object.keys(Ho).includes(null!=o?o:""))return null;var o,a=Ho[e.__typename];return(0,re.jsx)(a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(n),!0).forEach((function(t){(0,Ro.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:n,spec:t},e),n)})).filter(Co.se)})})};var qo=function(e){var t={"recommended-events":x.Ru.get("concerts_recommended_for_you"),"popular-events":x.Ru.get("concerts_popular")};return e in t?t[e]:x.Ru.get("concerts")};const Xo="TsOt70CoNNJlItfzhvtF";var Zo={AllEvents:function(e){if(!(0,Co.dR)(e.data))return null;var t="grid"===e.layout?Wo:Ko;return(0,re.jsxs)("div",{children:[e.data.sections.map((function(n,o){return(0,re.jsx)(t,{position:o,title:(a=n.key,null!=a&&a.match(/^(\d{4})-(\d{2})-(\d{2})$/)?(0,V.Fn)(new Date(a)):x.Ru.get("live_events.all_events_tab")),concerts:n.concerts,spec:e.spec},o);var a})),e.data.paginationKey&&e.fetchNextPage&&(0,re.jsx)(A.n,{className:Xo,onClick:function(){return e.fetchNextPage&&e.fetchNextPage()},children:x.Ru.get("concerts.load_more")})]})},LiveEventSection:function(e){if(!(0,Co.eO)(e.data))return null;var t="grid"===e.layout?Wo:Ko;return(0,re.jsx)(t,{title:qo(e.data.key),concerts:e.data.concerts,spec:e.spec})}};const Qo=function(e){var t,n,o,a=Ao({geoHash:e.location.geoHash||null,geonameId:e.location.geonameId||null,dateRange:null!==(t=e.dateRange)&&void 0!==t&&t.from&&null!==(n=e.dateRange)&&void 0!==n&&n.to?{from:(0,Ye.bU)(null===(o=e.dateRange)||void 0===o?void 0:o.from),to:(0,Ye.bU)(e.dateRange.to)}:null}),i=a.data,r=a.isLoading,c=a.error,s=a.fetchNextPage;return r?(0,re.jsx)(L.A,{hasError:!1,errorMessage:""}):!(0,Co.Bw)(null==i?void 0:i.liveEventsFeed)||0===i.liveEventsFeed.sections.length||c?(0,re.jsx)(F.p,{title:x.Ru.get("concerts.error.no_concerts_found_title"),message:x.Ru.get("concerts.error.no_concerts_found_message",e.location.name),renderInline:!0}):(0,re.jsx)("div",{children:null==i?void 0:i.liveEventsFeed.sections.map((function(t,n){if(!(0,Co.w1)(t))return null;var o=Zo[t.__typename];return(0,re.jsx)(o,{layout:e.layout,spec:e.spec,fetchNextPage:s,data:t},n)})).filter(Co.se)})};n(26527),n(82399),n(48605);var Yo=new co.l("concertLocationDetails","query","b13f195349f188fee25480ae889d782852d68663bf07743c654244454750d681",null),Jo=function(e){if(e&&"items"in e)return(0,i.A)(e.items,1)[0]},$o=function(e,t){if(!e)return"/concerts";var n=null==t?void 0:t.normalize().replaceAll(/\W+/g,"-");return n?"/concerts/location/".concat(e,"-").concat(n):"/concerts/location/".concat(e)};const ea=function(){var e,t,n,o,a,u,d,v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.g,m=(0,Se.W)(),g=(0,c.d4)(k.Ht).isAnonymous,f=v().location,p=(0,l.ok)(),h=(0,i.A)(p,1)[0],y=(0,s.Zp)(),x=null!==(e=null==f?void 0:f.match(/^(\d+)/))&&void 0!==e?e:[],j=(0,i.A)(x,2)[1],b=(0,r.useState)(j?{geonameId:Number(j)}:void 0),_=(0,i.A)(b,2),N=_[0],C=_[1],R=(u={geonameId:null!=N&&N.geonameId?String(null==N?void 0:N.geonameId):null,isAnonymous:g},(0,so.I)(Yo,u,d)).data,S=function(e){var t;(C(e),m({type:"click",intent:"change-live-events-location"}),null!=e&&e.geonameId)&&y({pathname:String(e.geonameId)===(null==R||null===(t=R.me)||void 0===t||null===(t=t.profile)||void 0===t||null===(t=t.location)||void 0===t?void 0:t.geonameId)?"/concerts":$o(e.geonameId,e.location),search:new URLSearchParams(h).toString()})};if(N){var I,D,w,E=Jo(null==R?void 0:R.concertLocations);return{location:{geonameId:null!==(I=N.geonameId)&&void 0!==I?I:Number(null==E?void 0:E.geonameId),geohash:null!==(D=N.geohash)&&void 0!==D?D:null==E?void 0:E.geoHash,name:null!==(w=N.name)&&void 0!==w?w:null==E?void 0:E.name},onChangeLocation:S}}var A=null==R||null===(t=R.me)||void 0===t||null===(t=t.profile)||void 0===t?void 0:t.location,O=Jo(null==R?void 0:R.concertLocations);return{location:null!=A&&A.geoHash||null!=O&&O.geonameId?{geohash:null!==(n=null==A?void 0:A.geoHash)&&void 0!==n?n:null==O?void 0:O.geoHash,geonameId:Number(null!==(o=null==A?void 0:A.geonameId)&&void 0!==o?o:null==O?void 0:O.geonameId),name:null!==(a=null==A?void 0:A.name)&&void 0!==a?a:null==O?void 0:O.name}:void 0,onChangeLocation:S}};const ta=function(){var e,t,n=(0,c.d4)(k.Ht).isAnonymous,o=(0,r.useState)("grid"),a=(0,i.A)(o,2),s=a[0],d=a[1],v=ea(),m=v.location,h=v.onChangeLocation,I=pt(),w=(0,l.ok)(),E=(0,i.A)(w,2),A=E[0],F=E[1],L=(0,D.r)(y.s,{}).spec,U=(0,r.useMemo)((function(){return L.headerFactory()}),[L]),P=(0,S.s)(),M=n&&null!=m&&m.name?x.Ru.get("live_events.location_concert_tickets",m.name):x.Ru.get("live_events.label"),T=function(){var e=U.layoutToggleFactory().hitToggleState({stateBeforeToggle:s,stateAfterToggle:"grid"===s?"list":"grid"});P.logInteraction(e),d("grid"===s?"list":"grid")},B="interested"===A.get("filter"),z=B?ht.$:g.H;return(0,re.jsxs)("section",{children:[(0,re.jsx)(O.Q,{children:(0,No.zV)(null==m?void 0:m.name)}),(0,re.jsxs)(b.z,{size:b.K.SMALL,backgroundColor:u.blueViolet100,children:[(0,re.jsx)(_.Y,{children:(0,re.jsx)(R.mm,{children:M})}),(0,re.jsx)(N.h,{children:(0,re.jsx)(C.X,{text:M})})]}),(0,re.jsxs)("div",{children:[(0,re.jsx)(j.K,{backgroundColor:u.blueViolet100}),(0,re.jsxs)("div",{className:Uo,children:[(0,re.jsxs)("div",{className:Po,children:[B?(0,re.jsx)("div",{}):(0,re.jsxs)("div",{className:Mo,children:[(0,re.jsx)(ke.A,{headerSpec:U,locationStr:null!==(e=null==m?void 0:m.name)&&void 0!==e?e:"",handleLocationChange:h}),(0,re.jsx)(Xn,{spec:L})]}),(0,re.jsxs)("div",{className:To,children:["grid"===s&&(0,re.jsx)(g.H,{"aria-label":x.Ru.get("concerts.feed_list_layout"),iconOnly:f.N,onClick:T,size:"small"}),"list"===s&&(0,re.jsx)(g.H,{"aria-label":x.Ru.get("concerts.feed_grid_layout"),iconOnly:p.D,onClick:T,size:"small"}),(0,re.jsx)(z,{size:"small",iconLeading:_o.E,onClick:function(){return F({filter:B?"":"interested"})},children:x.Ru.get("concerts_interested")})]})]}),B?(0,re.jsx)(xo,{layout:s,spec:L}):(0,re.jsx)(Qo,{spec:L,layout:s,location:{geoHash:null==m?void 0:m.geohash,geonameId:null!=m&&m.geonameId?String(m.geonameId):"",name:null!==(t=null==m?void 0:m.name)&&void 0!==t?t:""},dateRange:I})]})]})]})};const na=function(){return(0,o.NC)(a.iNb)?(0,re.jsx)(ta,{}):(0,re.jsx)(bo,{})}},66410:(e,t,n)=>{n.d(t,{bU:()=>u,fD:()=>s,he:()=>l,nm:()=>r});n(59208),n(2944),n(42078),n(40313),n(24847),n(60989),n(59433),n(52165),n(45191),n(20767),n(10565),n(20427),n(45803),n(62980),n(11034),n(65083),n(47246),n(36389),n(82399),n(48605),n(75231),n(2795),n(77020);var o=n(42534);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,r=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw r}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var r=function(e,t){if(!e)return"/concerts";var n=null==t?void 0:t.normalize().replaceAll(/\W+/g,"-");return n?"/concerts/location/".concat(e,"-").concat(n):"/concerts/location/".concat(e)},c=10;function s(e){if(0===e.length)return[];if(0===e[0].events.length)return[];var t,n=[],o={date:e[0].events[0].openingDate.slice(0,c),events:[]},i=a(e);try{for(i.s();!(t=i.n()).done;){var r,s=a(t.value.events);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=l.openingDate.slice(0,c);o.date!==u&&(n.push(o),o={date:u,events:[]}),o.events.push(l)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){i.e(e)}finally{i.f()}return n.push(o),n}var l=function(e){return e.ticketers.some((function(e){return"spotify"===e.partnerDisplayName.toLowerCase()}))},u=function(e){return(0,o.x)(e,{representation:"date"})}}}]);
=======
"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5835],{25847:(e,t,a)=>{a.d(t,{Z:()=>j});var n=a(50959),s=a(69736),i=a(60702),o=a(60046),r=a(56146),c=a(5863);const l="MUiWCNTfb6FcSwVPvQ1V",d="UAk3bMhekwJTV_wIyfsT",m="X9w6LPfKsZHMCs38sVIQ",g="NXn5KjeUOjLGlAfS1Gao",u="N0wgFMDDvCiby4QB5kLJ",v="nloNe2BLRHjz9dxlwfLU",h="FyD0hF1e2PKzRxQ6sYDQ",p="JzXND83mXvcEuntCNR34",x="GR08E4L_rOGljyQQX30R";var y=a(11527);const j=(0,n.memo)((e=>{const{uri:t,title:a,imageUrl:n,date:j,location:f,firstParty:N,onClick:k}=e,_=(0,c.CH)(j);return(0,y.jsxs)(o.Link,{to:t,className:l,"data-testid":"concert-card",onClick:k,children:[n&&(0,y.jsx)(r.Z,{children:(0,y.jsx)("div",{role:"img",className:x,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${n})`}})}),(0,y.jsx)("time",{className:d,dateTime:j,children:(0,y.jsx)(s.x,{as:"div",variant:"bodySmallBold",children:(0,c.jx)(_)})}),(0,y.jsxs)("div",{className:m,dir:"auto",children:[(0,y.jsx)(s.x,{as:"p",className:p,variant:"bodySmall",children:[(0,c.FO)(_),(0,c.hK)(_)].join(" • ")}),(0,y.jsx)(s.x,{as:"h2",variant:"bodyMediumBold",className:g,children:a}),(0,y.jsxs)("div",{className:u,children:[N&&(0,y.jsx)("span",{className:h,children:(0,y.jsx)(i.V,{size:"small"})}),(0,y.jsx)(s.x,{as:"span",className:v,variant:"bodySmall","data-testid":"location-name",children:f})]})]})]})}))},88993:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(50959),s=a(11317),i=a(85648),o=a(50554),r=a(43827),c=a(25847),l=a(11527);const d=(0,n.memo)((e=>{const{concert:t,isVirtual:a,onClick:n}=e,{venue:d,location:m}=t,g=t.artists[0];return(0,l.jsx)(c.Z,{uri:(0,s.g3)(t.id).toURI(),title:(0,r.ij)(t),imageUrl:g.imageUri,date:t.startDate.localDate,location:a?d:[d,m].join(i.ag.getSeparator()),firstParty:(0,o.$R)(t),onClick:n})}))},50554:(e,t,a)=>{a.d(t,{$R:()=>c,DF:()=>g,Vv:()=>d,ie:()=>u,k9:()=>r,pm:()=>m,sk:()=>l,yI:()=>i});a(46758),a(39301);var n=a(44242),s=a(16012);const i=(e,t)=>{if(!e)return"/concerts";const a=t?.normalize().replaceAll(/\W+/g,"-");return a?`/concerts/location/${e}-${a}`:`/concerts/location/${e}`},o=10;function r(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const t=[];let a={date:e[0].events[0].openingDate.slice(0,o),events:[]};for(const n of e)for(const e of n.events){const n=e.openingDate.slice(0,o);a.date!==n&&(t.push(a),a={date:n,events:[]}),a.events.push(e)}return t.push(a),t}const c=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),l=e=>e.concerts.some((({concert:e})=>c(e))),d=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);return a.setDate(t.getDate()+1),{from:t,to:a}},m=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);a.setDate(t.getDate()+7);const n=new Date(a);return n.setDate(a.getDate()+1),{from:a,to:n}},g=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,n.K)(e.from,t.from)&&(0,n.K)(e.to,t.to)),u=e=>(0,s.c)(e,{representation:"date"})},59242:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ra});var n=a(50959),s=a(35869),i=a(75802),o=a(36275),r=a(39505),c=a(44614),l=a(55004),d=a(92537),m=a(68007),g=a(41423),u=a(24936),v=a(10226),h=a(34410),p=a(85648),x=a(37335),y=a(97922),j=a(81639),f=a(16118),N=a(87350),k=a(80626),_=a(47895),b=(a(86277),a(44242)),S=a(69736),C=a(6370),D=a(31848),I=a(66197),F=a(41038),L=a(38024),w=a(91643),U=a(70930),E=a(42240),M=a(90657),P=a(60702),O=a(7863),B=a(21705),W=a(40537),A=a(60046),H=a(50554),R=a(5863),T=a(43827);const G="cELOd04or4B6BbTbNWA7",z="CHJYbX33oDik9u4n4ohH",$="woQ0wEe6FL4lsGW05bsb",V="KTDREr8pDWjrmnzXzZ2z",K="UUTvdEOH2v_rejoXdl9Z",q="cBbTozR921ppaoNZP0Uh",Z="SNyyQ0t_VvlWzzB9li7v",J="lwO4iko6mhCUgZN1s9AW",X="akvZI06vqHOow1pOL29J",Q="WWZp3WM0maWJzl2qWEHE",Y="YdkAHxbDekz9SiAxHG6M",ee="AK37djOBJ2BuJOGuG1kQ",te="JfYURQbEA_ntMsMZV6tK",ae="du0mOGaZfHg3hsHwRMIu",ne="Rvzy4ltiiHIp9mvlxf0c",se="uEXt8BtfJCONUNVYrAHn";var ie=a(11527);const oe=(0,n.memo)((e=>{const{concert:t,position:a,modalSpec:s}=e,{id:i,venue:o,location:r}=t,c=t.startDate.localDate,l=(0,R.CH)(c),d="ONLINE"===t.category,m=(0,n.useMemo)((()=>s?.eventRowFactory({position:a,uri:`spotify:concert:${t.id}`})),[s,a,t]),g=(0,k.$P)();return(0,ie.jsxs)(A.Link,{to:`/concert/${t.id}`,className:J,onClick:()=>{m&&g.logInteraction(m.hitUiNavigate({destination:`/concert/${i}`}))},children:[(0,ie.jsxs)("div",{className:X,"aria-hidden":!0,children:[(0,ie.jsx)(S.x,{as:"div",variant:"marginalBold",className:Q,children:(0,R.jw)(l)}),(0,ie.jsx)(S.x,{as:"div",variant:"bodyMediumBold",className:Y,children:(0,R.wf)(l)})]}),(0,ie.jsxs)("div",{className:ee,children:[(0,ie.jsx)(S.x,{as:"div",variant:"bodySmallBold",className:te,"data-testid":"event-title",children:(0,T.Yl)(t)}),(0,ie.jsx)(M.T,{children:(0,R.jx)(l)}),(0,ie.jsxs)(S.x,{as:"div",variant:"bodySmall",className:ae,children:[(0,R.FO)(l)," • ",(0,R.hK)(l)]}),(0,ie.jsx)("span",{className:se,children:(0,H.$R)(t)&&(0,ie.jsx)(P.V,{size:"small"})}),(0,ie.jsx)(S.x,{as:"div",variant:"bodySmall",className:ne,"data-testid":"event-venue",children:d?o:[o,r].join(p.ag.getSeparator())})]})]},t.id)})),re=(0,n.memo)((e=>{const{event:t,locationName:a,onClose:s,feedSpec:i}=e,o=t?.concerts[0]?.concert,r=o?.artists[0],c=(0,n.useMemo)((()=>i?.groupedEventModalFactory({uri:r?.uri||""})),[i,r]),l=(0,k.$P)(),d=(0,k.Wi)(c);if(!t||!o||!r)return null;const m=()=>{c&&l.logInteraction(c.closeButtonFactory().hitUiHide()),s()};return(0,ie.jsx)(W.Z,{contentLabel:p.ag.get("live_events.label"),isOpen:!0,className:G,onRequestClose:m,children:(0,ie.jsxs)("section",{className:z,ref:d,children:[(0,ie.jsx)("div",{className:$,children:(0,ie.jsx)(ce,{"aria-label":p.ag.get("close"),iconOnly:O.k,size:"small",onClick:m})}),(0,ie.jsxs)("div",{className:V,children:[(0,ie.jsx)(B.E,{height:"48",width:"48",className:K,src:r.imageUri}),(0,ie.jsxs)("div",{className:q,children:[(0,ie.jsx)(S.x,{as:"h3",variant:"bodyMediumBold",className:Z,"data-testid":"event-venue",children:r.name}),(0,ie.jsx)(S.x,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:`${p.ag.get("concerts.count_near_location",t.concerts.length,a)}`})]})]}),t.concerts.map(((e,t)=>(0,ie.jsx)(oe,{concert:e.concert,position:t,modalSpec:c},e.concert.id)))]})})}));var ce=(0,E.ZP)(m.o).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),le=a(41194),de=a(43007),me=a(70207),ge=a(13188),ue=a(70867);const ve=async()=>(await(0,ue.rD)(ge.b.getInstance())).body,he=6e5,pe=e=>(0,le.a)({queryKey:["concerts",e],queryFn:()=>(async e=>(await(0,ue.$0)(ge.b.getInstance(),e)).body)(e.geonameId),staleTime:he,placeholderData:de.Wk}),xe=e=>(0,me.N)({queryKey:["concerts","all",e],queryFn:({pageParam:t})=>(async(e=1,t)=>{const{geonameId:a,startDate:n,endDate:s}=t;return(await(0,ue.ij)(ge.b.getInstance(),{page:e,geonameId:a,startDate:n,endDate:s})).body})(t,e),staleTime:he,initialPageParam:1,placeholderData:de.Wk,getNextPageParam:(e,t)=>{if(!(t.length>=50)&&0!==e.events.length)return t.length+1}}),ye=e=>(0,le.a)({queryKey:["concerts","popular",{geonameId:e}],queryFn:()=>(async e=>(await(0,ue.YA)(ge.b.getInstance(),void 0,e)).body)(e),staleTime:he,placeholderData:de.Wk}),je=/^(\d+)/,fe=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,a,n,s]=t;return new Date(parseInt(a,10),parseInt(n,10)-1,parseInt(s,10))},Ne=e=>{const t=(()=>{const{location:e}=(0,i.UO)(),[,t]=e?.match(je)||[];if(t)try{return parseInt(t,10)}catch(e){return}})(),[a]=(0,o.lr)(),n=a.get("filter")?.trim();return e.isAnonymous&&!n||"all"===n?{type:"all",geonameId:t}:e.isInterestedEnabled&&"saved"===n?{type:"saved"}:{type:"foryou",geonameId:t}};var ke=a(92598),_e=a(13734),be=a(37001);const Se="MVPegsivznZB6gdkcnkH",Ce="MlK79hskRbFrN2OBjMkl",De="VxaXFH9Uq1NU0LtsVhIu",Ie="UDVDNa40iTSPS9uHCG7Q",Fe="vktIWsUczavLRrl4SkRt",Le="Y1JeRPqrmHKXI1KcstYN",we="ofURwIKv0qEXJGTraIis",Ue="fN_lJHkYih9H3j9YSEzS",Ee="LOJZO2MnGW5dCIawF767",Me="tyc7QRlEJigVFIAeLGOB",Pe="PoljWhTLU3MKqIx2gSPY",Oe="ajxCNAuBJSgYfKUUBWBT",Be="WR2h2Li5XTrBn_Rdme_k",We="WNhsvOyu4doInF525pLE",Ae="qSR4imCvzdznIQ4F2kBO",He="BCDMgFFqzEyzC1UqkW3t",Re="jFxUCv1gagc6erXmpgYw",Te="XOS1JS9iDK8dgeF3GeL5",Ge="LNAJMvRlTPqWsmZvV7Kg",ze="jP10ZUl0Jn2Ijue3fZux",$e="ncN9bwTgIRk6xruAt5T8",Ve="hKG8XDR5S00bjBAibgbI",Ke="XMhrCtHCVSPsNW67vM1m",qe="vT0t_YE1HgmbnHLLhJD9",Ze=(0,n.memo)((e=>{const{geonameId:t,locationName:a,spec:s}=e,[i,o]=(0,n.useState)(!1),r=(0,k.Wi)(s),c=`https://concerts.spotifycdn.com/feed_city_images_1/${t}.jpg`;return(0,n.useEffect)((()=>{const e=()=>{o(!0)},t=()=>{o(!1)},a=new Image;return a.addEventListener("load",e),a.addEventListener("error",t),a.src=c,()=>{a.removeEventListener("load",e),a.removeEventListener("error",t)}}),[c]),(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsxs)("div",{className:Ve,ref:r,children:[i&&(0,ie.jsx)(B.E,{src:c,className:Ke,circle:!0,imageHeight:"56px",imageWidth:"56px"}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)(S.x,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:p.ag.get("live_events.city_info_find_tickets",a)}),(0,ie.jsx)(S.x,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:p.ag.get("live_events.city_info_view_details")})]})]})})}));var Je=a(76795),Xe=(a(4461),a(3533)),Qe=a(44246);const Ye="eFIu3aQJuKmf6H4Lb18K",et="LPNL3DZ89Iisp8TMArD3",tt="moVCbo9Ao5YJ5PsH4Qdz",at="URXDMjhb8pQWIDaBrCPC",nt="a3oYct1knu9af60A0v6g",st="qbIrubbolsixlgVkhO5r",it="xHihsEV_0W6kpm0wHsXA",ot="T8po_YH39Q9dhAsLAhec",rt={formatCaption:e=>p.ag.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>p.ag.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>p.ag.formatDate(e,{weekday:"short"})},ct=(0,n.memo)((e=>{const{onDone:t,onClose:a,spec:s}=e,[i,o]=(0,n.useState)(e.dateRange),r=(0,Qe.S)(),c=(0,k.Wi)(s),l=(0,k.$P)(),d=new Date,g=(0,H.Vv)(d),u=(0,H.pm)(d),v=(0,H.DF)(i,g),h=(0,H.DF)(i,u);return(0,ie.jsx)("div",{ref:c,children:(0,ie.jsx)(W.Z,{isOpen:!0,children:(0,ie.jsxs)("section",{className:Ye,children:[(0,ie.jsx)(m.o,{className:et,iconOnly:O.k,size:"small",onClick:a,"aria-label":p.ag.get("close_button_action")}),(0,ie.jsxs)("div",{className:tt,children:[(0,ie.jsx)(S.x,{as:"h3",variant:"bodyMediumBold",children:p.ag.get("live_events.date_picker_dialog_title")}),(0,ie.jsxs)("div",{className:at,children:[(0,ie.jsx)(I.A,{className:nt,size:"md",selectedColorSet:"brightAccent",selected:v,onClick:()=>{o(v?void 0:g),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:p.ag.get("live_events.this_weekend_preset")}),(0,ie.jsx)(I.A,{className:nt,size:"md",selectedColorSet:"brightAccent",selected:h,onClick:()=>{o(h?void 0:u),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:p.ag.get("live_events.next_weekend_preset")})]})]}),(0,ie.jsx)(Je._W,{mode:"range",selected:i,onSelect:o,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,formatters:rt,dir:r?"rtl":"ltr",modifiersClassNames:{today:st}}),(0,ie.jsxs)("div",{className:it,children:[(0,ie.jsx)(m.o,{className:ot,size:"small",onClick:()=>{o(void 0)},disabled:!i?.from,children:p.ag.get("live_events.date_picker_dialog_clear")}),(0,ie.jsx)(Xe.D,{size:"small",onClick:()=>{if(i?.from){const{from:e,to:a}=i;t({from:e,to:a||e})}else t()},children:p.ag.get("live_events.date_picker_dialog_done")})]})]})})})}));var lt=a(11317),dt=a(88993),mt=a(56146);const gt="pU4WoqT8T6PmtjPbFtK0",ut="FC5Y_KFJ9rJyTpydqtOW",vt="AAYLcavkBdCuebn9AQxT",ht="lYHCmxpdReachiOORWGo",pt="JtKEdtTtcK7s6EpGecaC",xt="XuH9DoZCf0aVJ2BxQkTB",yt="myHDa69cI5CHC8fhIhkG",jt=(0,n.memo)((e=>{const{event:t,onClick:a}=e,s=(0,n.useCallback)((()=>a(t)),[t,a]),i=(0,R.CH)(t.openingDate),o=(0,R.CH)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,ie.jsxs)(m.o,{onClick:s,className:gt,component:"div","data-testid":"concert-card",role:"button",children:[c.imageUri&&(0,ie.jsx)(mt.Z,{children:(0,ie.jsx)("div",{role:"img",className:yt,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${c.imageUri})`}})}),(0,ie.jsx)("time",{className:ut,dateTime:i.toISOString(),children:(0,ie.jsx)(S.x,{as:"p",variant:"bodySmallBold",children:(0,R.Bc)(i,o)})}),(0,ie.jsxs)("div",{className:vt,dir:"auto",children:[(0,ie.jsx)(S.x,{as:"h2",variant:"bodyMediumBold",className:ht,children:(0,T.ij)(r)}),(0,ie.jsxs)("div",{className:pt,children:[(0,H.sk)(t)&&(0,ie.jsx)("span",{className:xt,children:(0,ie.jsx)(P.V,{size:"small"})}),(0,ie.jsx)(S.x,{as:"span",variant:"bodySmall","data-testid":"concerts-count",children:p.ag.get("concerts.count",t.concerts.length)})]})]})]})})),ft=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:i}=e,o=t.concerts[0]?.concert,r=o?.id,c=o&&(0,lt.g3)(o.id).toURI(),l=(0,k.$P)(),d=(0,n.useMemo)((()=>s?.eventCardFactory({identifier:r??"",position:a,uri:c??""})),[s,r,c,a]),m=(0,k.Wi)(d),g=e=>{i(e),d&&l.logInteraction(d.hitUiReveal())};if(t.concerts.length>1)return(0,ie.jsx)("div",{ref:m,children:(0,ie.jsx)(jt,{event:t,onClick:g})});return(0,ie.jsx)("div",{ref:m,children:(0,ie.jsx)(dt.Z,{concert:o,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c}))}})})})),Nt="yLIDHkmBrjsAVNMCcFM_",kt="qr_9NXyk7D0t6wclM5R0",_t="mDxkFuOd3TBAQI2gXatq",bt="AQ8ZFs5U45GPiyJnqEvt",St="E8DcbdVmmoGfC8R8S1Vw",Ct="wzS5PwxEhferQEdjumt0",Dt="E0zwnbwA3HzqNi2BV4eq",It=(0,n.memo)((e=>{const{event:t,onClick:a}=e,s=(0,n.useCallback)((()=>a(t)),[t,a]),i=(0,R.CH)(t.openingDate),o=(0,R.CH)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,ie.jsxs)("div",{className:Ct,onClick:s,onKeyPress:s,role:"link",tabIndex:0,children:[(0,ie.jsx)(B.E,{src:c?.imageUri,alt:"",role:"presentation",className:Nt}),(0,ie.jsxs)("div",{className:kt,children:[(0,ie.jsx)(S.x,{as:"span",variant:"bodyMediumBold",className:_t,"data-testid":"event-title",children:(0,T.ij)(r)}),(0,ie.jsx)(S.x,{as:"span",variant:"bodyMedium",className:bt,children:(0,R.Bc)(i,o)}),(0,ie.jsxs)(S.x,{as:"span",variant:"bodyMedium",className:St,"data-testid":"event-venue",children:[(0,H.sk)(t)&&(0,ie.jsx)(P.V,{size:"small",className:Dt}),p.ag.get("concerts.count",t.concerts.length)]})]})]})})),Ft=(0,n.memo)((e=>{const{concert:t,isVirtual:a,onClick:n}=e,{venue:s,location:i}=t,o=t.artists[0],r=(0,R.CH)(t.startDate.localDate);return(0,ie.jsxs)(A.Link,{to:`/concert/${t?.id}`,className:Ct,"data-testid":"concert-row",onClick:n,children:[(0,ie.jsx)(B.E,{src:o?.imageUri,alt:"",role:"presentation",className:Nt}),(0,ie.jsxs)("div",{className:kt,children:[(0,ie.jsx)(S.x,{as:"span",variant:"bodyMediumBold",className:_t,"data-testid":"event-title",children:(0,T.ij)(t)}),(0,ie.jsxs)(S.x,{as:"span",variant:"bodyMedium",className:bt,children:[(0,R.xE)(r)," • ",(0,R.hK)(r)]}),(0,ie.jsxs)(S.x,{as:"span",variant:"bodyMedium",className:St,"data-testid":"event-venue",children:[(0,H.$R)(t)&&(0,ie.jsx)(P.V,{size:"small",className:Dt}),a?s:[s,i].join(p.ag.getSeparator())]})]})]})})),Lt=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:i}=e,o=t.concerts[0]?.concert,r=o?.id,c=o&&(0,lt.g3)(o.id).toURI(),l=(0,k.$P)(),d=(0,n.useMemo)((()=>s?.eventRowFactory({identifier:r??"",position:a,uri:c??""})),[s,r,c,a]),m=(0,k.Wi)(d),g=e=>{i(e)};if(t.concerts.length>1)return(0,ie.jsx)("div",{ref:m,children:(0,ie.jsx)(It,{event:t,onClick:g})});return(0,ie.jsx)("div",{ref:m,children:(0,ie.jsx)(Ft,{concert:o,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c??""}))}})})})),wt=(0,n.memo)((e=>{const{eventGroups:t,locationName:a,isLoading:s,feedSpec:i,onOpenGroupedEvent:o,layout:r}=e,c=(0,n.useMemo)((()=>i?.eventSectionFactory({identifier:"all",position:1})),[i]),l=(0,k.Wi)(c);return s?(0,ie.jsx)(w.h,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,ie.jsx)(L.u,{title:p.ag.get("concerts.error.no_concerts_found_title"),message:p.ag.get("concerts.error.no_concerts_found_message",a),renderInline:!0}):(0,ie.jsx)("div",{ref:l,children:t.map((e=>(0,ie.jsxs)("div",{className:We,children:["grid"===r&&(0,ie.jsx)(U.P,{total:e.events.length,title:p.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),gridConfigOverride:be.jM.DEFAULT,showAll:!0,removeOffsetMargin:!0,children:e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,ie.jsx)(ft,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:o},a?.id)}))}),"list"===r&&(0,ie.jsxs)("div",{children:[(0,ie.jsx)(S.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Fe,children:p.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,ie.jsx)(Lt,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:o},a?.id)}))]})]},e.date)))}):null})),Ut={month:"short",day:"numeric"},Et=e=>{if((0,b.K)(e.from,e.to))return p.ag.formatDate(e.from,Ut);return`${p.ag.formatDate(e.from,Ut)} - ${p.ag.formatDate(e.to,Ut)}`},Mt=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s,onLocationNameChange:r}=e,c=(()=>{const[e]=(0,o.lr)(),t=e.get("startDate")?.trim(),a=e.get("endDate")?.trim(),n=fe(t),s=fe(a);return n&&s&&{from:n,to:s}})(),l=(0,i.s0)(),[,d]=(0,o.lr)(),[m]=(0,o.lr)(),[g,u]=(0,n.useState)(),[v,h]=(0,n.useState)(!1),x=(0,_e.o)(),y=(0,n.useMemo)((()=>a?.headerFactory()),[a]),j=(0,n.useMemo)((()=>a?.datePickerModalFactory()),[a]),f=(0,n.useMemo)((()=>a?.cityInfoFactory()),[a]),N=(0,k.$P)(),{data:_,isLoading:b,hasNextPage:L,isFetchingNextPage:w,fetchNextPage:U}=xe({geonameId:t,startDate:c&&(0,H.ie)(c.from),endDate:c&&(0,H.ie)(c.to)}),E=(0,n.useMemo)((()=>(0,H.k9)(_?.pages??[])),[_?.pages]),M=_?.pages[0]?.userLocation;(0,n.useEffect)((()=>{M&&r?.(M)}),[M,r]);const P=M||p.ag.get("concerts.default_location"),O=(0,H.Vv)(new Date),B=(0,H.pm)(new Date),W=(0,n.useCallback)((e=>{const t={filter:"all"};if(e&&(t.startDate=(0,H.ie)(e.from),t.endDate=(0,H.ie)(e.to),j)){const e=new URLSearchParams(t).toString();N.logInteraction(j.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}h(!1),d(t),j&&N.logInteraction(j.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[d,j,N]),A=(0,n.useCallback)((e=>{const t={filter:"all"};(0,H.DF)(c,e)||(t.startDate=(0,H.ie)(e.from),t.endDate=(0,H.ie)(e.to)),d(t)}),[c,d]);return(0,ie.jsxs)("div",{children:[(0,ie.jsx)(F.$,{children:`${p.ag.get("concerts_shows_in")} ${P}`}),(0,ie.jsxs)("div",{className:Re,children:[(0,ie.jsx)(ke.Z,{handleLocationChange:e=>{x({type:"click",intent:"change-live-events-location"}),e?.geonameId&&l({pathname:(0,H.yI)(e.geonameId,e.location),search:`?${m.toString()}`})},locationStr:P,headerSpec:y}),(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(C.P,{className:He,iconLeading:D.a,onClick:()=>{h(!0),y&&N.logInteraction(y.datePickerButtonFactory().hitUiReveal())},size:"small",children:c?Et(c):p.ag.get("live_events.date_picker_button_text")}),v&&(0,ie.jsx)(ct,{onClose:()=>{h(!1),j&&N.logInteraction(j.closeButtonFactory().hitUiHide())},onDone:W,dateRange:c,spec:j}),(0,ie.jsx)(I.A,{className:Te,size:"sm",selectedColorSet:"brightAccent",selected:(0,H.DF)(c,O),onClick:()=>{if(A(O),y){const e={startDate:(0,H.ie)(O.from),endDate:(0,H.ie)(O.to)},t=new URLSearchParams(e).toString();N.logInteraction(y.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},children:p.ag.get("live_events.this_weekend_preset")}),(0,ie.jsx)(I.A,{className:Te,size:"sm",selectedColorSet:"brightAccent",selected:(0,H.DF)(c,B),onClick:()=>{if(A(B),y){const e={startDate:(0,H.ie)(B.from),endDate:(0,H.ie)(B.to)},t=new URLSearchParams(e).toString();N.logInteraction(y.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},children:p.ag.get("live_events.next_weekend_preset")})]})]}),(0,ie.jsx)(wt,{isLoading:b,locationName:P,eventGroups:E,onOpenGroupedEvent:e=>{u(e);const t=e.concerts[0]?.concert.artistUris[0];x({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:a,layout:s}),L&&(0,ie.jsx)("div",{className:Ae,children:(0,ie.jsx)(C.P,{disabled:w,onClick:()=>{U()},children:p.ag.get("concerts.load_more")})}),(0,ie.jsx)(re,{event:g,locationName:P,feedSpec:a,onClose:()=>u(void 0)}),(0,ie.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),_&&_.pages[0]&&_.pages[0].userLocationGeonameId&&(0,ie.jsx)(Ze,{geonameId:_.pages[0].userLocationGeonameId,locationName:P,spec:f})]})}));var Pt=a(22553),Ot=a(8509),Bt=a(82187),Wt=a.n(Bt),At=a(24422),Ht=a(17676),Rt=a(45438);const Tt=(0,n.memo)((e=>{const{title:t="",identifier:a,position:s,events:i,feedSpec:o,onOpenGroupedEvent:r,layout:c}=e,l=(0,n.useMemo)((()=>o?.eventSectionFactory({identifier:a,position:s})),[o,a,s]),d=(0,k.Wi)(l),m=(0,v.W6)(Ht.WDb);return 0===i.length?null:(0,ie.jsxs)("div",{className:Se,ref:d,children:["grid"===c&&(0,ie.jsx)(Rt.JL,{value:"headered-grid",index:s,children:(0,ie.jsx)(U.P,{total:i.length,title:t,gridConfigOverride:be.jM.DEFAULT,showAll:!0,removeOffsetMargin:!0,className:Wt()({[At.Z.titleSpacing]:m}),children:i.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,ie.jsx)(ft,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},a?.id)}))})}),"list"===c&&(0,ie.jsxs)("div",{children:[(0,ie.jsx)(S.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Fe,children:t}),i.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,ie.jsx)(Lt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},a?.id)}))]})]})})),Gt=(0,n.memo)((e=>{const{spec:t,layout:a,onLocationNameChange:s}=e,[r,c]=(0,n.useState)(),[l]=(0,o.lr)(),d=ye(e.geonameId),m=d.data?.userLocation||p.ag.get("concerts.default_location"),g=(0,n.useMemo)((()=>t?.headerFactory()),[t]),u=(0,i.s0)();return(0,n.useEffect)((()=>{d.data?.userLocation&&s?.(d.data.userLocation)}),[d.data?.userLocation,s]),(0,ie.jsxs)("div",{children:[(0,ie.jsx)(F.$,{children:`${p.ag.get("concerts_shows_in")} ${m}`}),(0,ie.jsx)("div",{className:Re,"data-testid":"location-selector",children:(0,ie.jsx)(ke.Z,{handleLocationChange:e=>{(0,Pt._)({type:"click",intent:"change-live-events-location"}),e?.geonameId&&u({pathname:(0,H.yI)(e.geonameId,e.location),search:`?${l.toString()}`})},locationStr:m,headerSpec:g})}),(0,ie.jsxs)("div",{className:Ge,children:[(0,ie.jsx)(S.x,{variant:"titleSmall",semanticColor:"textBase",children:p.ag.get("live_events.for_you_anonymous_heading")}),(0,ie.jsx)(S.x,{variant:"bodyMedium",className:ze,semanticColor:"textSubdued",children:p.ag.get("live_events.for_you_anonymous_subheading")}),(0,ie.jsx)(Xe.D,{colorSet:"invertedLight",className:$e,onClick:()=>(0,Ot.L6)(),children:p.ag.get("live_events.sign_up_free")})]}),d.data&&(0,ie.jsx)(Tt,{title:p.ag.get("concerts.popular_concerts_near",m),identifier:"popular",position:0,events:d.data.events,onOpenGroupedEvent:e=>{c(e);const t=e.concerts[0]?.concert.artistUris[0];(0,Pt._)({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:t,layout:a}),(0,ie.jsx)(re,{event:r,locationName:m,feedSpec:t,onClose:()=>c(void 0)}),(0,ie.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),d.data&&d.data.userLocationGeonameId&&(0,ie.jsx)(Ze,{geonameId:d.data.userLocationGeonameId,locationName:m})]})}));a(46758),a(27082);const zt=(0,n.memo)((e=>{const{isLoading:t,events:a,locationName:n,spec:s,layout:i,onOpenGroupedEvent:o}=e;if(t)return(0,ie.jsx)(w.h,{hasError:!1,errorMessage:""});if(0===a.length)return(0,ie.jsx)(L.u,{title:p.ag.get("concerts.error.no_concerts_found_title"),message:p.ag.get("concerts.error.no_concerts_found_message",n),renderInline:!0});const r=(e=>{const t={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t})(a);return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Tt,{title:p.ag.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:r.online,onOpenGroupedEvent:o,feedSpec:s,layout:i}),(0,ie.jsx)(Tt,{title:p.ag.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:r.recommended,onOpenGroupedEvent:o,feedSpec:s,layout:i}),(0,ie.jsx)(Tt,{title:p.ag.get("concerts.popular_concerts_near",n),identifier:"popular",position:2,events:r.popular,onOpenGroupedEvent:o,feedSpec:s,layout:i})]})}));var $t=a(50540),Vt=a(80515),Kt=a(1740),qt=a(58912),Zt=a(20069);const Jt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"promoCardPlaylist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"playlistInfo"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"playlistInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"images"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"description"}}]}}]},Xt="Cot6ZntaldMo77XCx1dt",Qt="vfWT92cAm89qtD3Lwfrc",Yt="XyJgy3JOLfeFBo2CiltA",ea="UI2hGxMrqbScQtyg3FzT",ta="mnwdEtmP084CWa7aUEzN",aa=()=>{const e=(0,$t.g)(),t=(0,n.useContext)(Kt.ZF),{data:a}=(0,le.a)({queryKey:["cny-resolve"],queryFn:()=>t.resolvePlaylistFormatURI("spotify:playlist-format:concerts-near-you"),enabled:!e,staleTime:1/0}),{data:s}=(i={uri:a},o={enabled:!!a},(0,Zt.a)(Jt,i,o));var i,o;if("Playlist"===s?.playlistV2.__typename)return s.playlistV2},na=(0,n.memo)((e=>{const t=aa();if(!t)return null;const a=(0,qt.X)(t.images.items[0]?.sources,{desiredSize:88});return(0,ie.jsxs)(A.default,{to:t.uri,className:Xt,children:[(0,ie.jsx)(Vt.E,{src:a?.url,loading:"lazy",alt:"",ariaHidden:!0,className:Qt}),(0,ie.jsxs)("div",{className:Yt,children:[(0,ie.jsx)(S.x,{as:"h3",variant:"bodyMediumBold",className:ea,children:t.name}),(0,ie.jsx)(S.x,{as:"p",variant:"bodySmall",className:ta,children:t.description})]})]})})),sa=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s,onLocationNameChange:o}=e,r=(0,i.s0)(),[c,l]=(0,n.useState)(),d=(0,_e.o)(),m=(0,n.useMemo)((()=>a.headerFactory()),[a]),{data:g,isLoading:u}=pe({geonameId:t});(0,n.useEffect)((()=>{g?.userLocation&&o?.(g.userLocation)}),[g?.userLocation,o]);const h=(0,v.W6)(Ht.yJ3,{loadingValue:!1}),x=g?.userLocation||p.ag.get("concerts.default_location");return(0,ie.jsxs)("div",{children:[(0,ie.jsx)(F.$,{children:`${p.ag.get("concerts_shows_in")} ${x}`}),(0,ie.jsx)("div",{className:Re,"data-testid":"location-selector",children:(0,ie.jsx)(ke.Z,{handleLocationChange:e=>{d({type:"click",intent:"change-live-events-location"}),e?.geonameId&&r((0,H.yI)(e.geonameId,e.location))},locationStr:x,headerSpec:m})}),h&&(0,ie.jsx)("div",{className:qe,children:(0,ie.jsx)(na,{})}),(0,ie.jsx)(zt,{isLoading:u,events:g?.events||[],locationName:x,spec:a,onOpenGroupedEvent:e=>{l(e);const t=e.concerts[0]?.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:s}),(0,ie.jsx)(re,{event:c,locationName:x,feedSpec:a,onClose:()=>l(void 0)}),(0,ie.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),g&&g.userLocationGeonameId&&(0,ie.jsx)(Ze,{geonameId:g.userLocationGeonameId,locationName:x})]})})),ia=(0,n.memo)((e=>{const{spec:t,layout:a}=e,[s,i]=(0,n.useState)(),o=(0,le.a)({queryKey:["savedConcerts"],queryFn:ve}),r=(0,_e.o)(),c=o.data?.userLocation,l=c||p.ag.get("concerts.default_location");return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(F.$,{children:`${p.ag.get("live_events.label")}`}),o.data?.events.length?(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsx)(Tt,{title:p.ag.get("concerts_upcoming"),identifier:"saved",position:0,events:o.data?.events,feedSpec:t,onOpenGroupedEvent:e=>{i(e);const t=e.concerts[0]?.concert.artistUris[0];r({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:a})}):(0,ie.jsxs)("div",{className:Ee,children:[(0,ie.jsx)(S.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Oe,children:p.ag.get("concerts_interested_in_live_events")}),(0,ie.jsx)(S.x,{as:"p",className:Be,children:p.ag.get("concerts_no_events_description")}),(0,ie.jsx)(A.default,{to:"/concerts",className:Me,children:(0,ie.jsx)(C.P,{as:"span",className:Pe,children:p.ag.get("concerts_browse_more_events")})})]}),(0,ie.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),(0,ie.jsx)(re,{event:s,locationName:l,feedSpec:t,onClose:()=>i(void 0)})]})})),oa=r.SHH,ra=()=>{const{isAnonymous:e}=(0,s.v9)(N.Gg),t=(0,i.TH)(),a=t.pathname+t.search,r=(0,k.$P)(),b=(0,v.W6)(_.tp),[S,C]=(0,n.useState)("grid"),{spec:D}=(0,k.fU)(h.y,{}),I=Ne({isAnonymous:e,isInterestedEnabled:b}),F=(0,n.useMemo)((()=>D.headerFactory().liveEventsNavbarFactory({uri:a,reason:I.type})),[D,I,a]),L=(0,k.Wi)(F),[w,U]=(0,n.useState)(),E=e=>{const a=`${t.pathname}?filter=${e}`,n=D.headerFactory().liveEventsNavbarFactory({uri:a,reason:e}).hitUiNavigate({destination:a});r.logInteraction(n)},M=()=>{const e=D.headerFactory().layoutToggleFactory().hitToggleState({stateBeforeToggle:S,stateAfterToggle:"grid"===S?"list":"grid"});r.logInteraction(e),C("grid"===S?"list":"grid")},P=e&&w?p.ag.get("live_events.location_concert_tickets",w):p.ag.get("live_events.label");return(0,ie.jsxs)("section",{className:Ce,children:[(0,ie.jsxs)(y.gF,{size:y.fR.SMALL,backgroundColor:oa,children:[(0,ie.jsx)(y.sP,{children:(0,ie.jsx)(y.xd,{children:P})}),(0,ie.jsx)(j.W,{children:(0,ie.jsx)(f.i,{text:P})})]}),(0,ie.jsxs)("div",{className:De,children:[(0,ie.jsx)(x.I,{backgroundColor:oa}),(0,ie.jsxs)("div",{className:we,ref:L,children:[(0,ie.jsx)(c.l,{list:(0,ie.jsx)("nav",{"aria-label":"live events navbar",children:(0,ie.jsxs)(l.F,{children:[(0,ie.jsx)(d.c,{id:"for_you_link",label:p.ag.get("live_events.for_you_tab"),active:"foryou"===I.type,className:Ue,component:o.rU,onClick:()=>E("foryou"),sentenceCase:!0,to:{search:"filter=foryou"}},"foryou"),(0,ie.jsx)(d.c,{id:"concerts_all_link",label:p.ag.get("live_events.all_events_tab"),active:"all"===I.type,className:Ue,component:o.rU,onClick:()=>E("all"),sentenceCase:!0,to:{search:"filter=all"}},"all"),!e&&b&&(0,ie.jsx)(d.c,{id:"concerts_interested_link",label:p.ag.get("concerts_interested"),active:"saved"===I.type,className:Ue,component:o.rU,onClick:()=>E("saved"),sentenceCase:!0,to:{search:"filter=saved"}},"saved")]})})}),"grid"===S&&(0,ie.jsx)(m.o,{"aria-label":p.ag.get("concerts.feed_list_layout"),iconOnly:g.d,className:Le,onClick:M,size:"small"}),"list"===S&&(0,ie.jsx)(m.o,{"aria-label":p.ag.get("concerts.feed_grid_layout"),iconOnly:u.z,className:Le,onClick:M,size:"small"})]}),(0,ie.jsxs)("div",{className:Ie,children:[e&&"foryou"===I.type&&(0,ie.jsx)(Gt,{geonameId:I.geonameId,spec:D,layout:S,onLocationNameChange:U}),!e&&"foryou"===I.type&&(0,ie.jsx)(sa,{geonameId:I.geonameId,spec:D,layout:S,onLocationNameChange:U}),"all"===I.type&&(0,ie.jsx)(Mt,{geonameId:I.geonameId,spec:D,layout:S,onLocationNameChange:U}),"saved"===I.type&&(0,ie.jsx)(ia,{spec:D,layout:S})]})]})]})}}}]);
>>>>>>> origin/master
//# sourceMappingURL=xpui-routes-collection-concerts.js.map